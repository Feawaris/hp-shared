var mA=Object.create,Ll=Object.defineProperty,gA=Object.getOwnPropertyDescriptor,Ym=Object.getOwnPropertyNames,vA=Object.getPrototypeOf,yA=Object.prototype.hasOwnProperty,o=(t,e)=>Ll(t,"name",{value:e,configurable:!0}),TA=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Z=(t,e)=>function(){return e||(0,t[Ym(t)[0]])((e={exports:{}}).exports,e),e.exports},RA=(t,e)=>{for(var n in e)Ll(t,n,{get:e[n],enumerable:!0})},_A=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ym(e))!yA.call(t,i)&&i!==n&&Ll(t,i,{get:()=>e[i],enumerable:!(r=gA(e,i))||r.enumerable});return t},_e=(t,e,n)=>(n=t!=null?mA(vA(t)):{},_A(e||!t||!t.__esModule?Ll(n,"default",{value:t,enumerable:!0}):n,t)),Qn=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/ral.js"(t){Object.defineProperty(t,"__esModule",{value:!0});var e;function n(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}o(n,"RAL"),function(r){function i(s){if(s===void 0)throw new Error("No runtime abstraction layer provided");e=s}o(i,"install"),r.install=i}(n||(n={})),t.default=n}}),Jm=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/disposable.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){function n(r){return{dispose:r}}o(n,"create"),e.create=n}(t.Disposable||(t.Disposable={}))}}),fi=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/events.js"(t){var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;var e=Qn();(function(a){const c={dispose(){}};a.None=function(){return c}})(t.Event||(t.Event={}));var n=(i=class{add(c,l=null,u){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(c),this._contexts.push(l),Array.isArray(u)&&u.push({dispose:()=>this.remove(c,l)})}remove(c,l=null){if(!this._callbacks)return;let u=!1;for(let d=0,f=this._callbacks.length;d<f;d++)if(this._callbacks[d]===c)if(this._contexts[d]===l){this._callbacks.splice(d,1),this._contexts.splice(d,1);return}else u=!0;if(u)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...c){if(!this._callbacks)return[];const l=[],u=this._callbacks.slice(0),d=this._contexts.slice(0);for(let f=0,p=u.length;f<p;f++)try{l.push(u[f].apply(d[f],c))}catch(h){(0,e.default)().console.error(h)}return l}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},o(i,"CallbackList"),i),r=(s=class{constructor(c){this._options=c}get event(){return this._event||(this._event=(c,l,u)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(c,l);const d={dispose:()=>{this._callbacks&&(this._callbacks.remove(c,l),d.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(u)&&u.push(d),d}),this._event}fire(c){this._callbacks&&this._callbacks.invoke.call(this._callbacks,c)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}},o(s,"Emitter"),s);t.Emitter=r,r._noop=function(){}}}),bA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/messageBuffer.js"(t){var s;Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0;var e=13,n=10,r=`\r
`,i=(s=class{constructor(c="utf-8"){this._encoding=c,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(c){const l=typeof c=="string"?this.fromString(c,this._encoding):c;this._chunks.push(l),this._totalLength+=l.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let c=0,l=0,u=0,d=0;e:for(;l<this._chunks.length;){const R=this._chunks[l];for(u=0;u<R.length;){switch(R[u]){case e:switch(c){case 0:c=1;break;case 2:c=3;break;default:c=0}break;case n:switch(c){case 1:c=2;break;case 3:c=4,u++;break e;default:c=0}break;default:c=0}u++}d+=R.byteLength,l++}if(c!==4)return;const f=this._read(d+u),p=new Map,h=this.toString(f,"ascii").split(r);if(h.length<2)return p;for(let R=0;R<h.length-2;R++){const k=h[R],A=k.indexOf(":");if(A===-1)throw new Error("Message header must separate key and value using :");const w=k.substr(0,A),E=k.substr(A+1).trim();p.set(w,E)}return p}tryReadBody(c){if(!(this._totalLength<c))return this._read(c)}get numberOfBytes(){return this._totalLength}_read(c){if(c===0)return this.emptyBuffer();if(c>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===c){const f=this._chunks[0];return this._chunks.shift(),this._totalLength-=c,this.asNative(f)}if(this._chunks[0].byteLength>c){const f=this._chunks[0],p=this.asNative(f,c);return this._chunks[0]=f.slice(c),this._totalLength-=c,p}const l=this.allocNative(c);let u=0,d=0;for(;c>0;){const f=this._chunks[d];if(f.byteLength>c){const p=f.slice(0,c);l.set(p,u),u+=c,this._chunks[d]=f.slice(c),this._totalLength-=c,c-=c}else l.set(f,u),u+=f.byteLength,this._chunks.shift(),this._totalLength-=f.byteLength,c-=f.byteLength}return l}},o(s,"AbstractMessageBuffer"),s);t.AbstractMessageBuffer=i}}),kA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/browser/ril.js"(t){var f,p,h;Object.defineProperty(t,"__esModule",{value:!0});var e=Qn(),n=Jm(),r=fi(),i=bA(),s=(f=class extends i.AbstractMessageBuffer{constructor(k="utf-8"){super(k),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return f.emptyBuffer}fromString(k,A){return new TextEncoder().encode(k)}toString(k,A){return A==="ascii"?this.asciiDecoder.decode(k):new TextDecoder(A).decode(k)}asNative(k,A){return A===void 0?k:k.slice(0,A)}allocNative(k){return new Uint8Array(k)}},o(f,"MessageBuffer"),f);s.emptyBuffer=new Uint8Array(0);var a=(p=class{constructor(k){this.socket=k,this._onData=new r.Emitter,this._messageListener=A=>{A.data.arrayBuffer().then(E=>{this._onData.fire(new Uint8Array(E))},()=>{(0,e.default)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(k){return this.socket.addEventListener("close",k),n.Disposable.create(()=>this.socket.removeEventListener("close",k))}onError(k){return this.socket.addEventListener("error",k),n.Disposable.create(()=>this.socket.removeEventListener("error",k))}onEnd(k){return this.socket.addEventListener("end",k),n.Disposable.create(()=>this.socket.removeEventListener("end",k))}onData(k){return this._onData.event(k)}},o(p,"ReadableStreamWrapper"),p),c=(h=class{constructor(k){this.socket=k}onClose(k){return this.socket.addEventListener("close",k),n.Disposable.create(()=>this.socket.removeEventListener("close",k))}onError(k){return this.socket.addEventListener("error",k),n.Disposable.create(()=>this.socket.removeEventListener("error",k))}onEnd(k){return this.socket.addEventListener("end",k),n.Disposable.create(()=>this.socket.removeEventListener("end",k))}write(k,A){if(typeof k=="string"){if(A!==void 0&&A!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${A}`);this.socket.send(k)}else this.socket.send(k);return Promise.resolve()}end(){this.socket.close()}},o(h,"WritableStreamWrapper"),h),l=new TextEncoder,u=Object.freeze({messageBuffer:Object.freeze({create:R=>new s(R)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(R,k)=>{if(k.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${k.charset}`);return Promise.resolve(l.encode(JSON.stringify(R,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(R,k)=>{if(!(R instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(k.charset).decode(R)))}})}),stream:Object.freeze({asReadableStream:R=>new a(R),asWritableStream:R=>new c(R)}),console,timer:Object.freeze({setTimeout(R,k,...A){const w=setTimeout(R,k,...A);return{dispose:()=>clearTimeout(w)}},setImmediate(R,...k){const A=setTimeout(R,0,...k);return{dispose:()=>clearTimeout(A)}},setInterval(R,k,...A){const w=setInterval(R,k,...A);return{dispose:()=>clearInterval(w)}}})});function d(){return u}o(d,"RIL"),function(R){function k(){e.default.install(u)}o(k,"install"),R.install=k}(d||(d={})),t.default=d}}),nc=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/is.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function e(l){return l===!0||l===!1}o(e,"boolean"),t.boolean=e;function n(l){return typeof l=="string"||l instanceof String}o(n,"string"),t.string=n;function r(l){return typeof l=="number"||l instanceof Number}o(r,"number"),t.number=r;function i(l){return l instanceof Error}o(i,"error"),t.error=i;function s(l){return typeof l=="function"}o(s,"func"),t.func=s;function a(l){return Array.isArray(l)}o(a,"array"),t.array=a;function c(l){return a(l)&&l.every(u=>n(u))}o(c,"stringArray"),t.stringArray=c}}),Qm=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/messages.js"(t){var v,q,Y,V,O,_,g,y,b,T,m,C,D,B,ee,te,fe,Q,he,H,pe,Ae,He,at,bt;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;var e=nc(),n;(function(we){we.ParseError=-32700,we.InvalidRequest=-32600,we.MethodNotFound=-32601,we.InvalidParams=-32602,we.InternalError=-32603,we.jsonrpcReservedErrorRangeStart=-32099,we.serverErrorStart=-32099,we.MessageWriteError=-32099,we.MessageReadError=-32098,we.PendingResponseRejected=-32097,we.ConnectionInactive=-32096,we.ServerNotInitialized=-32002,we.UnknownErrorCode=-32001,we.jsonrpcReservedErrorRangeEnd=-32e3,we.serverErrorEnd=-32e3})(n=t.ErrorCodes||(t.ErrorCodes={}));var r=(v=class extends Error{constructor(K,se,I){super(se),this.code=e.number(K)?K:n.UnknownErrorCode,this.data=I,Object.setPrototypeOf(this,v.prototype)}toJson(){const K={code:this.code,message:this.message};return this.data!==void 0&&(K.data=this.data),K}},o(v,"ResponseError"),v);t.ResponseError=r;var i=(q=class{constructor(K){this.kind=K}static is(K){return K===q.auto||K===q.byName||K===q.byPosition}toString(){return this.kind}},o(q,"ParameterStructures"),q);t.ParameterStructures=i,i.auto=new i("auto"),i.byPosition=new i("byPosition"),i.byName=new i("byName");var s=(Y=class{constructor(K,se){this.method=K,this.numberOfParams=se}get parameterStructures(){return i.auto}},o(Y,"AbstractMessageSignature"),Y);t.AbstractMessageSignature=s;var a=(V=class extends s{constructor(K){super(K,0)}},o(V,"RequestType0"),V);t.RequestType0=a;var c=(O=class extends s{constructor(K,se=i.auto){super(K,1),this._parameterStructures=se}get parameterStructures(){return this._parameterStructures}},o(O,"RequestType"),O);t.RequestType=c;var l=(_=class extends s{constructor(K,se=i.auto){super(K,1),this._parameterStructures=se}get parameterStructures(){return this._parameterStructures}},o(_,"RequestType1"),_);t.RequestType1=l;var u=(g=class extends s{constructor(K){super(K,2)}},o(g,"RequestType2"),g);t.RequestType2=u;var d=(y=class extends s{constructor(K){super(K,3)}},o(y,"RequestType3"),y);t.RequestType3=d;var f=(b=class extends s{constructor(K){super(K,4)}},o(b,"RequestType4"),b);t.RequestType4=f;var p=(T=class extends s{constructor(K){super(K,5)}},o(T,"RequestType5"),T);t.RequestType5=p;var h=(m=class extends s{constructor(K){super(K,6)}},o(m,"RequestType6"),m);t.RequestType6=h;var R=(C=class extends s{constructor(K){super(K,7)}},o(C,"RequestType7"),C);t.RequestType7=R;var k=(D=class extends s{constructor(K){super(K,8)}},o(D,"RequestType8"),D);t.RequestType8=k;var A=(B=class extends s{constructor(K){super(K,9)}},o(B,"RequestType9"),B);t.RequestType9=A;var w=(ee=class extends s{constructor(K,se=i.auto){super(K,1),this._parameterStructures=se}get parameterStructures(){return this._parameterStructures}},o(ee,"NotificationType"),ee);t.NotificationType=w;var E=(te=class extends s{constructor(K){super(K,0)}},o(te,"NotificationType0"),te);t.NotificationType0=E;var P=(fe=class extends s{constructor(K,se=i.auto){super(K,1),this._parameterStructures=se}get parameterStructures(){return this._parameterStructures}},o(fe,"NotificationType1"),fe);t.NotificationType1=P;var j=(Q=class extends s{constructor(K){super(K,2)}},o(Q,"NotificationType2"),Q);t.NotificationType2=j;var z=(he=class extends s{constructor(K){super(K,3)}},o(he,"NotificationType3"),he);t.NotificationType3=z;var ie=(H=class extends s{constructor(K){super(K,4)}},o(H,"NotificationType4"),H);t.NotificationType4=ie;var de=(pe=class extends s{constructor(K){super(K,5)}},o(pe,"NotificationType5"),pe);t.NotificationType5=de;var ve=(Ae=class extends s{constructor(K){super(K,6)}},o(Ae,"NotificationType6"),Ae);t.NotificationType6=ve;var ue=(He=class extends s{constructor(K){super(K,7)}},o(He,"NotificationType7"),He);t.NotificationType7=ue;var L=(at=class extends s{constructor(K){super(K,8)}},o(at,"NotificationType8"),at);t.NotificationType8=L;var W=(bt=class extends s{constructor(K){super(K,9)}},o(bt,"NotificationType9"),bt);t.NotificationType9=W,function(we){function K(U){const re=U;return re&&e.string(re.method)&&(e.string(re.id)||e.number(re.id))}o(K,"isRequest"),we.isRequest=K;function se(U){const re=U;return re&&e.string(re.method)&&U.id===void 0}o(se,"isNotification"),we.isNotification=se;function I(U){const re=U;return re&&(re.result!==void 0||!!re.error)&&(e.string(re.id)||e.number(re.id)||re.id===null)}o(I,"isResponse"),we.isResponse=I}(t.Message||(t.Message={}))}}),Zm=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/linkedMap.js"(t){var s,a;var e;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0;var n;(function(c){c.None=0,c.First=1,c.AsOld=c.First,c.Last=2,c.AsNew=c.Last})(n=t.Touch||(t.Touch={}));var r=(s=class{constructor(){this[e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var l;return(l=this._head)==null?void 0:l.value}get last(){var l;return(l=this._tail)==null?void 0:l.value}has(l){return this._map.has(l)}get(l,u=n.None){const d=this._map.get(l);if(d)return u!==n.None&&this.touch(d,u),d.value}set(l,u,d=n.None){let f=this._map.get(l);if(f)f.value=u,d!==n.None&&this.touch(f,d);else{switch(f={key:l,value:u,next:void 0,previous:void 0},d){case n.None:this.addItemLast(f);break;case n.First:this.addItemFirst(f);break;case n.Last:this.addItemLast(f);break;default:this.addItemLast(f);break}this._map.set(l,f),this._size++}return this}delete(l){return!!this.remove(l)}remove(l){const u=this._map.get(l);if(u)return this._map.delete(l),this.removeItem(u),this._size--,u.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const l=this._head;return this._map.delete(l.key),this.removeItem(l),this._size--,l.value}forEach(l,u){const d=this._state;let f=this._head;for(;f;){if(u?l.bind(u)(f.value,f.key,this):l(f.value,f.key,this),this._state!==d)throw new Error("LinkedMap got modified during iteration.");f=f.next}}keys(){const l=this._state;let u=this._head;const d={[Symbol.iterator]:()=>d,next:()=>{if(this._state!==l)throw new Error("LinkedMap got modified during iteration.");if(u){const f={value:u.key,done:!1};return u=u.next,f}else return{value:void 0,done:!0}}};return d}values(){const l=this._state;let u=this._head;const d={[Symbol.iterator]:()=>d,next:()=>{if(this._state!==l)throw new Error("LinkedMap got modified during iteration.");if(u){const f={value:u.value,done:!1};return u=u.next,f}else return{value:void 0,done:!0}}};return d}entries(){const l=this._state;let u=this._head;const d={[Symbol.iterator]:()=>d,next:()=>{if(this._state!==l)throw new Error("LinkedMap got modified during iteration.");if(u){const f={value:[u.key,u.value],done:!1};return u=u.next,f}else return{value:void 0,done:!0}}};return d}[(e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(l){if(l>=this.size)return;if(l===0){this.clear();return}let u=this._head,d=this.size;for(;u&&d>l;)this._map.delete(u.key),u=u.next,d--;this._head=u,this._size=d,u&&(u.previous=void 0),this._state++}addItemFirst(l){if(!this._head&&!this._tail)this._tail=l;else if(this._head)l.next=this._head,this._head.previous=l;else throw new Error("Invalid list");this._head=l,this._state++}addItemLast(l){if(!this._head&&!this._tail)this._head=l;else if(this._tail)l.previous=this._tail,this._tail.next=l;else throw new Error("Invalid list");this._tail=l,this._state++}removeItem(l){if(l===this._head&&l===this._tail)this._head=void 0,this._tail=void 0;else if(l===this._head){if(!l.next)throw new Error("Invalid list");l.next.previous=void 0,this._head=l.next}else if(l===this._tail){if(!l.previous)throw new Error("Invalid list");l.previous.next=void 0,this._tail=l.previous}else{const u=l.next,d=l.previous;if(!u||!d)throw new Error("Invalid list");u.previous=d,d.next=u}l.next=void 0,l.previous=void 0,this._state++}touch(l,u){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(u!==n.First&&u!==n.Last)){if(u===n.First){if(l===this._head)return;const d=l.next,f=l.previous;l===this._tail?(f.next=void 0,this._tail=f):(d.previous=f,f.next=d),l.previous=void 0,l.next=this._head,this._head.previous=l,this._head=l,this._state++}else if(u===n.Last){if(l===this._tail)return;const d=l.next,f=l.previous;l===this._head?(d.previous=void 0,this._head=d):(d.previous=f,f.next=d),l.next=void 0,l.previous=this._tail,this._tail.next=l,this._tail=l,this._state++}}}toJSON(){const l=[];return this.forEach((u,d)=>{l.push([d,u])}),l}fromJSON(l){this.clear();for(const[u,d]of l)this.set(u,d)}},o(s,"LinkedMap"),s);t.LinkedMap=r;var i=(a=class extends r{constructor(l,u=1){super(),this._limit=l,this._ratio=Math.min(Math.max(0,u),1)}get limit(){return this._limit}set limit(l){this._limit=l,this.checkTrim()}get ratio(){return this._ratio}set ratio(l){this._ratio=Math.min(Math.max(0,l),1),this.checkTrim()}get(l,u=n.AsNew){return super.get(l,u)}peek(l){return super.get(l,n.None)}set(l,u){return super.set(l,u,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}},o(a,"LRUCache"),a);t.LRUCache=i}}),eg=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/cancellation.js"(t){var l,u;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;var e=Qn(),n=nc(),r=fi(),i;(function(d){d.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),d.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function f(p){const h=p;return h&&(h===d.None||h===d.Cancelled||n.boolean(h.isCancellationRequested)&&!!h.onCancellationRequested)}o(f,"is"),d.is=f})(i=t.CancellationToken||(t.CancellationToken={}));var s=Object.freeze(function(d,f){const p=(0,e.default)().timer.setTimeout(d.bind(f),0);return{dispose(){p.dispose()}}}),a=(l=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},o(l,"MutableToken"),l),c=(u=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=i.None}},o(u,"CancellationTokenSource"),u);t.CancellationTokenSource=c}}),SA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/messageReader.js"(t){var c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;var e=Qn(),n=nc(),r=fi();(function(u){function d(f){let p=f;return p&&n.func(p.listen)&&n.func(p.dispose)&&n.func(p.onError)&&n.func(p.onClose)&&n.func(p.onPartialMessage)}o(d,"is"),u.is=d})(t.MessageReader||(t.MessageReader={}));var i=(c=class{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(d){this.errorEmitter.fire(this.asError(d))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(d){this.partialMessageEmitter.fire(d)}asError(d){return d instanceof Error?d:new Error(`Reader received error. Reason: ${n.string(d.message)?d.message:"unknown"}`)}},o(c,"AbstractMessageReader"),c);t.AbstractMessageReader=i;var s;(function(u){function d(f){let p,h;const R=new Map;let k;const A=new Map;if(f===void 0||typeof f=="string")p=f??"utf-8";else{if(p=f.charset??"utf-8",f.contentDecoder!==void 0&&(h=f.contentDecoder,R.set(h.name,h)),f.contentDecoders!==void 0)for(const w of f.contentDecoders)R.set(w.name,w);if(f.contentTypeDecoder!==void 0&&(k=f.contentTypeDecoder,A.set(k.name,k)),f.contentTypeDecoders!==void 0)for(const w of f.contentTypeDecoders)A.set(w.name,w)}return k===void 0&&(k=(0,e.default)().applicationJson.decoder,A.set(k.name,k)),{charset:p,contentDecoder:h,contentDecoders:R,contentTypeDecoder:k,contentTypeDecoders:A}}o(d,"fromOptions"),u.fromOptions=d})(s||(s={}));var a=(l=class extends i{constructor(d,f){super(),this.readable=d,this.options=s.fromOptions(f),this.buffer=(0,e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(d){this._partialMessageTimeout=d}get partialMessageTimeout(){return this._partialMessageTimeout}listen(d){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=d;const f=this.readable.onData(p=>{this.onData(p)});return this.readable.onError(p=>this.fireError(p)),this.readable.onClose(()=>this.fireClose()),f}onData(d){for(this.buffer.append(d);;){if(this.nextMessageLength===-1){const h=this.buffer.tryReadHeaders();if(!h)return;const R=h.get("Content-Length");if(!R)throw new Error("Header must provide a Content-Length property.");const k=parseInt(R);if(isNaN(k))throw new Error("Content-Length value must be a number.");this.nextMessageLength=k}const f=this.buffer.tryReadBody(this.nextMessageLength);if(f===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let p;this.options.contentDecoder!==void 0?p=this.options.contentDecoder.decode(f):p=Promise.resolve(f),p.then(h=>{this.options.contentTypeDecoder.decode(h,this.options).then(R=>{this.callback(R)},R=>{this.fireError(R)})},h=>{this.fireError(h)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,e.default)().timer.setTimeout((d,f)=>{this.partialMessageTimer=void 0,d===this.messageToken&&(this.firePartialMessage({messageToken:d,waitingTime:f}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}},o(l,"ReadableStreamMessageReader"),l);t.ReadableStreamMessageReader=a}}),AA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/semaphore.js"(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;var e=Qn(),n=(r=class{constructor(s=1){if(s<=0)throw new Error("Capacity must be greater than 0");this._capacity=s,this._active=0,this._waiting=[]}lock(s){return new Promise((a,c)=>{this._waiting.push({thunk:s,resolve:a,reject:c}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,e.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const s=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const a=s.thunk();a instanceof Promise?a.then(c=>{this._active--,s.resolve(c),this.runNext()},c=>{this._active--,s.reject(c),this.runNext()}):(this._active--,s.resolve(a),this.runNext())}catch(a){this._active--,s.reject(a),this.runNext()}}},o(r,"Semaphore"),r);t.Semaphore=n}}),wA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/messageWriter.js"(t){var d,f;Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;var e=Qn(),n=nc(),r=AA(),i=fi(),s="Content-Length: ",a=`\r
`;(function(p){function h(R){let k=R;return k&&n.func(k.dispose)&&n.func(k.onClose)&&n.func(k.onError)&&n.func(k.write)}o(h,"is"),p.is=h})(t.MessageWriter||(t.MessageWriter={}));var c=(d=class{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(h,R,k){this.errorEmitter.fire([this.asError(h),R,k])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(h){return h instanceof Error?h:new Error(`Writer received error. Reason: ${n.string(h.message)?h.message:"unknown"}`)}},o(d,"AbstractMessageWriter"),d);t.AbstractMessageWriter=c;var l;(function(p){function h(R){return R===void 0||typeof R=="string"?{charset:R??"utf-8",contentTypeEncoder:(0,e.default)().applicationJson.encoder}:{charset:R.charset??"utf-8",contentEncoder:R.contentEncoder,contentTypeEncoder:R.contentTypeEncoder??(0,e.default)().applicationJson.encoder}}o(h,"fromOptions"),p.fromOptions=h})(l||(l={}));var u=(f=class extends c{constructor(h,R){super(),this.writable=h,this.options=l.fromOptions(R),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(k=>this.fireError(k)),this.writable.onClose(()=>this.fireClose())}async write(h){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(h,this.options).then(k=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(k):k).then(k=>{const A=[];return A.push(s,k.byteLength.toString(),a),A.push(a),this.doWrite(h,A,k)},k=>{throw this.fireError(k),k}))}async doWrite(h,R,k){try{return await this.writable.write(R.join(""),"ascii"),this.writable.write(k)}catch(A){return this.handleError(A,h),Promise.reject(A)}}handleError(h,R){this.errorCount++,this.fireError(h,R,this.errorCount)}end(){this.writable.end()}},o(f,"WriteableStreamMessageWriter"),f);t.WriteableStreamMessageWriter=u}}),CA=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/connection.js"(t){var ve,ue;Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;var e=Qn(),n=nc(),r=Qm(),i=Zm(),s=fi(),a=eg(),c;(function(L){L.type=new r.NotificationType("$/cancelRequest")})(c||(c={}));var l;(function(L){function W(v){return typeof v=="string"||typeof v=="number"}o(W,"is"),L.is=W})(l=t.ProgressToken||(t.ProgressToken={}));var u;(function(L){L.type=new r.NotificationType("$/progress")})(u||(u={}));var d=(ve=class{constructor(){}},o(ve,"ProgressType"),ve);t.ProgressType=d;var f;(function(L){function W(v){return n.func(v)}o(W,"is"),L.is=W})(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var p;(function(L){L[L.Off=0]="Off",L[L.Messages=1]="Messages",L[L.Compact=2]="Compact",L[L.Verbose=3]="Verbose"})(p=t.Trace||(t.Trace={})),function(L){L.Off="off",L.Messages="messages",L.Compact="compact",L.Verbose="verbose"}(t.TraceValues||(t.TraceValues={})),function(L){function W(q){if(!n.string(q))return L.Off;switch(q=q.toLowerCase(),q){case"off":return L.Off;case"messages":return L.Messages;case"compact":return L.Compact;case"verbose":return L.Verbose;default:return L.Off}}o(W,"fromString"),L.fromString=W;function v(q){switch(q){case L.Off:return"off";case L.Messages:return"messages";case L.Compact:return"compact";case L.Verbose:return"verbose";default:return"off"}}o(v,"toString"),L.toString=v}(p=t.Trace||(t.Trace={}));var h;(function(L){L.Text="text",L.JSON="json"})(h=t.TraceFormat||(t.TraceFormat={})),function(L){function W(v){return n.string(v)?(v=v.toLowerCase(),v==="json"?L.JSON:L.Text):L.Text}o(W,"fromString"),L.fromString=W}(h=t.TraceFormat||(t.TraceFormat={}));var R;(function(L){L.type=new r.NotificationType("$/setTrace")})(R=t.SetTraceNotification||(t.SetTraceNotification={}));var k;(function(L){L.type=new r.NotificationType("$/logTrace")})(k=t.LogTraceNotification||(t.LogTraceNotification={}));var A;(function(L){L[L.Closed=1]="Closed",L[L.Disposed=2]="Disposed",L[L.AlreadyListening=3]="AlreadyListening"})(A=t.ConnectionErrors||(t.ConnectionErrors={}));var w=(ue=class extends Error{constructor(W,v){super(v),this.code=W,Object.setPrototypeOf(this,ue.prototype)}},o(ue,"ConnectionError"),ue);t.ConnectionError=w;var E;(function(L){function W(v){const q=v;return q&&n.func(q.cancelUndispatched)}o(W,"is"),L.is=W})(E=t.ConnectionStrategy||(t.ConnectionStrategy={}));var P;(function(L){L.Message=Object.freeze({createCancellationTokenSource(v){return new a.CancellationTokenSource}});function W(v){const q=v;return q&&n.func(q.createCancellationTokenSource)}o(W,"is"),L.is=W})(P=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={}));var j;(function(L){L.Message=Object.freeze({sendCancellation(v,q){return v.sendNotification(c.type,{id:q})},cleanup(v){}});function W(v){const q=v;return q&&n.func(q.sendCancellation)&&n.func(q.cleanup)}o(W,"is"),L.is=W})(j=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={}));var z;(function(L){L.Message=Object.freeze({receiver:P.Message,sender:j.Message});function W(v){const q=v;return q&&P.is(q.receiver)&&j.is(q.sender)}o(W,"is"),L.is=W})(z=t.CancellationStrategy||(t.CancellationStrategy={})),function(L){function W(v){const q=v;return q&&(z.is(q.cancellationStrategy)||E.is(q.connectionStrategy))}o(W,"is"),L.is=W}(t.ConnectionOptions||(t.ConnectionOptions={}));var ie;(function(L){L[L.New=1]="New",L[L.Listening=2]="Listening",L[L.Closed=3]="Closed",L[L.Disposed=4]="Disposed"})(ie||(ie={}));function de(L,W,v,q){const Y=v!==void 0?v:t.NullLogger;let V=0,O=0,_=0;const g="2.0";let y;const b=new Map;let T;const m=new Map,C=new Map;let D,B=new i.LinkedMap,ee=new Map,te=new Set,fe=new Map,Q=p.Off,he=h.Text,H,pe=ie.New;const Ae=new s.Emitter,He=new s.Emitter,at=new s.Emitter,bt=new s.Emitter,we=new s.Emitter,K=q&&q.cancellationStrategy?q.cancellationStrategy:z.Message;function se(S){if(S===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+S.toString()}o(se,"createRequestQueueKey");function I(S){return S===null?"res-unknown-"+(++_).toString():"res-"+S.toString()}o(I,"createResponseQueueKey");function U(){return"not-"+(++O).toString()}o(U,"createNotificationQueueKey");function re(S,x){r.Message.isRequest(x)?S.set(se(x.id),x):r.Message.isResponse(x)?S.set(I(x.id),x):S.set(U(),x)}o(re,"addMessageToQueue");function M(S){}o(M,"cancelUndispatched");function it(){return pe===ie.Listening}o(it,"isListening");function It(){return pe===ie.Closed}o(It,"isClosed");function Dt(){return pe===ie.Disposed}o(Dt,"isDisposed");function Fr(){(pe===ie.New||pe===ie.Listening)&&(pe=ie.Closed,He.fire(void 0))}o(Fr,"closeHandler");function Ti(S){Ae.fire([S,void 0,void 0])}o(Ti,"readErrorHandler");function Ri(S){Ae.fire(S)}o(Ri,"writeErrorHandler"),L.onClose(Fr),L.onError(Ti),W.onClose(Fr),W.onError(Ri);function xr(){D||B.size===0||(D=(0,e.default)().timer.setImmediate(()=>{D=void 0,sr()}))}o(xr,"triggerMessageQueue");function sr(){if(B.size===0)return;const S=B.shift();try{r.Message.isRequest(S)?ar(S):r.Message.isNotification(S)?cr(S):r.Message.isResponse(S)?or(S):Sn(S)}finally{xr()}}o(sr,"processMessageQueue");const kc=o(S=>{try{if(r.Message.isNotification(S)&&S.method===c.type.method){const x=S.params.id,G=se(x),ne=B.get(G);if(r.Message.isRequest(ne)){const Le=q==null?void 0:q.connectionStrategy,Ie=Le&&Le.cancelUndispatched?Le.cancelUndispatched(ne,M):void 0;if(Ie&&(Ie.error!==void 0||Ie.result!==void 0)){B.delete(G),fe.delete(x),Ie.id=ne.id,mt(Ie,S.method,Date.now()),W.write(Ie).catch(()=>Y.error("Sending response for canceled message failed."));return}}const Oe=fe.get(x);if(Oe!==void 0){Oe.cancel(),jr(S);return}else te.add(x)}re(B,S)}finally{xr()}},"callback");function ar(S){if(Dt())return;function x(ye,Fe,be){const Je={jsonrpc:g,id:S.id};ye instanceof r.ResponseError?Je.error=ye.toJson():Je.result=ye===void 0?null:ye,mt(Je,Fe,be),W.write(Je).catch(()=>Y.error("Sending response failed."))}o(x,"reply");function G(ye,Fe,be){const Je={jsonrpc:g,id:S.id,error:ye.toJson()};mt(Je,Fe,be),W.write(Je).catch(()=>Y.error("Sending response failed."))}o(G,"replyError");function ne(ye,Fe,be){ye===void 0&&(ye=null);const Je={jsonrpc:g,id:S.id,result:ye};mt(Je,Fe,be),W.write(Je).catch(()=>Y.error("Sending response failed."))}o(ne,"replySuccess"),Ot(S);const Oe=b.get(S.method);let Le,Ie;Oe&&(Le=Oe.type,Ie=Oe.handler);const st=Date.now();if(Ie||y){const ye=S.id??String(Date.now()),Fe=K.receiver.createCancellationTokenSource(ye);S.id!==null&&te.has(S.id)&&Fe.cancel(),S.id!==null&&fe.set(ye,Fe);try{let be;if(Ie)if(S.params===void 0){if(Le!==void 0&&Le.numberOfParams!==0){G(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${S.method} defines ${Le.numberOfParams} params but received none.`),S.method,st);return}be=Ie(Fe.token)}else if(Array.isArray(S.params)){if(Le!==void 0&&Le.parameterStructures===r.ParameterStructures.byName){G(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${S.method} defines parameters by name but received parameters by position`),S.method,st);return}be=Ie(...S.params,Fe.token)}else{if(Le!==void 0&&Le.parameterStructures===r.ParameterStructures.byPosition){G(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${S.method} defines parameters by position but received parameters by name`),S.method,st);return}be=Ie(S.params,Fe.token)}else y&&(be=y(S.method,S.params,Fe.token));const Je=be;be?Je.then?Je.then(kt=>{fe.delete(ye),x(kt,S.method,st)},kt=>{fe.delete(ye),kt instanceof r.ResponseError?G(kt,S.method,st):kt&&n.string(kt.message)?G(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${S.method} failed with message: ${kt.message}`),S.method,st):G(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${S.method} failed unexpectedly without providing any details.`),S.method,st)}):(fe.delete(ye),x(be,S.method,st)):(fe.delete(ye),ne(be,S.method,st))}catch(be){fe.delete(ye),be instanceof r.ResponseError?x(be,S.method,st):be&&n.string(be.message)?G(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${S.method} failed with message: ${be.message}`),S.method,st):G(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${S.method} failed unexpectedly without providing any details.`),S.method,st)}}else G(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${S.method}`),S.method,st)}o(ar,"handleRequest");function or(S){if(!Dt())if(S.id===null)S.error?Y.error(`Received response message without id: Error is: 
${JSON.stringify(S.error,void 0,4)}`):Y.error("Received response message without id. No further error information provided.");else{const x=S.id,G=ee.get(x);if(Uh(S,G),G!==void 0){ee.delete(x);try{if(S.error){const ne=S.error;G.reject(new r.ResponseError(ne.code,ne.message,ne.data))}else if(S.result!==void 0)G.resolve(S.result);else throw new Error("Should never happen.")}catch(ne){ne.message?Y.error(`Response handler '${G.method}' failed with message: ${ne.message}`):Y.error(`Response handler '${G.method}' failed unexpectedly.`)}}}}o(or,"handleResponse");function cr(S){if(Dt())return;let x,G;if(S.method===c.type.method){const ne=S.params.id;te.delete(ne),jr(S);return}else{const ne=m.get(S.method);ne&&(G=ne.handler,x=ne.type)}if(G||T)try{if(jr(S),G)if(S.params===void 0)x!==void 0&&x.numberOfParams!==0&&x.parameterStructures!==r.ParameterStructures.byName&&Y.error(`Notification ${S.method} defines ${x.numberOfParams} params but received none.`),G();else if(Array.isArray(S.params)){const ne=S.params;S.method===u.type.method&&ne.length===2&&l.is(ne[0])?G({token:ne[0],value:ne[1]}):(x!==void 0&&(x.parameterStructures===r.ParameterStructures.byName&&Y.error(`Notification ${S.method} defines parameters by name but received parameters by position`),x.numberOfParams!==S.params.length&&Y.error(`Notification ${S.method} defines ${x.numberOfParams} params but received ${ne.length} arguments`)),G(...ne))}else x!==void 0&&x.parameterStructures===r.ParameterStructures.byPosition&&Y.error(`Notification ${S.method} defines parameters by position but received parameters by name`),G(S.params);else T&&T(S.method,S.params)}catch(ne){ne.message?Y.error(`Notification handler '${S.method}' failed with message: ${ne.message}`):Y.error(`Notification handler '${S.method}' failed unexpectedly.`)}else at.fire(S)}o(cr,"handleNotification");function Sn(S){if(!S){Y.error("Received empty message.");return}Y.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(S,null,4)}`);const x=S;if(n.string(x.id)||n.number(x.id)){const G=x.id,ne=ee.get(G);ne&&ne.reject(new Error("The received response has neither a result nor an error property."))}}o(Sn,"handleInvalidMessage");function $(S){if(S!=null)switch(Q){case p.Verbose:return JSON.stringify(S,null,4);case p.Compact:return JSON.stringify(S);default:return}}o($,"stringifyTrace");function F(S){if(!(Q===p.Off||!H))if(he===h.Text){let x;(Q===p.Verbose||Q===p.Compact)&&S.params&&(x=`Params: ${$(S.params)}

`),H.log(`Sending request '${S.method} - (${S.id})'.`,x)}else lr("send-request",S)}o(F,"traceSendingRequest");function X(S){if(!(Q===p.Off||!H))if(he===h.Text){let x;(Q===p.Verbose||Q===p.Compact)&&(S.params?x=`Params: ${$(S.params)}

`:x=`No parameters provided.

`),H.log(`Sending notification '${S.method}'.`,x)}else lr("send-notification",S)}o(X,"traceSendingNotification");function mt(S,x,G){if(!(Q===p.Off||!H))if(he===h.Text){let ne;(Q===p.Verbose||Q===p.Compact)&&(S.error&&S.error.data?ne=`Error data: ${$(S.error.data)}

`:S.result?ne=`Result: ${$(S.result)}

`:S.error===void 0&&(ne=`No result returned.

`)),H.log(`Sending response '${x} - (${S.id})'. Processing request took ${Date.now()-G}ms`,ne)}else lr("send-response",S)}o(mt,"traceSendingResponse");function Ot(S){if(!(Q===p.Off||!H))if(he===h.Text){let x;(Q===p.Verbose||Q===p.Compact)&&S.params&&(x=`Params: ${$(S.params)}

`),H.log(`Received request '${S.method} - (${S.id})'.`,x)}else lr("receive-request",S)}o(Ot,"traceReceivedRequest");function jr(S){if(!(Q===p.Off||!H||S.method===k.type.method))if(he===h.Text){let x;(Q===p.Verbose||Q===p.Compact)&&(S.params?x=`Params: ${$(S.params)}

`:x=`No parameters provided.

`),H.log(`Received notification '${S.method}'.`,x)}else lr("receive-notification",S)}o(jr,"traceReceivedNotification");function Uh(S,x){if(!(Q===p.Off||!H))if(he===h.Text){let G;if((Q===p.Verbose||Q===p.Compact)&&(S.error&&S.error.data?G=`Error data: ${$(S.error.data)}

`:S.result?G=`Result: ${$(S.result)}

`:S.error===void 0&&(G=`No result returned.

`)),x){const ne=S.error?` Request failed: ${S.error.message} (${S.error.code}).`:"";H.log(`Received response '${x.method} - (${S.id})' in ${Date.now()-x.timerStart}ms.${ne}`,G)}else H.log(`Received response ${S.id} without active response promise.`,G)}else lr("receive-response",S)}o(Uh,"traceReceivedResponse");function lr(S,x){if(!H||Q===p.Off)return;const G={isLSPMessage:!0,type:S,message:x,timestamp:Date.now()};H.log(G)}o(lr,"logLSPMessage");function Ur(){if(It())throw new w(A.Closed,"Connection is closed.");if(Dt())throw new w(A.Disposed,"Connection is disposed.")}o(Ur,"throwIfClosedOrDisposed");function qh(){if(it())throw new w(A.AlreadyListening,"Connection is already listening")}o(qh,"throwIfListening");function Gh(){if(!it())throw new Error("Call listen() first.")}o(Gh,"throwIfNotListening");function qr(S){return S===void 0?null:S}o(qr,"undefinedToNull");function bu(S){if(S!==null)return S}o(bu,"nullToUndefined");function ku(S){return S!=null&&!Array.isArray(S)&&typeof S=="object"}o(ku,"isNamedParam");function Sc(S,x){switch(S){case r.ParameterStructures.auto:return ku(x)?bu(x):[qr(x)];case r.ParameterStructures.byName:if(!ku(x))throw new Error("Received parameters by name but param is not an object literal.");return bu(x);case r.ParameterStructures.byPosition:return[qr(x)];default:throw new Error(`Unknown parameter structure ${S.toString()}`)}}o(Sc,"computeSingleParam");function Su(S,x){let G;const ne=S.numberOfParams;switch(ne){case 0:G=void 0;break;case 1:G=Sc(S.parameterStructures,x[0]);break;default:G=[];for(let Oe=0;Oe<x.length&&Oe<ne;Oe++)G.push(qr(x[Oe]));if(x.length<ne)for(let Oe=x.length;Oe<ne;Oe++)G.push(null);break}return G}o(Su,"computeMessageParams");const Gr={sendNotification:(S,...x)=>{Ur();let G,ne;if(n.string(S)){G=S;const Le=x[0];let Ie=0,st=r.ParameterStructures.auto;r.ParameterStructures.is(Le)&&(Ie=1,st=Le);let ye=x.length;const Fe=ye-Ie;switch(Fe){case 0:ne=void 0;break;case 1:ne=Sc(st,x[Ie]);break;default:if(st===r.ParameterStructures.byName)throw new Error(`Received ${Fe} parameters for 'by Name' notification parameter structure.`);ne=x.slice(Ie,ye).map(be=>qr(be));break}}else{const Le=x;G=S.method,ne=Su(S,Le)}const Oe={jsonrpc:g,method:G,params:ne};return X(Oe),W.write(Oe).catch(()=>Y.error("Sending notification failed."))},onNotification:(S,x)=>{Ur();let G;return n.func(S)?T=S:x&&(n.string(S)?(G=S,m.set(S,{type:void 0,handler:x})):(G=S.method,m.set(S.method,{type:S,handler:x}))),{dispose:()=>{G!==void 0?m.delete(G):T=void 0}}},onProgress:(S,x,G)=>{if(C.has(x))throw new Error(`Progress handler for token ${x} already registered`);return C.set(x,G),{dispose:()=>{C.delete(x)}}},sendProgress:(S,x,G)=>Gr.sendNotification(u.type,{token:x,value:G}),onUnhandledProgress:bt.event,sendRequest:(S,...x)=>{Ur(),Gh();let G,ne,Oe;if(n.string(S)){G=S;const ye=x[0],Fe=x[x.length-1];let be=0,Je=r.ParameterStructures.auto;r.ParameterStructures.is(ye)&&(be=1,Je=ye);let kt=x.length;a.CancellationToken.is(Fe)&&(kt=kt-1,Oe=Fe);const ur=kt-be;switch(ur){case 0:ne=void 0;break;case 1:ne=Sc(Je,x[be]);break;default:if(Je===r.ParameterStructures.byName)throw new Error(`Received ${ur} parameters for 'by Name' request parameter structure.`);ne=x.slice(be,kt).map(qn=>qr(qn));break}}else{const ye=x;G=S.method,ne=Su(S,ye);const Fe=S.numberOfParams;Oe=a.CancellationToken.is(ye[Fe])?ye[Fe]:void 0}const Le=V++;let Ie;return Oe&&(Ie=Oe.onCancellationRequested(()=>{const ye=K.sender.sendCancellation(Gr,Le);return ye===void 0?(Y.log(`Received no promise from cancellation strategy when cancelling id ${Le}`),Promise.resolve()):ye.catch(()=>{Y.log(`Sending cancellation messages for id ${Le} failed`)})})),new Promise((ye,Fe)=>{const be={jsonrpc:g,id:Le,method:G,params:ne},Je=o(qn=>{ye(qn),K.sender.cleanup(Le),Ie==null||Ie.dispose()},"resolveWithCleanup"),kt=o(qn=>{Fe(qn),K.sender.cleanup(Le),Ie==null||Ie.dispose()},"rejectWithCleanup");let ur={method:G,timerStart:Date.now(),resolve:Je,reject:kt};F(be);try{W.write(be).catch(()=>Y.error("Sending request failed."))}catch(qn){ur.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,qn.message?qn.message:"Unknown reason")),ur=null}ur&&ee.set(Le,ur)})},onRequest:(S,x)=>{Ur();let G=null;return f.is(S)?(G=void 0,y=S):n.string(S)?(G=null,x!==void 0&&(G=S,b.set(S,{handler:x,type:void 0}))):x!==void 0&&(G=S.method,b.set(S.method,{type:S,handler:x})),{dispose:()=>{G!==null&&(G!==void 0?b.delete(G):y=void 0)}}},hasPendingResponse:()=>ee.size>0,trace:async(S,x,G)=>{let ne=!1,Oe=h.Text;G!==void 0&&(n.boolean(G)?ne=G:(ne=G.sendNotification||!1,Oe=G.traceFormat||h.Text)),Q=S,he=Oe,Q===p.Off?H=void 0:H=x,ne&&!It()&&!Dt()&&await Gr.sendNotification(R.type,{value:p.toString(S)})},onError:Ae.event,onClose:He.event,onUnhandledNotification:at.event,onDispose:we.event,end:()=>{W.end()},dispose:()=>{if(Dt())return;pe=ie.Disposed,we.fire(void 0);const S=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const x of ee.values())x.reject(S);ee=new Map,fe=new Map,te=new Set,B=new i.LinkedMap,n.func(W.dispose)&&W.dispose(),n.func(L.dispose)&&L.dispose()},listen:()=>{Ur(),qh(),pe=ie.Listening,L.listen(kc)},inspect:()=>{(0,e.default)().console.log("inspect")}};return Gr.onNotification(k.type,S=>{if(Q===p.Off||!H)return;const x=Q===p.Verbose||Q===p.Compact;H.log(S.message,x?S.verbose:void 0)}),Gr.onNotification(u.type,S=>{const x=C.get(S.token);x?x(S.value):bt.fire(S)}),Gr}o(de,"createMessageConnection"),t.createMessageConnection=de}}),Wh=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/common/api.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;var e=Qm();Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});var n=Zm();Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return n.Touch}});var r=Jm();Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});var i=fi();Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return i.Emitter}});var s=eg();Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});var a=SA();Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});var c=wA();Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});var l=CA();Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return l.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return l.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return l.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return l.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return l.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return l.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return l.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return l.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return l.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return l.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return l.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return l.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return l.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return l.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return l.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return l.CancellationStrategy}});var u=Qn();t.RAL=u.default}}),Zn=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/lib/browser/main.js"(t){var l,u;var e=t&&t.__createBinding||(Object.create?function(d,f,p,h){h===void 0&&(h=p);var R=Object.getOwnPropertyDescriptor(f,p);(!R||("get"in R?!f.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(d,h,R)}:function(d,f,p,h){h===void 0&&(h=p),d[h]=f[p]}),n=t&&t.__exportStar||function(d,f){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(f,p)&&e(f,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0;var r=kA();r.default.install();var i=Wh();n(Wh(),t);var s=(l=class extends i.AbstractMessageReader{constructor(f){super(),this._onData=new i.Emitter,this._messageListener=p=>{this._onData.fire(p.data)},f.addEventListener("error",p=>this.fireError(p)),f.onmessage=this._messageListener}listen(f){return this._onData.event(f)}},o(l,"BrowserMessageReader"),l);t.BrowserMessageReader=s;var a=(u=class extends i.AbstractMessageWriter{constructor(f){super(),this.context=f,this.errorCount=0,f.addEventListener("error",p=>this.fireError(p))}write(f){try{return this.context.postMessage(f),Promise.resolve()}catch(p){return this.handleError(p,f),Promise.reject(p)}}handleError(f,p){this.errorCount++,this.fireError(f,p,this.errorCount)}end(){}},o(u,"BrowserMessageWriter"),u);t.BrowserMessageWriter=a;function c(d,f,p,h){return p===void 0&&(p=i.NullLogger),i.ConnectionStrategy.is(h)&&(h={connectionStrategy:h}),(0,i.createMessageConnection)(d,f,p,h)}o(c,"createMessageConnection"),t.createMessageConnection=c}}),Hh=Z({"../../node_modules/.pnpm/vscode-jsonrpc@8.0.2/node_modules/vscode-jsonrpc/browser.js"(t,e){e.exports=Zn()}}),jd=Z({"../../node_modules/.pnpm/vscode-languageserver-types@3.17.2/node_modules/vscode-languageserver-types/lib/umd/main.js"(t,e){(function(n){if(typeof e=="object"&&typeof e.exports=="object"){var r=n(TA,t);r!==void 0&&(e.exports=r)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextDocument=r.EOL=r.WorkspaceFolder=r.InlayHint=r.InlayHintLabelPart=r.InlayHintKind=r.InlineValueContext=r.InlineValueEvaluatableExpression=r.InlineValueVariableLookup=r.InlineValueText=r.SemanticTokens=r.SemanticTokenModifiers=r.SemanticTokenTypes=r.SelectionRange=r.DocumentLink=r.FormattingOptions=r.CodeLens=r.CodeAction=r.CodeActionContext=r.CodeActionTriggerKind=r.CodeActionKind=r.DocumentSymbol=r.WorkspaceSymbol=r.SymbolInformation=r.SymbolTag=r.SymbolKind=r.DocumentHighlight=r.DocumentHighlightKind=r.SignatureInformation=r.ParameterInformation=r.Hover=r.MarkedString=r.CompletionList=r.CompletionItem=r.CompletionItemLabelDetails=r.InsertTextMode=r.InsertReplaceEdit=r.CompletionItemTag=r.InsertTextFormat=r.CompletionItemKind=r.MarkupContent=r.MarkupKind=r.TextDocumentItem=r.OptionalVersionedTextDocumentIdentifier=r.VersionedTextDocumentIdentifier=r.TextDocumentIdentifier=r.WorkspaceChange=r.WorkspaceEdit=r.DeleteFile=r.RenameFile=r.CreateFile=r.TextDocumentEdit=r.AnnotatedTextEdit=r.ChangeAnnotationIdentifier=r.ChangeAnnotation=r.TextEdit=r.Command=r.Diagnostic=r.CodeDescription=r.DiagnosticTag=r.DiagnosticSeverity=r.DiagnosticRelatedInformation=r.FoldingRange=r.FoldingRangeKind=r.ColorPresentation=r.ColorInformation=r.Color=r.LocationLink=r.Location=r.Range=r.Position=r.uinteger=r.integer=r.URI=r.DocumentUri=void 0,function(g){function y(b){return typeof b=="string"}o(y,"is"),g.is=y}(r.DocumentUri||(r.DocumentUri={}));var i;(function(g){function y(b){return typeof b=="string"}o(y,"is"),g.is=y})(i=r.URI||(r.URI={})),function(g){g.MIN_VALUE=-2147483648,g.MAX_VALUE=2147483647;function y(b){return typeof b=="number"&&g.MIN_VALUE<=b&&b<=g.MAX_VALUE}o(y,"is"),g.is=y}(r.integer||(r.integer={}));var s;(function(g){g.MIN_VALUE=0,g.MAX_VALUE=2147483647;function y(b){return typeof b=="number"&&g.MIN_VALUE<=b&&b<=g.MAX_VALUE}o(y,"is"),g.is=y})(s=r.uinteger||(r.uinteger={}));var a;(function(g){function y(T,m){return T===Number.MAX_VALUE&&(T=s.MAX_VALUE),m===Number.MAX_VALUE&&(m=s.MAX_VALUE),{line:T,character:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&_.uinteger(m.line)&&_.uinteger(m.character)}o(b,"is"),g.is=b})(a=r.Position||(r.Position={}));var c;(function(g){function y(T,m,C,D){if(_.uinteger(T)&&_.uinteger(m)&&_.uinteger(C)&&_.uinteger(D))return{start:a.create(T,m),end:a.create(C,D)};if(a.is(T)&&a.is(m))return{start:T,end:m};throw new Error("Range#create called with invalid arguments[".concat(T,", ").concat(m,", ").concat(C,", ").concat(D,"]"))}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&a.is(m.start)&&a.is(m.end)}o(b,"is"),g.is=b})(c=r.Range||(r.Range={}));var l;(function(g){function y(T,m){return{uri:T,range:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&c.is(m.range)&&(_.string(m.uri)||_.undefined(m.uri))}o(b,"is"),g.is=b})(l=r.Location||(r.Location={})),function(g){function y(T,m,C,D){return{targetUri:T,targetRange:m,targetSelectionRange:C,originSelectionRange:D}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&c.is(m.targetRange)&&_.string(m.targetUri)&&c.is(m.targetSelectionRange)&&(c.is(m.originSelectionRange)||_.undefined(m.originSelectionRange))}o(b,"is"),g.is=b}(r.LocationLink||(r.LocationLink={}));var u;(function(g){function y(T,m,C,D){return{red:T,green:m,blue:C,alpha:D}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&_.numberRange(m.red,0,1)&&_.numberRange(m.green,0,1)&&_.numberRange(m.blue,0,1)&&_.numberRange(m.alpha,0,1)}o(b,"is"),g.is=b})(u=r.Color||(r.Color={})),function(g){function y(T,m){return{range:T,color:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&c.is(m.range)&&u.is(m.color)}o(b,"is"),g.is=b}(r.ColorInformation||(r.ColorInformation={})),function(g){function y(T,m,C){return{label:T,textEdit:m,additionalTextEdits:C}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&_.string(m.label)&&(_.undefined(m.textEdit)||h.is(m))&&(_.undefined(m.additionalTextEdits)||_.typedArray(m.additionalTextEdits,h.is))}o(b,"is"),g.is=b}(r.ColorPresentation||(r.ColorPresentation={})),function(g){g.Comment="comment",g.Imports="imports",g.Region="region"}(r.FoldingRangeKind||(r.FoldingRangeKind={})),function(g){function y(T,m,C,D,B,ee){var te={startLine:T,endLine:m};return _.defined(C)&&(te.startCharacter=C),_.defined(D)&&(te.endCharacter=D),_.defined(B)&&(te.kind=B),_.defined(ee)&&(te.collapsedText=ee),te}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&_.uinteger(m.startLine)&&_.uinteger(m.startLine)&&(_.undefined(m.startCharacter)||_.uinteger(m.startCharacter))&&(_.undefined(m.endCharacter)||_.uinteger(m.endCharacter))&&(_.undefined(m.kind)||_.string(m.kind))}o(b,"is"),g.is=b}(r.FoldingRange||(r.FoldingRange={}));var d;(function(g){function y(T,m){return{location:T,message:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&l.is(m.location)&&_.string(m.message)}o(b,"is"),g.is=b})(d=r.DiagnosticRelatedInformation||(r.DiagnosticRelatedInformation={})),function(g){g.Error=1,g.Warning=2,g.Information=3,g.Hint=4}(r.DiagnosticSeverity||(r.DiagnosticSeverity={})),function(g){g.Unnecessary=1,g.Deprecated=2}(r.DiagnosticTag||(r.DiagnosticTag={})),function(g){function y(b){var T=b;return _.objectLiteral(T)&&_.string(T.href)}o(y,"is"),g.is=y}(r.CodeDescription||(r.CodeDescription={}));var f;(function(g){function y(T,m,C,D,B,ee){var te={range:T,message:m};return _.defined(C)&&(te.severity=C),_.defined(D)&&(te.code=D),_.defined(B)&&(te.source=B),_.defined(ee)&&(te.relatedInformation=ee),te}o(y,"create"),g.create=y;function b(T){var m,C=T;return _.defined(C)&&c.is(C.range)&&_.string(C.message)&&(_.number(C.severity)||_.undefined(C.severity))&&(_.integer(C.code)||_.string(C.code)||_.undefined(C.code))&&(_.undefined(C.codeDescription)||_.string((m=C.codeDescription)===null||m===void 0?void 0:m.href))&&(_.string(C.source)||_.undefined(C.source))&&(_.undefined(C.relatedInformation)||_.typedArray(C.relatedInformation,d.is))}o(b,"is"),g.is=b})(f=r.Diagnostic||(r.Diagnostic={}));var p;(function(g){function y(T,m){for(var C=[],D=2;D<arguments.length;D++)C[D-2]=arguments[D];var B={title:T,command:m};return _.defined(C)&&C.length>0&&(B.arguments=C),B}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.string(m.title)&&_.string(m.command)}o(b,"is"),g.is=b})(p=r.Command||(r.Command={}));var h;(function(g){function y(C,D){return{range:C,newText:D}}o(y,"replace"),g.replace=y;function b(C,D){return{range:{start:C,end:C},newText:D}}o(b,"insert"),g.insert=b;function T(C){return{range:C,newText:""}}o(T,"del"),g.del=T;function m(C){var D=C;return _.objectLiteral(D)&&_.string(D.newText)&&c.is(D.range)}o(m,"is"),g.is=m})(h=r.TextEdit||(r.TextEdit={}));var R;(function(g){function y(T,m,C){var D={label:T};return m!==void 0&&(D.needsConfirmation=m),C!==void 0&&(D.description=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&_.string(m.label)&&(_.boolean(m.needsConfirmation)||m.needsConfirmation===void 0)&&(_.string(m.description)||m.description===void 0)}o(b,"is"),g.is=b})(R=r.ChangeAnnotation||(r.ChangeAnnotation={}));var k;(function(g){function y(b){var T=b;return _.string(T)}o(y,"is"),g.is=y})(k=r.ChangeAnnotationIdentifier||(r.ChangeAnnotationIdentifier={}));var A;(function(g){function y(C,D,B){return{range:C,newText:D,annotationId:B}}o(y,"replace"),g.replace=y;function b(C,D,B){return{range:{start:C,end:C},newText:D,annotationId:B}}o(b,"insert"),g.insert=b;function T(C,D){return{range:C,newText:"",annotationId:D}}o(T,"del"),g.del=T;function m(C){var D=C;return h.is(D)&&(R.is(D.annotationId)||k.is(D.annotationId))}o(m,"is"),g.is=m})(A=r.AnnotatedTextEdit||(r.AnnotatedTextEdit={}));var w;(function(g){function y(T,m){return{textDocument:T,edits:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&ue.is(m.textDocument)&&Array.isArray(m.edits)}o(b,"is"),g.is=b})(w=r.TextDocumentEdit||(r.TextDocumentEdit={}));var E;(function(g){function y(T,m,C){var D={kind:"create",uri:T};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(D.options=m),C!==void 0&&(D.annotationId=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return m&&m.kind==="create"&&_.string(m.uri)&&(m.options===void 0||(m.options.overwrite===void 0||_.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||_.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||k.is(m.annotationId))}o(b,"is"),g.is=b})(E=r.CreateFile||(r.CreateFile={}));var P;(function(g){function y(T,m,C,D){var B={kind:"rename",oldUri:T,newUri:m};return C!==void 0&&(C.overwrite!==void 0||C.ignoreIfExists!==void 0)&&(B.options=C),D!==void 0&&(B.annotationId=D),B}o(y,"create"),g.create=y;function b(T){var m=T;return m&&m.kind==="rename"&&_.string(m.oldUri)&&_.string(m.newUri)&&(m.options===void 0||(m.options.overwrite===void 0||_.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||_.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||k.is(m.annotationId))}o(b,"is"),g.is=b})(P=r.RenameFile||(r.RenameFile={}));var j;(function(g){function y(T,m,C){var D={kind:"delete",uri:T};return m!==void 0&&(m.recursive!==void 0||m.ignoreIfNotExists!==void 0)&&(D.options=m),C!==void 0&&(D.annotationId=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return m&&m.kind==="delete"&&_.string(m.uri)&&(m.options===void 0||(m.options.recursive===void 0||_.boolean(m.options.recursive))&&(m.options.ignoreIfNotExists===void 0||_.boolean(m.options.ignoreIfNotExists)))&&(m.annotationId===void 0||k.is(m.annotationId))}o(b,"is"),g.is=b})(j=r.DeleteFile||(r.DeleteFile={}));var z;(function(g){function y(b){var T=b;return T&&(T.changes!==void 0||T.documentChanges!==void 0)&&(T.documentChanges===void 0||T.documentChanges.every(function(m){return _.string(m.kind)?E.is(m)||P.is(m)||j.is(m):w.is(m)}))}o(y,"is"),g.is=y})(z=r.WorkspaceEdit||(r.WorkspaceEdit={}));var ie=function(){function g(y,b){this.edits=y,this.changeAnnotations=b}return o(g,"TextEditChangeImpl"),g.prototype.insert=function(y,b,T){var m,C;if(T===void 0?m=h.insert(y,b):k.is(T)?(C=T,m=A.insert(y,b,T)):(this.assertChangeAnnotations(this.changeAnnotations),C=this.changeAnnotations.manage(T),m=A.insert(y,b,C)),this.edits.push(m),C!==void 0)return C},g.prototype.replace=function(y,b,T){var m,C;if(T===void 0?m=h.replace(y,b):k.is(T)?(C=T,m=A.replace(y,b,T)):(this.assertChangeAnnotations(this.changeAnnotations),C=this.changeAnnotations.manage(T),m=A.replace(y,b,C)),this.edits.push(m),C!==void 0)return C},g.prototype.delete=function(y,b){var T,m;if(b===void 0?T=h.del(y):k.is(b)?(m=b,T=A.del(y,b)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(b),T=A.del(y,m)),this.edits.push(T),m!==void 0)return m},g.prototype.add=function(y){this.edits.push(y)},g.prototype.all=function(){return this.edits},g.prototype.clear=function(){this.edits.splice(0,this.edits.length)},g.prototype.assertChangeAnnotations=function(y){if(y===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},g}(),de=function(){function g(y){this._annotations=y===void 0?Object.create(null):y,this._counter=0,this._size=0}return o(g,"ChangeAnnotations"),g.prototype.all=function(){return this._annotations},Object.defineProperty(g.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),g.prototype.manage=function(y,b){var T;if(k.is(y)?T=y:(T=this.nextId(),b=y),this._annotations[T]!==void 0)throw new Error("Id ".concat(T," is already in use."));if(b===void 0)throw new Error("No annotation provided for id ".concat(T));return this._annotations[T]=b,this._size++,T},g.prototype.nextId=function(){return this._counter++,this._counter.toString()},g}(),ve=function(){function g(y){var b=this;this._textEditChanges=Object.create(null),y!==void 0?(this._workspaceEdit=y,y.documentChanges?(this._changeAnnotations=new de(y.changeAnnotations),y.changeAnnotations=this._changeAnnotations.all(),y.documentChanges.forEach(function(T){if(w.is(T)){var m=new ie(T.edits,b._changeAnnotations);b._textEditChanges[T.textDocument.uri]=m}})):y.changes&&Object.keys(y.changes).forEach(function(T){var m=new ie(y.changes[T]);b._textEditChanges[T]=m})):this._workspaceEdit={}}return o(g,"WorkspaceChange"),Object.defineProperty(g.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),g.prototype.getTextEditChange=function(y){if(ue.is(y)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b={uri:y.uri,version:y.version},T=this._textEditChanges[b.uri];if(!T){var m=[],C={textDocument:b,edits:m};this._workspaceEdit.documentChanges.push(C),T=new ie(m,this._changeAnnotations),this._textEditChanges[b.uri]=T}return T}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var T=this._textEditChanges[y];if(!T){var m=[];this._workspaceEdit.changes[y]=m,T=new ie(m),this._textEditChanges[y]=T}return T}},g.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new de,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},g.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},g.prototype.createFile=function(y,b,T){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;R.is(b)||k.is(b)?m=b:T=b;var C,D;if(m===void 0?C=E.create(y,T):(D=k.is(m)?m:this._changeAnnotations.manage(m),C=E.create(y,T,D)),this._workspaceEdit.documentChanges.push(C),D!==void 0)return D},g.prototype.renameFile=function(y,b,T,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var C;R.is(T)||k.is(T)?C=T:m=T;var D,B;if(C===void 0?D=P.create(y,b,m):(B=k.is(C)?C:this._changeAnnotations.manage(C),D=P.create(y,b,m,B)),this._workspaceEdit.documentChanges.push(D),B!==void 0)return B},g.prototype.deleteFile=function(y,b,T){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;R.is(b)||k.is(b)?m=b:T=b;var C,D;if(m===void 0?C=j.create(y,T):(D=k.is(m)?m:this._changeAnnotations.manage(m),C=j.create(y,T,D)),this._workspaceEdit.documentChanges.push(C),D!==void 0)return D},g}();r.WorkspaceChange=ve,function(g){function y(T){return{uri:T}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.string(m.uri)}o(b,"is"),g.is=b}(r.TextDocumentIdentifier||(r.TextDocumentIdentifier={})),function(g){function y(T,m){return{uri:T,version:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.string(m.uri)&&_.integer(m.version)}o(b,"is"),g.is=b}(r.VersionedTextDocumentIdentifier||(r.VersionedTextDocumentIdentifier={}));var ue;(function(g){function y(T,m){return{uri:T,version:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.string(m.uri)&&(m.version===null||_.integer(m.version))}o(b,"is"),g.is=b})(ue=r.OptionalVersionedTextDocumentIdentifier||(r.OptionalVersionedTextDocumentIdentifier={})),function(g){function y(T,m,C,D){return{uri:T,languageId:m,version:C,text:D}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.string(m.uri)&&_.string(m.languageId)&&_.integer(m.version)&&_.string(m.text)}o(b,"is"),g.is=b}(r.TextDocumentItem||(r.TextDocumentItem={}));var L;(function(g){g.PlainText="plaintext",g.Markdown="markdown";function y(b){var T=b;return T===g.PlainText||T===g.Markdown}o(y,"is"),g.is=y})(L=r.MarkupKind||(r.MarkupKind={}));var W;(function(g){function y(b){var T=b;return _.objectLiteral(b)&&L.is(T.kind)&&_.string(T.value)}o(y,"is"),g.is=y})(W=r.MarkupContent||(r.MarkupContent={})),function(g){g.Text=1,g.Method=2,g.Function=3,g.Constructor=4,g.Field=5,g.Variable=6,g.Class=7,g.Interface=8,g.Module=9,g.Property=10,g.Unit=11,g.Value=12,g.Enum=13,g.Keyword=14,g.Snippet=15,g.Color=16,g.File=17,g.Reference=18,g.Folder=19,g.EnumMember=20,g.Constant=21,g.Struct=22,g.Event=23,g.Operator=24,g.TypeParameter=25}(r.CompletionItemKind||(r.CompletionItemKind={})),function(g){g.PlainText=1,g.Snippet=2}(r.InsertTextFormat||(r.InsertTextFormat={})),function(g){g.Deprecated=1}(r.CompletionItemTag||(r.CompletionItemTag={})),function(g){function y(T,m,C){return{newText:T,insert:m,replace:C}}o(y,"create"),g.create=y;function b(T){var m=T;return m&&_.string(m.newText)&&c.is(m.insert)&&c.is(m.replace)}o(b,"is"),g.is=b}(r.InsertReplaceEdit||(r.InsertReplaceEdit={})),function(g){g.asIs=1,g.adjustIndentation=2}(r.InsertTextMode||(r.InsertTextMode={})),function(g){function y(b){var T=b;return T&&(_.string(T.detail)||T.detail===void 0)&&(_.string(T.description)||T.description===void 0)}o(y,"is"),g.is=y}(r.CompletionItemLabelDetails||(r.CompletionItemLabelDetails={})),function(g){function y(b){return{label:b}}o(y,"create"),g.create=y}(r.CompletionItem||(r.CompletionItem={})),function(g){function y(b,T){return{items:b||[],isIncomplete:!!T}}o(y,"create"),g.create=y}(r.CompletionList||(r.CompletionList={}));var v;(function(g){function y(T){return T.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(y,"fromPlainText"),g.fromPlainText=y;function b(T){var m=T;return _.string(m)||_.objectLiteral(m)&&_.string(m.language)&&_.string(m.value)}o(b,"is"),g.is=b})(v=r.MarkedString||(r.MarkedString={})),function(g){function y(b){var T=b;return!!T&&_.objectLiteral(T)&&(W.is(T.contents)||v.is(T.contents)||_.typedArray(T.contents,v.is))&&(b.range===void 0||c.is(b.range))}o(y,"is"),g.is=y}(r.Hover||(r.Hover={})),function(g){function y(b,T){return T?{label:b,documentation:T}:{label:b}}o(y,"create"),g.create=y}(r.ParameterInformation||(r.ParameterInformation={})),function(g){function y(b,T){for(var m=[],C=2;C<arguments.length;C++)m[C-2]=arguments[C];var D={label:b};return _.defined(T)&&(D.documentation=T),_.defined(m)?D.parameters=m:D.parameters=[],D}o(y,"create"),g.create=y}(r.SignatureInformation||(r.SignatureInformation={})),function(g){g.Text=1,g.Read=2,g.Write=3}(r.DocumentHighlightKind||(r.DocumentHighlightKind={})),function(g){function y(b,T){var m={range:b};return _.number(T)&&(m.kind=T),m}o(y,"create"),g.create=y}(r.DocumentHighlight||(r.DocumentHighlight={})),function(g){g.File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26}(r.SymbolKind||(r.SymbolKind={})),function(g){g.Deprecated=1}(r.SymbolTag||(r.SymbolTag={})),function(g){function y(b,T,m,C,D){var B={name:b,kind:T,location:{uri:C,range:m}};return D&&(B.containerName=D),B}o(y,"create"),g.create=y}(r.SymbolInformation||(r.SymbolInformation={})),function(g){function y(b,T,m,C){return C!==void 0?{name:b,kind:T,location:{uri:m,range:C}}:{name:b,kind:T,location:{uri:m}}}o(y,"create"),g.create=y}(r.WorkspaceSymbol||(r.WorkspaceSymbol={})),function(g){function y(T,m,C,D,B,ee){var te={name:T,detail:m,kind:C,range:D,selectionRange:B};return ee!==void 0&&(te.children=ee),te}o(y,"create"),g.create=y;function b(T){var m=T;return m&&_.string(m.name)&&_.number(m.kind)&&c.is(m.range)&&c.is(m.selectionRange)&&(m.detail===void 0||_.string(m.detail))&&(m.deprecated===void 0||_.boolean(m.deprecated))&&(m.children===void 0||Array.isArray(m.children))&&(m.tags===void 0||Array.isArray(m.tags))}o(b,"is"),g.is=b}(r.DocumentSymbol||(r.DocumentSymbol={})),function(g){g.Empty="",g.QuickFix="quickfix",g.Refactor="refactor",g.RefactorExtract="refactor.extract",g.RefactorInline="refactor.inline",g.RefactorRewrite="refactor.rewrite",g.Source="source",g.SourceOrganizeImports="source.organizeImports",g.SourceFixAll="source.fixAll"}(r.CodeActionKind||(r.CodeActionKind={}));var q;(function(g){g.Invoked=1,g.Automatic=2})(q=r.CodeActionTriggerKind||(r.CodeActionTriggerKind={})),function(g){function y(T,m,C){var D={diagnostics:T};return m!=null&&(D.only=m),C!=null&&(D.triggerKind=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.typedArray(m.diagnostics,f.is)&&(m.only===void 0||_.typedArray(m.only,_.string))&&(m.triggerKind===void 0||m.triggerKind===q.Invoked||m.triggerKind===q.Automatic)}o(b,"is"),g.is=b}(r.CodeActionContext||(r.CodeActionContext={})),function(g){function y(T,m,C){var D={title:T},B=!0;return typeof m=="string"?(B=!1,D.kind=m):p.is(m)?D.command=m:D.edit=m,B&&C!==void 0&&(D.kind=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return m&&_.string(m.title)&&(m.diagnostics===void 0||_.typedArray(m.diagnostics,f.is))&&(m.kind===void 0||_.string(m.kind))&&(m.edit!==void 0||m.command!==void 0)&&(m.command===void 0||p.is(m.command))&&(m.isPreferred===void 0||_.boolean(m.isPreferred))&&(m.edit===void 0||z.is(m.edit))}o(b,"is"),g.is=b}(r.CodeAction||(r.CodeAction={})),function(g){function y(T,m){var C={range:T};return _.defined(m)&&(C.data=m),C}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&c.is(m.range)&&(_.undefined(m.command)||p.is(m.command))}o(b,"is"),g.is=b}(r.CodeLens||(r.CodeLens={})),function(g){function y(T,m){return{tabSize:T,insertSpaces:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&_.uinteger(m.tabSize)&&_.boolean(m.insertSpaces)}o(b,"is"),g.is=b}(r.FormattingOptions||(r.FormattingOptions={})),function(g){function y(T,m,C){return{range:T,target:m,data:C}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&c.is(m.range)&&(_.undefined(m.target)||_.string(m.target))}o(b,"is"),g.is=b}(r.DocumentLink||(r.DocumentLink={})),function(g){function y(T,m){return{range:T,parent:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&c.is(m.range)&&(m.parent===void 0||g.is(m.parent))}o(b,"is"),g.is=b}(r.SelectionRange||(r.SelectionRange={})),function(g){g.namespace="namespace",g.type="type",g.class="class",g.enum="enum",g.interface="interface",g.struct="struct",g.typeParameter="typeParameter",g.parameter="parameter",g.variable="variable",g.property="property",g.enumMember="enumMember",g.event="event",g.function="function",g.method="method",g.macro="macro",g.keyword="keyword",g.modifier="modifier",g.comment="comment",g.string="string",g.number="number",g.regexp="regexp",g.operator="operator",g.decorator="decorator"}(r.SemanticTokenTypes||(r.SemanticTokenTypes={})),function(g){g.declaration="declaration",g.definition="definition",g.readonly="readonly",g.static="static",g.deprecated="deprecated",g.abstract="abstract",g.async="async",g.modification="modification",g.documentation="documentation",g.defaultLibrary="defaultLibrary"}(r.SemanticTokenModifiers||(r.SemanticTokenModifiers={})),function(g){function y(b){var T=b;return _.objectLiteral(T)&&(T.resultId===void 0||typeof T.resultId=="string")&&Array.isArray(T.data)&&(T.data.length===0||typeof T.data[0]=="number")}o(y,"is"),g.is=y}(r.SemanticTokens||(r.SemanticTokens={})),function(g){function y(T,m){return{range:T,text:m}}o(y,"create"),g.create=y;function b(T){var m=T;return m!=null&&c.is(m.range)&&_.string(m.text)}o(b,"is"),g.is=b}(r.InlineValueText||(r.InlineValueText={})),function(g){function y(T,m,C){return{range:T,variableName:m,caseSensitiveLookup:C}}o(y,"create"),g.create=y;function b(T){var m=T;return m!=null&&c.is(m.range)&&_.boolean(m.caseSensitiveLookup)&&(_.string(m.variableName)||m.variableName===void 0)}o(b,"is"),g.is=b}(r.InlineValueVariableLookup||(r.InlineValueVariableLookup={})),function(g){function y(T,m){return{range:T,expression:m}}o(y,"create"),g.create=y;function b(T){var m=T;return m!=null&&c.is(m.range)&&(_.string(m.expression)||m.expression===void 0)}o(b,"is"),g.is=b}(r.InlineValueEvaluatableExpression||(r.InlineValueEvaluatableExpression={})),function(g){function y(T,m){return{frameId:T,stoppedLocation:m}}o(y,"create"),g.create=y;function b(T){var m=T;return _.defined(m)&&c.is(T.stoppedLocation)}o(b,"is"),g.is=b}(r.InlineValueContext||(r.InlineValueContext={}));var Y;(function(g){g.Type=1,g.Parameter=2;function y(b){return b===1||b===2}o(y,"is"),g.is=y})(Y=r.InlayHintKind||(r.InlayHintKind={}));var V;(function(g){function y(T){return{value:T}}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&(m.tooltip===void 0||_.string(m.tooltip)||W.is(m.tooltip))&&(m.location===void 0||l.is(m.location))&&(m.command===void 0||p.is(m.command))}o(b,"is"),g.is=b})(V=r.InlayHintLabelPart||(r.InlayHintLabelPart={})),function(g){function y(T,m,C){var D={position:T,label:m};return C!==void 0&&(D.kind=C),D}o(y,"create"),g.create=y;function b(T){var m=T;return _.objectLiteral(m)&&a.is(m.position)&&(_.string(m.label)||_.typedArray(m.label,V.is))&&(m.kind===void 0||Y.is(m.kind))&&m.textEdits===void 0||_.typedArray(m.textEdits,h.is)&&(m.tooltip===void 0||_.string(m.tooltip)||W.is(m.tooltip))&&(m.paddingLeft===void 0||_.boolean(m.paddingLeft))&&(m.paddingRight===void 0||_.boolean(m.paddingRight))}o(b,"is"),g.is=b}(r.InlayHint||(r.InlayHint={})),function(g){function y(b){var T=b;return _.objectLiteral(T)&&i.is(T.uri)&&_.string(T.name)}o(y,"is"),g.is=y}(r.WorkspaceFolder||(r.WorkspaceFolder={})),r.EOL=[`
`,`\r
`,"\r"],function(g){function y(C,D,B,ee){return new O(C,D,B,ee)}o(y,"create"),g.create=y;function b(C){var D=C;return!!(_.defined(D)&&_.string(D.uri)&&(_.undefined(D.languageId)||_.string(D.languageId))&&_.uinteger(D.lineCount)&&_.func(D.getText)&&_.func(D.positionAt)&&_.func(D.offsetAt))}o(b,"is"),g.is=b;function T(C,D){for(var B=C.getText(),ee=m(D,function(pe,Ae){var He=pe.range.start.line-Ae.range.start.line;return He===0?pe.range.start.character-Ae.range.start.character:He}),te=B.length,fe=ee.length-1;fe>=0;fe--){var Q=ee[fe],he=C.offsetAt(Q.range.start),H=C.offsetAt(Q.range.end);if(H<=te)B=B.substring(0,he)+Q.newText+B.substring(H,B.length);else throw new Error("Overlapping edit");te=he}return B}o(T,"applyEdits"),g.applyEdits=T;function m(C,D){if(C.length<=1)return C;var B=C.length/2|0,ee=C.slice(0,B),te=C.slice(B);m(ee,D),m(te,D);for(var fe=0,Q=0,he=0;fe<ee.length&&Q<te.length;){var H=D(ee[fe],te[Q]);H<=0?C[he++]=ee[fe++]:C[he++]=te[Q++]}for(;fe<ee.length;)C[he++]=ee[fe++];for(;Q<te.length;)C[he++]=te[Q++];return C}o(m,"mergeSort")}(r.TextDocument||(r.TextDocument={}));var O=function(){function g(y,b,T,m){this._uri=y,this._languageId=b,this._version=T,this._content=m,this._lineOffsets=void 0}return o(g,"FullTextDocument"),Object.defineProperty(g.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),g.prototype.getText=function(y){if(y){var b=this.offsetAt(y.start),T=this.offsetAt(y.end);return this._content.substring(b,T)}return this._content},g.prototype.update=function(y,b){this._content=y.text,this._version=b,this._lineOffsets=void 0},g.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var y=[],b=this._content,T=!0,m=0;m<b.length;m++){T&&(y.push(m),T=!1);var C=b.charAt(m);T=C==="\r"||C===`
`,C==="\r"&&m+1<b.length&&b.charAt(m+1)===`
`&&m++}T&&b.length>0&&y.push(b.length),this._lineOffsets=y}return this._lineOffsets},g.prototype.positionAt=function(y){y=Math.max(Math.min(y,this._content.length),0);var b=this.getLineOffsets(),T=0,m=b.length;if(m===0)return a.create(0,y);for(;T<m;){var C=Math.floor((T+m)/2);b[C]>y?m=C:T=C+1}var D=T-1;return a.create(D,y-b[D])},g.prototype.offsetAt=function(y){var b=this.getLineOffsets();if(y.line>=b.length)return this._content.length;if(y.line<0)return 0;var T=b[y.line],m=y.line+1<b.length?b[y.line+1]:this._content.length;return Math.max(Math.min(T+y.character,m),T)},Object.defineProperty(g.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),g}(),_;(function(g){var y=Object.prototype.toString;function b(H){return typeof H<"u"}o(b,"defined"),g.defined=b;function T(H){return typeof H>"u"}o(T,"undefined"),g.undefined=T;function m(H){return H===!0||H===!1}o(m,"boolean"),g.boolean=m;function C(H){return y.call(H)==="[object String]"}o(C,"string"),g.string=C;function D(H){return y.call(H)==="[object Number]"}o(D,"number"),g.number=D;function B(H,pe,Ae){return y.call(H)==="[object Number]"&&pe<=H&&H<=Ae}o(B,"numberRange"),g.numberRange=B;function ee(H){return y.call(H)==="[object Number]"&&-2147483648<=H&&H<=2147483647}o(ee,"integer"),g.integer=ee;function te(H){return y.call(H)==="[object Number]"&&0<=H&&H<=2147483647}o(te,"uinteger"),g.uinteger=te;function fe(H){return y.call(H)==="[object Function]"}o(fe,"func"),g.func=fe;function Q(H){return H!==null&&typeof H=="object"}o(Q,"objectLiteral"),g.objectLiteral=Q;function he(H,pe){return Array.isArray(H)&&H.every(pe)}o(he,"typedArray"),g.typedArray=he})(_||(_={}))})}}),We=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/messages.js"(t){var c,l,u,d,f;Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;var e=Zn();(function(p){p.clientToServer="clientToServer",p.serverToClient="serverToClient",p.both="both"})(t.MessageDirection||(t.MessageDirection={}));var n=(c=class{constructor(h){this.method=h}},o(c,"RegistrationType"),c);t.RegistrationType=n;var r=(l=class extends e.RequestType0{constructor(h){super(h)}},o(l,"ProtocolRequestType0"),l);t.ProtocolRequestType0=r;var i=(u=class extends e.RequestType{constructor(h){super(h,e.ParameterStructures.byName)}},o(u,"ProtocolRequestType"),u);t.ProtocolRequestType=i;var s=(d=class extends e.NotificationType0{constructor(h){super(h)}},o(d,"ProtocolNotificationType0"),d);t.ProtocolNotificationType0=s;var a=(f=class extends e.NotificationType{constructor(h){super(h,e.ParameterStructures.byName)}},o(f,"ProtocolNotificationType"),f);t.ProtocolNotificationType=a}}),Ud=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/utils/is.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function e(d){return d===!0||d===!1}o(e,"boolean"),t.boolean=e;function n(d){return typeof d=="string"||d instanceof String}o(n,"string"),t.string=n;function r(d){return typeof d=="number"||d instanceof Number}o(r,"number"),t.number=r;function i(d){return d instanceof Error}o(i,"error"),t.error=i;function s(d){return typeof d=="function"}o(s,"func"),t.func=s;function a(d){return Array.isArray(d)}o(a,"array"),t.array=a;function c(d){return a(d)&&d.every(f=>n(f))}o(c,"stringArray"),t.stringArray=c;function l(d,f){return Array.isArray(d)&&d.every(f)}o(l,"typedArray"),t.typedArray=l;function u(d){return d!==null&&typeof d=="object"}o(u,"objectLiteral"),t.objectLiteral=u}}),EA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;var e=We();(function(n){n.method="textDocument/implementation",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.ImplementationRequest||(t.ImplementationRequest={}))}}),NA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;var e=We();(function(n){n.method="textDocument/typeDefinition",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))}}),PA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;var e=We();(function(n){n.method="workspace/workspaceFolders",n.messageDirection=e.MessageDirection.serverToClient,n.type=new e.ProtocolRequestType0(n.method)})(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolNotificationType(n.method)}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))}}),IA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;var e=We();(function(n){n.method="workspace/configuration",n.messageDirection=e.MessageDirection.serverToClient,n.type=new e.ProtocolRequestType(n.method)})(t.ConfigurationRequest||(t.ConfigurationRequest={}))}}),DA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;var e=We();(function(n){n.method="textDocument/documentColor",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(n){n.method="textDocument/colorPresentation",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))}}),OA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;var e=We();(function(n){n.method="textDocument/foldingRange",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))}}),LA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;var e=We();(function(n){n.method="textDocument/declaration",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.DeclarationRequest||(t.DeclarationRequest={}))}}),$A=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;var e=We();(function(n){n.method="textDocument/selectionRange",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))}}),MA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;var e=Zn(),n=We();(function(r){r.type=new e.ProgressType;function i(s){return s===r.type}o(i,"is"),r.is=i})(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(r){r.method="window/workDoneProgress/create",r.messageDirection=n.MessageDirection.serverToClient,r.type=new n.ProtocolRequestType(r.method)}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(r){r.method="window/workDoneProgress/cancel",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolNotificationType(r.method)}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))}}),FA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;var e=We();(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))}}),xA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;var e=We();(function(r){r.Relative="relative"})(t.TokenFormat||(t.TokenFormat={}));var n;(function(r){r.method="textDocument/semanticTokens",r.type=new e.RegistrationType(r.method)})(n=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})),function(r){r.method="textDocument/semanticTokens/full",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method),r.registrationMethod=n.method}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(r){r.method="textDocument/semanticTokens/full/delta",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method),r.registrationMethod=n.method}(t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})),function(r){r.method="textDocument/semanticTokens/range",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method),r.registrationMethod=n.method}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})),function(r){r.method="workspace/semanticTokens/refresh",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType0(r.method)}(t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={}))}}),jA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;var e=We();(function(n){n.method="window/showDocument",n.messageDirection=e.MessageDirection.serverToClient,n.type=new e.ProtocolRequestType(n.method)})(t.ShowDocumentRequest||(t.ShowDocumentRequest={}))}}),UA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;var e=We();(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={}))}}),qA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;var e=We();(function(n){n.file="file",n.folder="folder"})(t.FileOperationPatternKind||(t.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolNotificationType(n.method)}(t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolNotificationType(n.method)}(t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolNotificationType(n.method)}(t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={}))}}),GA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;var e=We();(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(t.UniquenessLevel||(t.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(t.MonikerKind||(t.MonikerKind={})),function(n){n.method="textDocument/moniker",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.MonikerRequest||(t.MonikerRequest={}))}}),WA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;var e=We();(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={}))}}),HA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;var e=We();(function(n){n.method="textDocument/inlineValue",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.InlineValueRequest||(t.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType0(n.method)}(t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={}))}}),BA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;var e=We();(function(n){n.method="textDocument/inlayHint",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t.InlayHintRequest||(t.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType0(n.method)}(t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={}))}}),KA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;var e=Zn(),n=Ud(),r=We();(function(i){function s(a){const c=a;return c&&n.boolean(c.retriggerRequest)}o(s,"is"),i.is=s})(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})),function(i){i.Full="full",i.Unchanged="unchanged"}(t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})),function(i){i.method="textDocument/diagnostic",i.messageDirection=r.MessageDirection.clientToServer,i.type=new r.ProtocolRequestType(i.method),i.partialResult=new e.ProgressType}(t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})),function(i){i.method="workspace/diagnostic",i.messageDirection=r.MessageDirection.clientToServer,i.type=new r.ProtocolRequestType(i.method),i.partialResult=new e.ProgressType}(t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})),function(i){i.method="workspace/diagnostic/refresh",i.messageDirection=r.MessageDirection.clientToServer,i.type=new r.ProtocolRequestType0(i.method)}(t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={}))}}),zA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;var e=jd(),n=Ud(),r=We(),i;(function(l){l.Markup=1,l.Code=2;function u(d){return d===1||d===2}o(u,"is"),l.is=u})(i=t.NotebookCellKind||(t.NotebookCellKind={}));var s;(function(l){function u(p,h){const R={executionOrder:p};return(h===!0||h===!1)&&(R.success=h),R}o(u,"create"),l.create=u;function d(p){const h=p;return n.objectLiteral(h)&&e.uinteger.is(h.executionOrder)&&(h.success===void 0||n.boolean(h.success))}o(d,"is"),l.is=d;function f(p,h){return p===h?!0:p==null||h===null||h===void 0?!1:p.executionOrder===h.executionOrder&&p.success===h.success}o(f,"equals"),l.equals=f})(s=t.ExecutionSummary||(t.ExecutionSummary={}));var a;(function(l){function u(h,R){return{kind:h,document:R}}o(u,"create"),l.create=u;function d(h){const R=h;return n.objectLiteral(R)&&i.is(R.kind)&&e.DocumentUri.is(R.document)&&(R.metadata===void 0||n.objectLiteral(R.metadata))}o(d,"is"),l.is=d;function f(h,R){const k=new Set;return h.document!==R.document&&k.add("document"),h.kind!==R.kind&&k.add("kind"),h.executionSummary!==R.executionSummary&&k.add("executionSummary"),(h.metadata!==void 0||R.metadata!==void 0)&&!p(h.metadata,R.metadata)&&k.add("metadata"),(h.executionSummary!==void 0||R.executionSummary!==void 0)&&!s.equals(h.executionSummary,R.executionSummary)&&k.add("executionSummary"),k}o(f,"diff"),l.diff=f;function p(h,R){if(h===R)return!0;if(h==null||R===null||R===void 0||typeof h!=typeof R||typeof h!="object")return!1;const k=Array.isArray(h),A=Array.isArray(R);if(k!==A)return!1;if(k&&A){if(h.length!==R.length)return!1;for(let w=0;w<h.length;w++)if(!p(h[w],R[w]))return!1}if(n.objectLiteral(h)&&n.objectLiteral(R)){const w=Object.keys(h),E=Object.keys(R);if(w.length!==E.length||(w.sort(),E.sort(),!p(w,E)))return!1;for(let P=0;P<w.length;P++){const j=w[P];if(!p(h[j],R[j]))return!1}}return!0}o(p,"equalsMetadata")})(a=t.NotebookCell||(t.NotebookCell={})),function(l){function u(f,p,h,R){return{uri:f,notebookType:p,version:h,cells:R}}o(u,"create"),l.create=u;function d(f){const p=f;return n.objectLiteral(p)&&n.string(p.uri)&&e.integer.is(p.version)&&n.typedArray(p.cells,a.is)}o(d,"is"),l.is=d}(t.NotebookDocument||(t.NotebookDocument={}));var c;(function(l){l.method="notebookDocument/sync",l.messageDirection=r.MessageDirection.clientToServer,l.type=new r.RegistrationType(l.method)})(c=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})),function(l){l.method="notebookDocument/didOpen",l.messageDirection=r.MessageDirection.clientToServer,l.type=new r.ProtocolNotificationType(l.method),l.registrationMethod=c.method}(t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})),function(l){function u(f){const p=f;return n.objectLiteral(p)&&e.uinteger.is(p.start)&&e.uinteger.is(p.deleteCount)&&(p.cells===void 0||n.typedArray(p.cells,a.is))}o(u,"is"),l.is=u;function d(f,p,h){const R={start:f,deleteCount:p};return h!==void 0&&(R.cells=h),R}o(d,"create"),l.create=d}(t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})),function(l){l.method="notebookDocument/didChange",l.messageDirection=r.MessageDirection.clientToServer,l.type=new r.ProtocolNotificationType(l.method),l.registrationMethod=c.method}(t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didSave",l.messageDirection=r.MessageDirection.clientToServer,l.type=new r.ProtocolNotificationType(l.method),l.registrationMethod=c.method}(t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didClose",l.messageDirection=r.MessageDirection.clientToServer,l.type=new r.ProtocolNotificationType(l.method),l.registrationMethod=c.method}(t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={}))}}),VA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/protocol.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;var e=We(),n=jd(),r=Ud(),i=EA();Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return i.ImplementationRequest}});var s=NA();Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});var a=PA();Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return a.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return a.DidChangeWorkspaceFoldersNotification}});var c=IA();Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});var l=DA();Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return l.ColorPresentationRequest}});var u=OA();Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});var d=LA();Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}});var f=$A();Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return f.SelectionRangeRequest}});var p=MA();Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return p.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return p.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return p.WorkDoneProgressCancelNotification}});var h=FA();Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return h.CallHierarchyPrepareRequest}});var R=xA();Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return R.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return R.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return R.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return R.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return R.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return R.SemanticTokensRegistrationType}});var k=jA();Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return k.ShowDocumentRequest}});var A=UA();Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return A.LinkedEditingRangeRequest}});var w=qA();Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return w.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return w.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return w.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return w.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return w.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return w.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return w.WillDeleteFilesRequest}});var E=GA();Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return E.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return E.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return E.MonikerRequest}});var P=WA();Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return P.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return P.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return P.TypeHierarchySupertypesRequest}});var j=HA();Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return j.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return j.InlineValueRefreshRequest}});var z=BA();Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return z.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return z.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return z.InlayHintRefreshRequest}});var ie=KA();Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return ie.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return ie.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return ie.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return ie.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return ie.DiagnosticRefreshRequest}});var de=zA();Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return de.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return de.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return de.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return de.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return de.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return de.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return de.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return de.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return de.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return de.DidCloseNotebookDocumentNotification}});var ve;(function(v){function q(Y){const V=Y;return r.string(V.language)||r.string(V.scheme)||r.string(V.pattern)}o(q,"is"),v.is=q})(ve=t.TextDocumentFilter||(t.TextDocumentFilter={}));var ue;(function(v){function q(Y){const V=Y;return r.objectLiteral(V)&&(r.string(V.notebookType)||r.string(V.scheme)||r.string(V.pattern))}o(q,"is"),v.is=q})(ue=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={}));var L;(function(v){function q(Y){const V=Y;return r.objectLiteral(V)&&(r.string(V.notebook)||ue.is(V.notebook))&&(V.language===void 0||r.string(V.language))}o(q,"is"),v.is=q})(L=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={}));var W;(function(v){function q(Y){if(!Array.isArray(Y))return!1;for(let V of Y)if(!r.string(V)&&!ve.is(V)&&!L.is(V))return!1;return!0}o(q,"is"),v.is=q})(W=t.DocumentSelector||(t.DocumentSelector={})),function(v){v.method="client/registerCapability",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolRequestType(v.method)}(t.RegistrationRequest||(t.RegistrationRequest={})),function(v){v.method="client/unregisterCapability",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolRequestType(v.method)}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(v){v.Create="create",v.Rename="rename",v.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(v){v.Abort="abort",v.Transactional="transactional",v.TextOnlyTransactional="textOnlyTransactional",v.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(v){v.UTF8="utf-8",v.UTF16="utf-16",v.UTF32="utf-32"}(t.PositionEncodingKind||(t.PositionEncodingKind={})),function(v){function q(Y){const V=Y;return V&&r.string(V.id)&&V.id.length>0}o(q,"hasId"),v.hasId=q}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(v){function q(Y){const V=Y;return V&&(V.documentSelector===null||W.is(V.documentSelector))}o(q,"is"),v.is=q}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(v){function q(V){const O=V;return r.objectLiteral(O)&&(O.workDoneProgress===void 0||r.boolean(O.workDoneProgress))}o(q,"is"),v.is=q;function Y(V){const O=V;return O&&r.boolean(O.workDoneProgress)}o(Y,"hasWorkDoneProgress"),v.hasWorkDoneProgress=Y}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(v){v.method="initialize",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.InitializeRequest||(t.InitializeRequest={})),function(v){v.unknownProtocolVersion=1}(t.InitializeErrorCodes||(t.InitializeErrorCodes={})),function(v){v.method="initialized",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.InitializedNotification||(t.InitializedNotification={})),function(v){v.method="shutdown",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType0(v.method)}(t.ShutdownRequest||(t.ShutdownRequest={})),function(v){v.method="exit",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType0(v.method)}(t.ExitNotification||(t.ExitNotification={})),function(v){v.method="workspace/didChangeConfiguration",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(v){v.Error=1,v.Warning=2,v.Info=3,v.Log=4}(t.MessageType||(t.MessageType={})),function(v){v.method="window/showMessage",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolNotificationType(v.method)}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(v){v.method="window/showMessageRequest",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolRequestType(v.method)}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(v){v.method="window/logMessage",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolNotificationType(v.method)}(t.LogMessageNotification||(t.LogMessageNotification={})),function(v){v.method="telemetry/event",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolNotificationType(v.method)}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(v){v.None=0,v.Full=1,v.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(v){v.method="textDocument/didOpen",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(v){function q(V){let O=V;return O!=null&&typeof O.text=="string"&&O.range!==void 0&&(O.rangeLength===void 0||typeof O.rangeLength=="number")}o(q,"isIncremental"),v.isIncremental=q;function Y(V){let O=V;return O!=null&&typeof O.text=="string"&&O.range===void 0&&O.rangeLength===void 0}o(Y,"isFull"),v.isFull=Y}(t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})),function(v){v.method="textDocument/didChange",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(v){v.method="textDocument/didClose",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(v){v.method="textDocument/didSave",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(v){v.Manual=1,v.AfterDelay=2,v.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(v){v.method="textDocument/willSave",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(v){v.method="textDocument/willSaveWaitUntil",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(v){v.method="workspace/didChangeWatchedFiles",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolNotificationType(v.method)}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(v){v.Created=1,v.Changed=2,v.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(v){function q(Y){const V=Y;return r.objectLiteral(V)&&(n.URI.is(V.baseUri)||n.WorkspaceFolder.is(V.baseUri))&&r.string(V.pattern)}o(q,"is"),v.is=q}(t.RelativePattern||(t.RelativePattern={})),function(v){v.Create=1,v.Change=2,v.Delete=4}(t.WatchKind||(t.WatchKind={})),function(v){v.method="textDocument/publishDiagnostics",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolNotificationType(v.method)}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(v){v.Invoked=1,v.TriggerCharacter=2,v.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(v){v.method="textDocument/completion",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CompletionRequest||(t.CompletionRequest={})),function(v){v.method="completionItem/resolve",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(v){v.method="textDocument/hover",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.HoverRequest||(t.HoverRequest={})),function(v){v.Invoked=1,v.TriggerCharacter=2,v.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(v){v.method="textDocument/signatureHelp",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(v){v.method="textDocument/definition",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DefinitionRequest||(t.DefinitionRequest={})),function(v){v.method="textDocument/references",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.ReferencesRequest||(t.ReferencesRequest={})),function(v){v.method="textDocument/documentHighlight",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(v){v.method="textDocument/documentSymbol",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(v){v.method="textDocument/codeAction",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CodeActionRequest||(t.CodeActionRequest={})),function(v){v.method="codeAction/resolve",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})),function(v){v.method="workspace/symbol",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(v){v.method="workspaceSymbol/resolve",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})),function(v){v.method="textDocument/codeLens",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CodeLensRequest||(t.CodeLensRequest={})),function(v){v.method="codeLens/resolve",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(v){v.method="workspace/codeLens/refresh",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolRequestType0(v.method)}(t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})),function(v){v.method="textDocument/documentLink",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(v){v.method="documentLink/resolve",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(v){v.method="textDocument/formatting",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(v){v.method="textDocument/rangeFormatting",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(v){v.method="textDocument/onTypeFormatting",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(v){v.Identifier=1}(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})),function(v){v.method="textDocument/rename",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.RenameRequest||(t.RenameRequest={})),function(v){v.method="textDocument/prepareRename",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(v){v.method="workspace/executeCommand",v.messageDirection=e.MessageDirection.clientToServer,v.type=new e.ProtocolRequestType(v.method)}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(v){v.method="workspace/applyEdit",v.messageDirection=e.MessageDirection.serverToClient,v.type=new e.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))}}),XA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/connection.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;var e=Zn();function n(r,i,s,a){return e.ConnectionStrategy.is(a)&&(a={connectionStrategy:a}),(0,e.createMessageConnection)(r,i,s,a)}o(n,"createProtocolConnection"),t.createProtocolConnection=n}}),YA=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/common/api.js"(t){var e=t&&t.__createBinding||(Object.create?function(i,s,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,c,l)}:function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]}),n=t&&t.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,n(Zn(),t),n(jd(),t),n(We(),t),n(VA(),t);var r=XA();Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}}),function(i){i.lspReservedErrorRangeStart=-32899,i.RequestFailed=-32803,i.ServerCancelled=-32802,i.ContentModified=-32801,i.RequestCancelled=-32800,i.lspReservedErrorRangeEnd=-32800}(t.LSPErrorCodes||(t.LSPErrorCodes={}))}}),rt=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/lib/browser/main.js"(t){var e=t&&t.__createBinding||(Object.create?function(s,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(s,l,u)}:function(s,a,c,l){l===void 0&&(l=c),s[l]=a[c]}),n=t&&t.__exportStar||function(s,a){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,s,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;var r=Hh();n(Hh(),t),n(YA(),t);function i(s,a,c,l){return(0,r.createMessageConnection)(s,a,c,l)}o(i,"createProtocolConnection"),t.createProtocolConnection=i}}),tg=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/semanticTokens.js"(t){var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensBuilder=t.SemanticTokensDiff=t.SemanticTokensFeature=void 0;var e=rt(),n=o(c=>class extends c{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(e.SemanticTokensRefreshRequest.type),on:l=>{const u=e.SemanticTokensRequest.type;return this.connection.onRequest(u,(d,f)=>l(d,f,this.attachWorkDoneProgress(d),this.attachPartialResultProgress(u,d)))},onDelta:l=>{const u=e.SemanticTokensDeltaRequest.type;return this.connection.onRequest(u,(d,f)=>l(d,f,this.attachWorkDoneProgress(d),this.attachPartialResultProgress(u,d)))},onRange:l=>{const u=e.SemanticTokensRangeRequest.type;return this.connection.onRequest(u,(d,f)=>l(d,f,this.attachWorkDoneProgress(d),this.attachPartialResultProgress(u,d)))}}}},"SemanticTokensFeature");t.SemanticTokensFeature=n;var r=(s=class{constructor(l,u){this.originalSequence=l,this.modifiedSequence=u}computeDiff(){const l=this.originalSequence.length,u=this.modifiedSequence.length;let d=0;for(;d<u&&d<l&&this.originalSequence[d]===this.modifiedSequence[d];)d++;if(d<u&&d<l){let f=l-1,p=u-1;for(;f>=d&&p>=d&&this.originalSequence[f]===this.modifiedSequence[p];)f--,p--;(f<d||p<d)&&(f++,p++);const h=f-d+1,R=this.modifiedSequence.slice(d,p+1);return R.length===1&&R[0]===this.originalSequence[f]?[{start:d,deleteCount:h-1}]:[{start:d,deleteCount:h,data:R}]}else return d<u?[{start:d,deleteCount:0,data:this.modifiedSequence.slice(d)}]:d<l?[{start:d,deleteCount:l-d}]:[]}},o(s,"SemanticTokensDiff"),s);t.SemanticTokensDiff=r;var i=(a=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(l,u,d,f,p){let h=l,R=u;this._dataLen>0&&(h-=this._prevLine,h===0&&(R-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=R,this._data[this._dataLen++]=d,this._data[this._dataLen++]=f,this._data[this._dataLen++]=p,this._prevLine=l,this._prevChar=u}get id(){return this._id.toString()}previousResult(l){this.id===l&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new r(this._prevData,this._data).computeDiff()}:this.build()}},o(a,"SemanticTokensBuilder"),a);t.SemanticTokensBuilder=i}}),ng=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/textDocuments.js"(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocuments=void 0;var e=rt(),n=(r=class{constructor(s){this._configuration=s,this._syncedDocuments=new Map,this._onDidChangeContent=new e.Emitter,this._onDidOpen=new e.Emitter,this._onDidClose=new e.Emitter,this._onDidSave=new e.Emitter,this._onWillSave=new e.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(s){this._willSaveWaitUntil=s}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(s){return this._syncedDocuments.get(s)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(s){s.__textDocumentSync=e.TextDocumentSyncKind.Incremental;const a=[];return a.push(s.onDidOpenTextDocument(c=>{const l=c.textDocument,u=this._configuration.create(l.uri,l.languageId,l.version,l.text);this._syncedDocuments.set(l.uri,u);const d=Object.freeze({document:u});this._onDidOpen.fire(d),this._onDidChangeContent.fire(d)})),a.push(s.onDidChangeTextDocument(c=>{const l=c.textDocument,u=c.contentChanges;if(u.length===0)return;const{version:d}=l;if(d==null)throw new Error(`Received document change event for ${l.uri} without valid version identifier`);let f=this._syncedDocuments.get(l.uri);f!==void 0&&(f=this._configuration.update(f,u,d),this._syncedDocuments.set(l.uri,f),this._onDidChangeContent.fire(Object.freeze({document:f})))})),a.push(s.onDidCloseTextDocument(c=>{let l=this._syncedDocuments.get(c.textDocument.uri);l!==void 0&&(this._syncedDocuments.delete(c.textDocument.uri),this._onDidClose.fire(Object.freeze({document:l})))})),a.push(s.onWillSaveTextDocument(c=>{let l=this._syncedDocuments.get(c.textDocument.uri);l!==void 0&&this._onWillSave.fire(Object.freeze({document:l,reason:c.reason}))})),a.push(s.onWillSaveTextDocumentWaitUntil((c,l)=>{let u=this._syncedDocuments.get(c.textDocument.uri);return u!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:u,reason:c.reason}),l):[]})),a.push(s.onDidSaveTextDocument(c=>{let l=this._syncedDocuments.get(c.textDocument.uri);l!==void 0&&this._onDidSave.fire(Object.freeze({document:l}))})),e.Disposable.create(()=>{a.forEach(c=>c.dispose())})}},o(r,"TextDocuments"),r);t.TextDocuments=n}}),rg=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/notebook.js"(t){var a,c;Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDocuments=t.NotebookSyncFeature=void 0;var e=rt(),n=ng(),r=o(l=>class extends l{get synchronization(){return{onDidOpenNotebookDocument:u=>this.connection.onNotification(e.DidOpenNotebookDocumentNotification.type,d=>{u(d)}),onDidChangeNotebookDocument:u=>this.connection.onNotification(e.DidChangeNotebookDocumentNotification.type,d=>{u(d)}),onDidSaveNotebookDocument:u=>this.connection.onNotification(e.DidSaveNotebookDocumentNotification.type,d=>{u(d)}),onDidCloseNotebookDocument:u=>this.connection.onNotification(e.DidCloseNotebookDocumentNotification.type,d=>{u(d)})}}},"NotebookSyncFeature");t.NotebookSyncFeature=r;var i=(a=class{onDidOpenTextDocument(u){return this.openHandler=u,e.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(u){this.openHandler&&this.openHandler(u)}onDidChangeTextDocument(u){return this.changeHandler=u,e.Disposable.create(()=>{this.changeHandler=u})}changeTextDocument(u){this.changeHandler&&this.changeHandler(u)}onDidCloseTextDocument(u){return this.closeHandler=u,e.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(u){this.closeHandler&&this.closeHandler(u)}onWillSaveTextDocument(){return a.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return a.NULL_DISPOSE}onDidSaveTextDocument(){return a.NULL_DISPOSE}},o(a,"CellTextDocumentConnection"),a);i.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var s=(c=class{constructor(u){u instanceof n.TextDocuments?this._cellTextDocuments=u:this._cellTextDocuments=new n.TextDocuments(u),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new e.Emitter,this._onDidChange=new e.Emitter,this._onDidSave=new e.Emitter,this._onDidClose=new e.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(u){return this._cellTextDocuments.get(u.document)}getNotebookDocument(u){return this.notebookDocuments.get(u)}getNotebookCell(u){const d=this.notebookCellMap.get(u);return d&&d[0]}findNotebookDocumentForCell(u){const d=typeof u=="string"?u:u.document,f=this.notebookCellMap.get(d);return f&&f[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(u){const d=new i,f=[];return f.push(this.cellTextDocuments.listen(d)),f.push(u.notebooks.synchronization.onDidOpenNotebookDocument(p=>{this.notebookDocuments.set(p.notebookDocument.uri,p.notebookDocument);for(const h of p.cellTextDocuments)d.openTextDocument({textDocument:h});this.updateCellMap(p.notebookDocument),this._onDidOpen.fire(p.notebookDocument)})),f.push(u.notebooks.synchronization.onDidChangeNotebookDocument(p=>{const h=this.notebookDocuments.get(p.notebookDocument.uri);if(h===void 0)return;h.version=p.notebookDocument.version;const R=h.metadata;let k=!1;const A=p.change;A.metadata!==void 0&&(k=!0,h.metadata=A.metadata);const w=[],E=[],P=[],j=[];if(A.cells!==void 0){const ue=A.cells;if(ue.structure!==void 0){const L=ue.structure.array;if(h.cells.splice(L.start,L.deleteCount,...L.cells!==void 0?L.cells:[]),ue.structure.didOpen!==void 0)for(const W of ue.structure.didOpen)d.openTextDocument({textDocument:W}),w.push(W.uri);if(ue.structure.didClose)for(const W of ue.structure.didClose)d.closeTextDocument({textDocument:W}),E.push(W.uri)}if(ue.data!==void 0){const L=new Map(ue.data.map(W=>[W.document,W]));for(let W=0;W<=h.cells.length;W++){const v=L.get(h.cells[W].document);if(v!==void 0){const q=h.cells.splice(W,1,v);if(P.push({old:q[0],new:v}),L.delete(v.document),L.size===0)break}}}if(ue.textContent!==void 0)for(const L of ue.textContent)d.changeTextDocument({textDocument:L.document,contentChanges:L.changes}),j.push(L.document.uri)}this.updateCellMap(h);const z={notebookDocument:h};k&&(z.metadata={old:R,new:h.metadata});const ie=[];for(const ue of w)ie.push(this.getNotebookCell(ue));const de=[];for(const ue of E)de.push(this.getNotebookCell(ue));const ve=[];for(const ue of j)ve.push(this.getNotebookCell(ue));(ie.length>0||de.length>0||P.length>0||ve.length>0)&&(z.cells={added:ie,removed:de,changed:{data:P,textContent:ve}}),(z.metadata!==void 0||z.cells!==void 0)&&this._onDidChange.fire(z)})),f.push(u.notebooks.synchronization.onDidSaveNotebookDocument(p=>{const h=this.notebookDocuments.get(p.notebookDocument.uri);h!==void 0&&this._onDidSave.fire(h)})),f.push(u.notebooks.synchronization.onDidCloseNotebookDocument(p=>{const h=this.notebookDocuments.get(p.notebookDocument.uri);if(h!==void 0){this._onDidClose.fire(h);for(const R of p.cellTextDocuments)d.closeTextDocument({textDocument:R});this.notebookDocuments.delete(p.notebookDocument.uri);for(const R of h.cells)this.notebookCellMap.delete(R.document)}})),e.Disposable.create(()=>{f.forEach(p=>p.dispose())})}updateCellMap(u){for(const d of u.cells)this.notebookCellMap.set(d.document,[d,u])}},o(c,"NotebookDocuments"),c);t.NotebookDocuments=s}}),ig=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/utils/is.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function e(d){return d===!0||d===!1}o(e,"boolean"),t.boolean=e;function n(d){return typeof d=="string"||d instanceof String}o(n,"string"),t.string=n;function r(d){return typeof d=="number"||d instanceof Number}o(r,"number"),t.number=r;function i(d){return d instanceof Error}o(i,"error"),t.error=i;function s(d){return typeof d=="function"}o(s,"func"),t.func=s;function a(d){return Array.isArray(d)}o(a,"array"),t.array=a;function c(d){return a(d)&&d.every(f=>n(f))}o(c,"stringArray"),t.stringArray=c;function l(d,f){return Array.isArray(d)&&d.every(f)}o(l,"typedArray"),t.typedArray=l;function u(d){return d&&s(d.then)}o(u,"thenable"),t.thenable=u}}),sg=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/utils/uuid.js"(t){var l,u;Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;var e=(l=class{constructor(f){this._value=f}asHex(){return this._value}equals(f){return this.asHex()===f.asHex()}},o(l,"ValueUUID"),l),n=(u=class extends e{constructor(){super([u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),"-",u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),"-","4",u._randomHex(),u._randomHex(),u._randomHex(),"-",u._oneOf(u._timeHighBits),u._randomHex(),u._randomHex(),u._randomHex(),"-",u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex(),u._randomHex()].join(""))}static _oneOf(f){return f[Math.floor(f.length*Math.random())]}static _randomHex(){return u._oneOf(u._chars)}},o(u,"V4UUID"),u);n._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n._timeHighBits=["8","9","a","b"],t.empty=new e("00000000-0000-0000-0000-000000000000");function r(){return new n}o(r,"v4"),t.v4=r;var i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(d){return i.test(d)}o(s,"isUUID"),t.isUUID=s;function a(d){if(!s(d))throw new Error("invalid uuid");return new e(d)}o(a,"parse"),t.parse=a;function c(){return r().asHex()}o(c,"generateUuid"),t.generateUuid=c}}),JA=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/progress.js"(t){var p,h,R,k,A;Object.defineProperty(t,"__esModule",{value:!0}),t.attachPartialResult=t.ProgressFeature=t.attachWorkDone=void 0;var e=rt(),n=sg(),r=(p=class{constructor(E,P){this._connection=E,this._token=P,p.Instances.set(this._token,this)}begin(E,P,j,z){let ie={kind:"begin",title:E,percentage:P,message:j,cancellable:z};this._connection.sendProgress(e.WorkDoneProgress.type,this._token,ie)}report(E,P){let j={kind:"report"};typeof E=="number"?(j.percentage=E,P!==void 0&&(j.message=P)):j.message=E,this._connection.sendProgress(e.WorkDoneProgress.type,this._token,j)}done(){p.Instances.delete(this._token),this._connection.sendProgress(e.WorkDoneProgress.type,this._token,{kind:"end"})}},o(p,"WorkDoneProgressReporterImpl"),p);r.Instances=new Map;var i=(h=class extends r{constructor(E,P){super(E,P),this._source=new e.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},o(h,"WorkDoneProgressServerReporterImpl"),h),s=(R=class{constructor(){}begin(){}report(){}done(){}},o(R,"NullProgressReporter"),R),a=(k=class extends s{constructor(){super(),this._source=new e.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}},o(k,"NullProgressServerReporter"),k);function c(w,E){if(E===void 0||E.workDoneToken===void 0)return new s;const P=E.workDoneToken;return delete E.workDoneToken,new r(w,P)}o(c,"attachWorkDone"),t.attachWorkDone=c;var l=o(w=>class extends w{constructor(){super(),this._progressSupported=!1}initialize(E){var P;super.initialize(E),((P=E==null?void 0:E.window)==null?void 0:P.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(e.WorkDoneProgressCancelNotification.type,j=>{let z=r.Instances.get(j.token);(z instanceof i||z instanceof a)&&z.cancel()}))}attachWorkDoneProgress(E){return E===void 0?new s:new r(this.connection,E)}createWorkDoneProgress(){if(this._progressSupported){const E=(0,n.generateUuid)();return this.connection.sendRequest(e.WorkDoneProgressCreateRequest.type,{token:E}).then(()=>new i(this.connection,E))}else return Promise.resolve(new a)}},"ProgressFeature");t.ProgressFeature=l;var u;(function(w){w.type=new e.ProgressType})(u||(u={}));var d=(A=class{constructor(E,P){this._connection=E,this._token=P}report(E){this._connection.sendProgress(u.type,this._token,E)}},o(A,"ResultProgressReporterImpl"),A);function f(w,E){if(E===void 0||E.partialResultToken===void 0)return;const P=E.partialResultToken;return delete E.partialResultToken,new d(w,P)}o(f,"attachPartialResult"),t.attachPartialResult=f}}),QA=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/configuration.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationFeature=void 0;var e=rt(),n=ig(),r=o(i=>class extends i{getConfiguration(s){return s?n.string(s)?this._getConfiguration({section:s}):this._getConfiguration(s):this._getConfiguration({})}_getConfiguration(s){let a={items:Array.isArray(s)?s:[s]};return this.connection.sendRequest(e.ConfigurationRequest.type,a).then(c=>Array.isArray(c)?Array.isArray(s)?c:c[0]:Array.isArray(s)?[]:null)}},"ConfigurationFeature");t.ConfigurationFeature=r}}),ZA=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/workspaceFolder.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=void 0;var e=rt(),n=o(r=>class extends r{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(i){super.initialize(i);let s=i.workspace;s&&s.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new e.Emitter,this.connection.onNotification(e.DidChangeWorkspaceFoldersNotification.type,a=>{this._onDidChangeWorkspaceFolders.fire(a.event)}))}fillServerCapabilities(i){var a,c;super.fillServerCapabilities(i);const s=(c=(a=i.workspace)==null?void 0:a.workspaceFolders)==null?void 0:c.changeNotifications;this._notificationIsAutoRegistered=s===!0||typeof s=="string"}getWorkspaceFolders(){return this.connection.sendRequest(e.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(e.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");t.WorkspaceFoldersFeature=n}}),ew=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/callHierarchy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;var e=rt(),n=o(r=>class extends r{get callHierarchy(){return{onPrepare:i=>this.connection.onRequest(e.CallHierarchyPrepareRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s),void 0)),onIncomingCalls:i=>{const s=e.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(s,(a,c)=>i(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(s,a)))},onOutgoingCalls:i=>{const s=e.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(s,(a,c)=>i(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(s,a)))}}}},"CallHierarchyFeature");t.CallHierarchyFeature=n}}),tw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/showDocument.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentFeature=void 0;var e=rt(),n=o(r=>class extends r{showDocument(i){return this.connection.sendRequest(e.ShowDocumentRequest.type,i)}},"ShowDocumentFeature");t.ShowDocumentFeature=n}}),nw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/fileOperations.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FileOperationsFeature=void 0;var e=rt(),n=o(r=>class extends r{onDidCreateFiles(i){return this.connection.onNotification(e.DidCreateFilesNotification.type,s=>{i(s)})}onDidRenameFiles(i){return this.connection.onNotification(e.DidRenameFilesNotification.type,s=>{i(s)})}onDidDeleteFiles(i){return this.connection.onNotification(e.DidDeleteFilesNotification.type,s=>{i(s)})}onWillCreateFiles(i){return this.connection.onRequest(e.WillCreateFilesRequest.type,(s,a)=>i(s,a))}onWillRenameFiles(i){return this.connection.onRequest(e.WillRenameFilesRequest.type,(s,a)=>i(s,a))}onWillDeleteFiles(i){return this.connection.onRequest(e.WillDeleteFilesRequest.type,(s,a)=>i(s,a))}},"FileOperationsFeature");t.FileOperationsFeature=n}}),rw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/linkedEditingRange.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeFeature=void 0;var e=rt(),n=o(r=>class extends r{onLinkedEditingRange(i){return this.connection.onRequest(e.LinkedEditingRangeRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s),void 0))}},"LinkedEditingRangeFeature");t.LinkedEditingRangeFeature=n}}),iw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/typeHierarchy.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchyFeature=void 0;var e=rt(),n=o(r=>class extends r{get typeHierarchy(){return{onPrepare:i=>this.connection.onRequest(e.TypeHierarchyPrepareRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s),void 0)),onSupertypes:i=>{const s=e.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(s,(a,c)=>i(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(s,a)))},onSubtypes:i=>{const s=e.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(s,(a,c)=>i(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(s,a)))}}}},"TypeHierarchyFeature");t.TypeHierarchyFeature=n}}),sw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/inlineValue.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueFeature=void 0;var e=rt(),n=o(r=>class extends r{get inlineValue(){return{refresh:()=>this.connection.sendRequest(e.InlineValueRefreshRequest.type),on:i=>this.connection.onRequest(e.InlineValueRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s)))}}},"InlineValueFeature");t.InlineValueFeature=n}}),aw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/inlayHint.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintFeature=void 0;var e=rt(),n=o(r=>class extends r{get inlayHint(){return{refresh:()=>this.connection.sendRequest(e.InlayHintRefreshRequest.type),on:i=>this.connection.onRequest(e.InlayHintRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s))),resolve:i=>this.connection.onRequest(e.InlayHintResolveRequest.type,(s,a)=>i(s,a))}}},"InlayHintFeature");t.InlayHintFeature=n}}),ow=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/diagnostic.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFeature=void 0;var e=rt(),n=o(r=>class extends r{get diagnostics(){return{refresh:()=>this.connection.sendRequest(e.DiagnosticRefreshRequest.type),on:i=>this.connection.onRequest(e.DocumentDiagnosticRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s),this.attachPartialResultProgress(e.DocumentDiagnosticRequest.partialResult,s))),onWorkspace:i=>this.connection.onRequest(e.WorkspaceDiagnosticRequest.type,(s,a)=>i(s,a,this.attachWorkDoneProgress(s),this.attachPartialResultProgress(e.WorkspaceDiagnosticRequest.partialResult,s)))}}},"DiagnosticFeature");t.DiagnosticFeature=n}}),cw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/moniker.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerFeature=void 0;var e=rt(),n=o(r=>class extends r{get moniker(){return{on:i=>{const s=e.MonikerRequest.type;return this.connection.onRequest(s,(a,c)=>i(a,c,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(s,a)))}}}},"MonikerFeature");t.MonikerFeature=n}}),lw=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/server.js"(t){var fe,Q,he,H,pe,Ae,He,at,bt,we,K;Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.combineFeatures=t.combineNotebooksFeatures=t.combineLanguagesFeatures=t.combineWorkspaceFeatures=t.combineWindowFeatures=t.combineClientFeatures=t.combineTracerFeatures=t.combineTelemetryFeatures=t.combineConsoleFeatures=t._NotebooksImpl=t._LanguagesImpl=t.BulkUnregistration=t.BulkRegistration=t.ErrorMessageTracker=void 0;var e=rt(),n=ig(),r=sg(),i=JA(),s=QA(),a=ZA(),c=ew(),l=tg(),u=tw(),d=nw(),f=rw(),p=iw(),h=sw(),R=aw(),k=ow(),A=rg(),w=cw();function E(se){if(se!==null)return se}o(E,"null2Undefined");var P=(fe=class{constructor(){this._messages=Object.create(null)}add(I){let U=this._messages[I];U||(U=0),U++,this._messages[I]=U}sendErrors(I){Object.keys(this._messages).forEach(U=>{I.window.showErrorMessage(U)})}},o(fe,"ErrorMessageTracker"),fe);t.ErrorMessageTracker=P;var j=(Q=class{constructor(){}rawAttach(I){this._rawConnection=I}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(I){}initialize(I){}error(I){this.send(e.MessageType.Error,I)}warn(I){this.send(e.MessageType.Warning,I)}info(I){this.send(e.MessageType.Info,I)}log(I){this.send(e.MessageType.Log,I)}send(I,U){this._rawConnection&&this._rawConnection.sendNotification(e.LogMessageNotification.type,{type:I,message:U}).catch(()=>{(0,e.RAL)().console.error("Sending log message failed")})}},o(Q,"RemoteConsoleImpl"),Q),z=(he=class{constructor(){}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}showErrorMessage(I,...U){let re={type:e.MessageType.Error,message:I,actions:U};return this.connection.sendRequest(e.ShowMessageRequest.type,re).then(E)}showWarningMessage(I,...U){let re={type:e.MessageType.Warning,message:I,actions:U};return this.connection.sendRequest(e.ShowMessageRequest.type,re).then(E)}showInformationMessage(I,...U){let re={type:e.MessageType.Info,message:I,actions:U};return this.connection.sendRequest(e.ShowMessageRequest.type,re).then(E)}},o(he,"_RemoteWindowImpl"),he),ie=(0,u.ShowDocumentFeature)((0,i.ProgressFeature)(z));(function(se){function I(){return new de}o(I,"create"),se.create=I})(t.BulkRegistration||(t.BulkRegistration={}));var de=(H=class{constructor(){this._registrations=[],this._registered=new Set}add(I,U){const re=n.string(I)?I:I.method;if(this._registered.has(re))throw new Error(`${re} is already added to this registration`);const M=r.generateUuid();this._registrations.push({id:M,method:re,registerOptions:U||{}}),this._registered.add(re)}asRegistrationParams(){return{registrations:this._registrations}}},o(H,"BulkRegistrationImpl"),H);(function(se){function I(){return new ve(void 0,[])}o(I,"create"),se.create=I})(t.BulkUnregistration||(t.BulkUnregistration={}));var ve=(pe=class{constructor(I,U){this._connection=I,this._unregistrations=new Map,U.forEach(re=>{this._unregistrations.set(re.method,re)})}get isAttached(){return!!this._connection}attach(I){this._connection=I}add(I){this._unregistrations.set(I.method,I)}dispose(){let I=[];for(let re of this._unregistrations.values())I.push(re);let U={unregisterations:I};this._connection.sendRequest(e.UnregistrationRequest.type,U).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(I){const U=n.string(I)?I:I.method,re=this._unregistrations.get(U);if(!re)return!1;let M={unregisterations:[re]};return this._connection.sendRequest(e.UnregistrationRequest.type,M).then(()=>{this._unregistrations.delete(U)},it=>{this._connection.console.info(`Un-registering request handler for ${re.id} failed.`)}),!0}},o(pe,"BulkUnregistrationImpl"),pe),ue=(Ae=class{attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}register(I,U,re){return I instanceof de?this.registerMany(I):I instanceof ve?this.registerSingle1(I,U,re):this.registerSingle2(I,U)}registerSingle1(I,U,re){const M=n.string(U)?U:U.method,it=r.generateUuid();let It={registrations:[{id:it,method:M,registerOptions:re||{}}]};return I.isAttached||I.attach(this.connection),this.connection.sendRequest(e.RegistrationRequest.type,It).then(Dt=>(I.add({id:it,method:M}),I),Dt=>(this.connection.console.info(`Registering request handler for ${M} failed.`),Promise.reject(Dt)))}registerSingle2(I,U){const re=n.string(I)?I:I.method,M=r.generateUuid();let it={registrations:[{id:M,method:re,registerOptions:U||{}}]};return this.connection.sendRequest(e.RegistrationRequest.type,it).then(It=>e.Disposable.create(()=>{this.unregisterSingle(M,re).catch(()=>{this.connection.console.info(`Un-registering capability with id ${M} failed.`)})}),It=>(this.connection.console.info(`Registering request handler for ${re} failed.`),Promise.reject(It)))}unregisterSingle(I,U){let re={unregisterations:[{id:I,method:U}]};return this.connection.sendRequest(e.UnregistrationRequest.type,re).catch(()=>{this.connection.console.info(`Un-registering request handler for ${I} failed.`)})}registerMany(I){let U=I.asRegistrationParams();return this.connection.sendRequest(e.RegistrationRequest.type,U).then(()=>new ve(this._connection,U.registrations.map(re=>({id:re.id,method:re.method}))),re=>(this.connection.console.info("Bulk registration failed."),Promise.reject(re)))}},o(Ae,"RemoteClientImpl"),Ae),L=(He=class{constructor(){}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}applyEdit(I){function U(M){return M&&!!M.edit}o(U,"isApplyWorkspaceEditParams");let re=U(I)?I:{edit:I};return this.connection.sendRequest(e.ApplyWorkspaceEditRequest.type,re)}},o(He,"_RemoteWorkspaceImpl"),He),W=(0,d.FileOperationsFeature)((0,a.WorkspaceFoldersFeature)((0,s.ConfigurationFeature)(L))),v=(at=class{constructor(){this._trace=e.Trace.Off}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}set trace(I){this._trace=I}log(I,U){this._trace!==e.Trace.Off&&this.connection.sendNotification(e.LogTraceNotification.type,{message:I,verbose:this._trace===e.Trace.Verbose?U:void 0}).catch(()=>{})}},o(at,"TracerImpl"),at),q=(bt=class{constructor(){}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}logEvent(I){this.connection.sendNotification(e.TelemetryEventNotification.type,I).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},o(bt,"TelemetryImpl"),bt),Y=(we=class{constructor(){}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}attachWorkDoneProgress(I){return(0,i.attachWorkDone)(this.connection,I)}attachPartialResultProgress(I,U){return(0,i.attachPartialResult)(this.connection,U)}},o(we,"_LanguagesImpl"),we);t._LanguagesImpl=Y;var V=(0,w.MonikerFeature)((0,k.DiagnosticFeature)((0,R.InlayHintFeature)((0,h.InlineValueFeature)((0,p.TypeHierarchyFeature)((0,f.LinkedEditingRangeFeature)((0,l.SemanticTokensFeature)((0,c.CallHierarchyFeature)(Y)))))))),O=(K=class{constructor(){}attach(I){this._connection=I}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(I){}fillServerCapabilities(I){}attachWorkDoneProgress(I){return(0,i.attachWorkDone)(this.connection,I)}attachPartialResultProgress(I,U){return(0,i.attachPartialResult)(this.connection,U)}},o(K,"_NotebooksImpl"),K);t._NotebooksImpl=O;var _=(0,A.NotebookSyncFeature)(O);function g(se,I){return function(U){return I(se(U))}}o(g,"combineConsoleFeatures"),t.combineConsoleFeatures=g;function y(se,I){return function(U){return I(se(U))}}o(y,"combineTelemetryFeatures"),t.combineTelemetryFeatures=y;function b(se,I){return function(U){return I(se(U))}}o(b,"combineTracerFeatures"),t.combineTracerFeatures=b;function T(se,I){return function(U){return I(se(U))}}o(T,"combineClientFeatures"),t.combineClientFeatures=T;function m(se,I){return function(U){return I(se(U))}}o(m,"combineWindowFeatures"),t.combineWindowFeatures=m;function C(se,I){return function(U){return I(se(U))}}o(C,"combineWorkspaceFeatures"),t.combineWorkspaceFeatures=C;function D(se,I){return function(U){return I(se(U))}}o(D,"combineLanguagesFeatures"),t.combineLanguagesFeatures=D;function B(se,I){return function(U){return I(se(U))}}o(B,"combineNotebooksFeatures"),t.combineNotebooksFeatures=B;function ee(se,I){function U(M,it,It){return M&&it?It(M,it):M||it}return o(U,"combine"),{__brand:"features",console:U(se.console,I.console,g),tracer:U(se.tracer,I.tracer,b),telemetry:U(se.telemetry,I.telemetry,y),client:U(se.client,I.client,T),window:U(se.window,I.window,m),workspace:U(se.workspace,I.workspace,C),languages:U(se.languages,I.languages,D),notebooks:U(se.notebooks,I.notebooks,B)}}o(ee,"combineFeatures"),t.combineFeatures=ee;function te(se,I,U){const re=U&&U.console?new(U.console(j)):new j,M=se(re);re.rawAttach(M);const it=U&&U.tracer?new(U.tracer(v)):new v,It=U&&U.telemetry?new(U.telemetry(q)):new q,Dt=U&&U.client?new(U.client(ue)):new ue,Fr=U&&U.window?new(U.window(ie)):new ie,Ti=U&&U.workspace?new(U.workspace(W)):new W,Ri=U&&U.languages?new(U.languages(V)):new V,xr=U&&U.notebooks?new(U.notebooks(_)):new _,sr=[re,it,It,Dt,Fr,Ti,Ri,xr];function kc($){return $ instanceof Promise?$:n.thenable($)?new Promise((F,X)=>{$.then(mt=>F(mt),mt=>X(mt))}):Promise.resolve($)}o(kc,"asPromise");let ar,or,cr,Sn={listen:()=>M.listen(),sendRequest:($,...F)=>M.sendRequest(n.string($)?$:$.method,...F),onRequest:($,F)=>M.onRequest($,F),sendNotification:($,F)=>{const X=n.string($)?$:$.method;return arguments.length===1?M.sendNotification(X):M.sendNotification(X,F)},onNotification:($,F)=>M.onNotification($,F),onProgress:M.onProgress,sendProgress:M.sendProgress,onInitialize:$=>(or=$,{dispose:()=>{or=void 0}}),onInitialized:$=>M.onNotification(e.InitializedNotification.type,$),onShutdown:$=>(ar=$,{dispose:()=>{ar=void 0}}),onExit:$=>(cr=$,{dispose:()=>{cr=void 0}}),get console(){return re},get telemetry(){return It},get tracer(){return it},get client(){return Dt},get window(){return Fr},get workspace(){return Ti},get languages(){return Ri},get notebooks(){return xr},onDidChangeConfiguration:$=>M.onNotification(e.DidChangeConfigurationNotification.type,$),onDidChangeWatchedFiles:$=>M.onNotification(e.DidChangeWatchedFilesNotification.type,$),__textDocumentSync:void 0,onDidOpenTextDocument:$=>M.onNotification(e.DidOpenTextDocumentNotification.type,$),onDidChangeTextDocument:$=>M.onNotification(e.DidChangeTextDocumentNotification.type,$),onDidCloseTextDocument:$=>M.onNotification(e.DidCloseTextDocumentNotification.type,$),onWillSaveTextDocument:$=>M.onNotification(e.WillSaveTextDocumentNotification.type,$),onWillSaveTextDocumentWaitUntil:$=>M.onRequest(e.WillSaveTextDocumentWaitUntilRequest.type,$),onDidSaveTextDocument:$=>M.onNotification(e.DidSaveTextDocumentNotification.type,$),sendDiagnostics:$=>M.sendNotification(e.PublishDiagnosticsNotification.type,$),onHover:$=>M.onRequest(e.HoverRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),onCompletion:$=>M.onRequest(e.CompletionRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onCompletionResolve:$=>M.onRequest(e.CompletionResolveRequest.type,$),onSignatureHelp:$=>M.onRequest(e.SignatureHelpRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),onDeclaration:$=>M.onRequest(e.DeclarationRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onDefinition:$=>M.onRequest(e.DefinitionRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onTypeDefinition:$=>M.onRequest(e.TypeDefinitionRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onImplementation:$=>M.onRequest(e.ImplementationRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onReferences:$=>M.onRequest(e.ReferencesRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onDocumentHighlight:$=>M.onRequest(e.DocumentHighlightRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onDocumentSymbol:$=>M.onRequest(e.DocumentSymbolRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onWorkspaceSymbol:$=>M.onRequest(e.WorkspaceSymbolRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onWorkspaceSymbolResolve:$=>M.onRequest(e.WorkspaceSymbolResolveRequest.type,$),onCodeAction:$=>M.onRequest(e.CodeActionRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onCodeActionResolve:$=>M.onRequest(e.CodeActionResolveRequest.type,(F,X)=>$(F,X)),onCodeLens:$=>M.onRequest(e.CodeLensRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onCodeLensResolve:$=>M.onRequest(e.CodeLensResolveRequest.type,(F,X)=>$(F,X)),onDocumentFormatting:$=>M.onRequest(e.DocumentFormattingRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),onDocumentRangeFormatting:$=>M.onRequest(e.DocumentRangeFormattingRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),onDocumentOnTypeFormatting:$=>M.onRequest(e.DocumentOnTypeFormattingRequest.type,(F,X)=>$(F,X)),onRenameRequest:$=>M.onRequest(e.RenameRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),onPrepareRename:$=>M.onRequest(e.PrepareRenameRequest.type,(F,X)=>$(F,X)),onDocumentLinks:$=>M.onRequest(e.DocumentLinkRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onDocumentLinkResolve:$=>M.onRequest(e.DocumentLinkResolveRequest.type,(F,X)=>$(F,X)),onDocumentColor:$=>M.onRequest(e.DocumentColorRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onColorPresentation:$=>M.onRequest(e.ColorPresentationRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onFoldingRanges:$=>M.onRequest(e.FoldingRangeRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onSelectionRanges:$=>M.onRequest(e.SelectionRangeRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),(0,i.attachPartialResult)(M,F))),onExecuteCommand:$=>M.onRequest(e.ExecuteCommandRequest.type,(F,X)=>$(F,X,(0,i.attachWorkDone)(M,F),void 0)),dispose:()=>M.dispose()};for(let $ of sr)$.attach(Sn);return M.onRequest(e.InitializeRequest.type,$=>{I.initialize($),n.string($.trace)&&(it.trace=e.Trace.fromString($.trace));for(let F of sr)F.initialize($.capabilities);if(or){let F=or($,new e.CancellationTokenSource().token,(0,i.attachWorkDone)(M,$),void 0);return kc(F).then(X=>{if(X instanceof e.ResponseError)return X;let mt=X;mt||(mt={capabilities:{}});let Ot=mt.capabilities;Ot||(Ot={},mt.capabilities=Ot),Ot.textDocumentSync===void 0||Ot.textDocumentSync===null?Ot.textDocumentSync=n.number(Sn.__textDocumentSync)?Sn.__textDocumentSync:e.TextDocumentSyncKind.None:!n.number(Ot.textDocumentSync)&&!n.number(Ot.textDocumentSync.change)&&(Ot.textDocumentSync.change=n.number(Sn.__textDocumentSync)?Sn.__textDocumentSync:e.TextDocumentSyncKind.None);for(let jr of sr)jr.fillServerCapabilities(Ot);return mt})}else{let F={capabilities:{textDocumentSync:e.TextDocumentSyncKind.None}};for(let X of sr)X.fillServerCapabilities(F.capabilities);return F}}),M.onRequest(e.ShutdownRequest.type,()=>{if(I.shutdownReceived=!0,ar)return ar(new e.CancellationTokenSource().token)}),M.onNotification(e.ExitNotification.type,()=>{try{cr&&cr()}finally{I.shutdownReceived?I.exit(0):I.exit(1)}}),M.onNotification(e.SetTraceNotification.type,$=>{it.trace=e.Trace.fromString($.value)}),Sn}o(te,"createConnection"),t.createConnection=te}}),Bh=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/common/api.js"(t){var e=t&&t.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(c,l);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,u,d)}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),n=t&&t.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.NotebookDocuments=t.TextDocuments=t.SemanticTokensBuilder=void 0;var r=tg();Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return r.SemanticTokensBuilder}}),n(rt(),t);var i=ng();Object.defineProperty(t,"TextDocuments",{enumerable:!0,get:function(){return i.TextDocuments}});var s=rg();Object.defineProperty(t,"NotebookDocuments",{enumerable:!0,get:function(){return s.NotebookDocuments}}),n(lw(),t),function(a){a.all={__brand:"features"}}(t.ProposedFeatures||(t.ProposedFeatures={}))}}),uw=Z({"../../node_modules/.pnpm/vscode-languageserver-protocol@3.17.2/node_modules/vscode-languageserver-protocol/browser.js"(t,e){e.exports=rt()}}),Ee=Z({"../../node_modules/.pnpm/vscode-languageserver@8.0.2/node_modules/vscode-languageserver/lib/browser/main.js"(t){var e=t&&t.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(l,u);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,f)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),n=t&&t.__exportStar||function(c,l){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,c,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=void 0;var r=Bh();n(uw(),t),n(Bh(),t);var i=!1,s={initialize:c=>{},get shutdownReceived(){return i},set shutdownReceived(c){i=c},exit:c=>{}};function a(c,l,u,d){let f,p,h,R;c!==void 0&&c.__brand==="features"&&(f=c,c=l,l=u,u=d),r.ConnectionStrategy.is(c)||r.ConnectionOptions.is(c)?R=c:(p=c,h=l,R=u);const k=o(A=>(0,r.createProtocolConnection)(p,h,A,R),"connectionFactory");return(0,r.createConnection)(k,s,f)}o(a,"createConnection"),t.createConnection=a}}),dw=_e(Ee(),1),fw=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Kh=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){for(var r=0,i=e;r<i.length;r++){var s=i[r];if(t.isIncremental(s)){var a=qd(s.range),c=this.offsetAt(a.start),l=this.offsetAt(a.end);this._content=this._content.substring(0,c)+s.text+this._content.substring(l,this._content.length);var u=Math.max(a.start.line,0),d=Math.max(a.end.line,0),f=this._lineOffsets,p=ju(s.text,!1,c);if(d-u===p.length)for(var h=0,R=p.length;h<R;h++)f[h+u+1]=p[h];else p.length<1e4?f.splice.apply(f,fw([u+1,d-u],p,!1)):this._lineOffsets=f=f.slice(0,u+1).concat(p,f.slice(d+1));var k=s.text.length-(l-c);if(k!==0)for(var h=u+1+p.length,R=f.length;h<R;h++)f[h]=f[h]+k}else if(t.isFull(s))this._content=s.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=n},t.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=ju(this._content,!0)),this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var a=r-1;return{line:a,character:e-n[a]}},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t.isIncremental=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")},t.isFull=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0},t}(),zc;(function(t){function e(i,s,a,c){return new Kh(i,s,a,c)}o(e,"create"),t.create=e;function n(i,s,a){if(i instanceof Kh)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}o(n,"update"),t.update=n;function r(i,s){for(var a=i.getText(),c=Vc(s.map(ag),function(R,k){var A=R.range.start.line-k.range.start.line;return A===0?R.range.start.character-k.range.start.character:A}),l=0,u=[],d=0,f=c;d<f.length;d++){var p=f[d],h=i.offsetAt(p.range.start);if(h<l)throw new Error("Overlapping edit");h>l&&u.push(a.substring(l,h)),p.newText.length&&u.push(p.newText),l=i.offsetAt(p.range.end)}return u.push(a.substr(l)),u.join("")}o(r,"applyEdits"),t.applyEdits=r})(zc||(zc={}));function Vc(t,e){if(t.length<=1)return t;var n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Vc(r,e),Vc(i,e);for(var s=0,a=0,c=0;s<r.length&&a<i.length;){var l=e(r[s],i[a]);l<=0?t[c++]=r[s++]:t[c++]=i[a++]}for(;s<r.length;)t[c++]=r[s++];for(;a<i.length;)t[c++]=i[a++];return t}o(Vc,"mergeSort");function ju(t,e,n){n===void 0&&(n=0);for(var r=e?[n]:[],i=0;i<t.length;i++){var s=t.charCodeAt(i);(s===13||s===10)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}o(ju,"computeLineOffsets");function qd(t){var e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}o(qd,"getWellformedRange");function ag(t){var e=qd(t.range);return e!==t.range?{newText:t.newText,range:e}:t}o(ag,"getWellformedEdit");function ht(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}o(ht,"isAstNode");function Tr(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"}o(Tr,"isReference");function og(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}o(og,"isAstNodeDescription");function Ni(t){return typeof t=="object"&&t!==null&&ht(t.container)&&Tr(t.reference)&&typeof t.message=="string"}o(Ni,"isLinkingError");var ls,cg=(ls=class{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,n){return ht(e)&&this.isSubtype(e.$type,n)}isSubtype(e,n){if(e===n)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});const i=r[n];if(i!==void 0)return i;{const s=this.computeIsSubtype(e,n);return r[n]=s,s}}getAllSubTypes(e){const n=this.allSubtypes[e];if(n)return n;{const r=this.getAllTypes(),i=[];for(const s of r)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}},o(ls,"AbstractAstReflection"),ls);function wr(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}o(wr,"isCompositeCstNode");function Zr(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}o(Zr,"isLeafCstNode");function lg(t){return wr(t)&&typeof t.fullText=="string"}o(lg,"isRootCstNode");var Ht,In=(Ht=class{constructor(e,n){this.startFn=e,this.nextFn=n}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let n=0,r=e.next();for(;!r.done;)n++,r=e.next();return n}toArray(){const e=[],n=this.iterator();let r;do r=n.next(),r.value!==void 0&&e.push(r.value);while(!r.done);return e}toSet(){return new Set(this)}toMap(e,n){const r=this.map(i=>[e?e(i):i,n?n(i):i]);return new Map(r)}toString(){return this.join()}concat(e){const n=e[Symbol.iterator]();return new Ht(()=>({first:this.startFn(),firstDone:!1}),r=>{let i;if(!r.firstDone){do if(i=this.nextFn(r.first),!i.done)return i;while(!i.done);r.firstDone=!0}do if(i=n.next(),!i.done)return i;while(!i.done);return Lt})}join(e=","){const n=this.iterator();let r="",i,s=!1;do i=n.next(),i.done||(s&&(r+=e),r+=ug(i.value)),s=!0;while(!i.done);return r}indexOf(e,n=0){const r=this.iterator();let i=0,s=r.next();for(;!s.done;){if(i>=n&&s.value===e)return i;s=r.next(),i++}return-1}every(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(!e(r.value))return!1;r=n.next()}return!0}some(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(e(r.value))return!0;r=n.next()}return!1}forEach(e){const n=this.iterator();let r=0,i=n.next();for(;!i.done;)e(i.value,r),i=n.next(),r++}map(e){return new Ht(this.startFn,n=>{const{done:r,value:i}=this.nextFn(n);return r?Lt:{done:!1,value:e(i)}})}filter(e){return new Ht(this.startFn,n=>{let r;do if(r=this.nextFn(n),!r.done&&e(r.value))return r;while(!r.done);return Lt})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,n){const r=this.iterator();let i=n,s=r.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=r.next();return i}reduceRight(e,n){return this.recursiveReduce(this.iterator(),e,n)}recursiveReduce(e,n,r){const i=e.next();if(i.done)return r;const s=this.recursiveReduce(e,n,r);return s===void 0?i.value:n(s,i.value)}find(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(e(r.value))return r.value;r=n.next()}}findIndex(e){const n=this.iterator();let r=0,i=n.next();for(;!i.done;){if(e(i.value))return r;i=n.next(),r++}return-1}includes(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(r.value===e)return!0;r=n.next()}return!1}flatMap(e){return new Ht(()=>({this:this.startFn()}),n=>{do{if(n.iterator){const s=n.iterator.next();if(s.done)n.iterator=void 0;else return s}const{done:r,value:i}=this.nextFn(n.this);if(!r){const s=e(i);if(ji(s))n.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(n.iterator);return Lt})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const n=e>1?this.flat(e-1):this;return new Ht(()=>({this:n.startFn()}),r=>{do{if(r.iterator){const a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}const{done:i,value:s}=n.nextFn(r.this);if(!i)if(ji(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(r.iterator);return Lt})}head(){const n=this.iterator().next();if(!n.done)return n.value}tail(e=1){return new Ht(()=>{const n=this.startFn();for(let r=0;r<e;r++)if(this.nextFn(n).done)return n;return n},this.nextFn)}limit(e){return new Ht(()=>({size:0,state:this.startFn()}),n=>(n.size++,n.size>e?Lt:this.nextFn(n.state)))}distinct(e){const n=new Set;return this.filter(r=>{const i=e?e(r):r;return n.has(i)?!1:(n.add(i),!0)})}exclude(e,n){const r=new Set;for(const i of e){const s=n?n(i):i;r.add(s)}return this.filter(i=>{const s=n?n(i):i;return!r.has(s)})}},o(Ht,"StreamImpl"),Ht);function ug(t){return typeof t=="string"?t:typeof t>"u"?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}o(ug,"toString");function ji(t){return!!t&&typeof t[Symbol.iterator]=="function"}o(ji,"isIterable");var Xc=new In(()=>{},()=>Lt),Lt=Object.freeze({done:!0,value:void 0});function Ne(...t){if(t.length===1){const e=t[0];if(e instanceof In)return e;if(ji(e))return new In(()=>e[Symbol.iterator](),n=>n.next());if(typeof e.length=="number")return new In(()=>({index:0}),n=>n.index<e.length?{done:!1,value:e[n.index++]}:Lt)}return t.length>1?new In(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const n=e.iterator.next();if(!n.done)return n;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){const n=t[e.collIndex++];ji(n)?e.iterator=n[Symbol.iterator]():n&&typeof n.length=="number"&&(e.array=n)}}while(e.iterator||e.array||e.collIndex<t.length);return Lt}):Xc}o(Ne,"stream");var us,ei=(us=class extends In{constructor(e,n,r){super(()=>({iterators:r!=null&&r.includeRoot?[[e][Symbol.iterator]()]:[n(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const a=i.iterators[i.iterators.length-1].next();if(a.done)i.iterators.pop();else return i.iterators.push(n(a.value)[Symbol.iterator]()),a}return Lt})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}},o(us,"TreeStreamImpl"),us),Dc;(function(t){function e(s){return s.reduce((a,c)=>a+c,0)}o(e,"sum"),t.sum=e;function n(s){return s.reduce((a,c)=>a*c,0)}o(n,"product"),t.product=n;function r(s){return s.reduce((a,c)=>Math.min(a,c))}o(r,"min"),t.min=r;function i(s){return s.reduce((a,c)=>Math.max(a,c))}o(i,"max"),t.max=i})(Dc=Dc||(Dc={}));function Gd(t){return new ei(t,e=>wr(e)?e.content:[],{includeRoot:!0})}o(Gd,"streamCst");function dg(t){return Gd(t).filter(Zr)}o(dg,"flattenCst");function fg(t,e){for(;t.container;)if(t=t.container,t===e)return!0;return!1}o(fg,"isCstChildNode");function Yc(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}o(Yc,"tokenToRange");function Kt(t){if(!t)return;const{offset:e,end:n,range:r}=t;return{range:r,offset:e,end:n,length:n-e}}o(Kt,"toDocumentSegment");var En;(function(t){t[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside"})(En=En||(En={}));function hg(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<t.start.character)return En.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>e.end.character)return En.After;const n=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,r=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return n&&r?En.Inside:n?En.OverlapBack:En.OverlapFront}o(hg,"compareRange");function Wd(t,e){return hg(t,e)>En.After}o(Wd,"inRange");var pg=/^[\w\p{L}]$/u;function tn(t,e,n=pg){if(t){if(e>0){const r=e-t.offset,i=t.text.charAt(r);n.test(i)||e--}return Zt(t,e)}}o(tn,"findDeclarationNodeAtOffset");function mg(t,e){if(t){const n=gg(t,!0);if(n&&Uu(n,e))return n;if(lg(t)){const r=t.content.findIndex(i=>!i.hidden);for(let i=r-1;i>=0;i--){const s=t.content[i];if(Uu(s,e))return s}}}}o(mg,"findCommentNode");function Uu(t,e){return Zr(t)&&e.includes(t.tokenType.name)}o(Uu,"isCommentNode");function Zt(t,e){if(Zr(t))return t;if(wr(t)){let n=0,r=t.content.length-1;for(;n<r;){const i=Math.floor((n+r)/2),s=t.content[i];if(s.offset>e)r=i-1;else if(s.end<=e)n=i+1;else return Zt(s,e)}if(n===r)return Zt(t.content[n],e)}}o(Zt,"findLeafNodeAtOffset");function gg(t,e=!0){for(;t.container;){const n=t.container;let r=n.content.indexOf(t);for(;r>0;){r--;const i=n.content[r];if(e||!i.hidden)return i}t=n}}o(gg,"getPreviousNode");function vg(t,e=!0){for(;t.container;){const n=t.container;let r=n.content.indexOf(t);const i=n.content.length-1;for(;r<i;){r++;const s=n.content[r];if(e||!s.hidden)return s}t=n}}o(vg,"getNextNode");function yg(t,e){const n=Tg(t,e);return n?n.parent.content.slice(n.a+1,n.b):[]}o(yg,"getInteriorNodes");function Tg(t,e){const n=qu(t),r=qu(e);let i;for(let s=0;s<n.length&&s<r.length;s++){const a=n[s],c=r[s];if(a.parent===c.parent)i={parent:a.parent,a:a.index,b:c.index};else break}return i}o(Tg,"getCommonParent");function qu(t){const e=[];for(;t.container;){const n=t.container,r=n.content.indexOf(t);e.push({parent:n,index:r}),t=n}return e.reverse()}o(qu,"getParentChain");function Ui(t,e,n,r){const i=[t,e,n,r].reduce(Bd,{});return Hd(i)}o(Ui,"inject");var Gu=Symbol("isProxy");function Jc(t){if(t&&t[Gu])for(const e of Object.values(t))Jc(e);return t}o(Jc,"eagerLoad");function Hd(t,e){const n=new Proxy({},{deleteProperty:()=>!1,get:(r,i)=>Wu(r,i,t,e||n),getOwnPropertyDescriptor:(r,i)=>(Wu(r,i,t,e||n),Object.getOwnPropertyDescriptor(r,i)),has:(r,i)=>i in t,ownKeys:()=>[...Reflect.ownKeys(t),Gu]});return n[Gu]=!0,n}o(Hd,"_inject");var zh=Symbol();function Wu(t,e,n,r){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[e]});if(t[e]===zh)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. See https://langium.org/docs/configuration-services/#resolving-cyclic-dependencies');return t[e]}else if(e in n){const i=n[e];t[e]=zh;try{t[e]=typeof i=="function"?i(r):Hd(i,r)}catch(s){throw t[e]=s instanceof Error?s:void 0,s}return t[e]}else return}o(Wu,"_resolve");function Bd(t,e){if(e){for(const[n,r]of Object.entries(e))if(r!==void 0){const i=t[n];i!==null&&r!==null&&typeof i=="object"&&typeof r=="object"?t[n]=Bd(i,r):t[n]=r}}return t}o(Bd,"_merge");var ds,dt=(ds=class{constructor(e){if(this.map=new Map,e)for(const[n,r]of e)this.add(n,r)}get size(){return Dc.sum(Ne(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,n){if(n===void 0)return this.map.delete(e);{const r=this.map.get(e);if(r){const i=r.indexOf(n);if(i>=0)return r.length===1?this.map.delete(e):r.splice(i,1),!0}return!1}}get(e){var n;return(n=this.map.get(e))!==null&&n!==void 0?n:[]}has(e,n){if(n===void 0)return this.map.has(e);{const r=this.map.get(e);return r?r.indexOf(n)>=0:!1}}add(e,n){return this.map.has(e)?this.map.get(e).push(n):this.map.set(e,[n]),this}addAll(e,n){return this.map.has(e)?this.map.get(e).push(...n):this.map.set(e,Array.from(n)),this}forEach(e){this.map.forEach((n,r)=>n.forEach(i=>e(i,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return Ne(this.map.entries()).flatMap(([e,n])=>n.map(r=>[e,r]))}keys(){return Ne(this.map.keys())}values(){return Ne(this.map.values()).flat()}entriesGroupedByKey(){return Ne(this.map.entries())}},o(ds,"MultiMap"),ds),Au="AbstractRule",Kr="AbstractType",hw="Condition",pw="TypeDefinition",Hu="AbstractElement";function $l(t){return ge.isInstance(t,Hu)}o($l,"isAbstractElement");var Rg="ArrayType";function rc(t){return ge.isInstance(t,Rg)}o(rc,"isArrayType");var _g="Conjunction";function bg(t){return ge.isInstance(t,_g)}o(bg,"isConjunction");var kg="Disjunction";function Sg(t){return ge.isInstance(t,kg)}o(Sg,"isDisjunction");var Ag="Grammar";function Qc(t){return ge.isInstance(t,Ag)}o(Qc,"isGrammar");var mw="GrammarImport";function Kd(t){return ge.isInstance(t,mw)}o(Kd,"isGrammarImport");var gw="InferredType";function Ml(t){return ge.isInstance(t,gw)}o(Ml,"isInferredType");var Zc="Interface";function sn(t){return ge.isInstance(t,Zc)}o(sn,"isInterface");var wg="LiteralCondition";function Cg(t){return ge.isInstance(t,wg)}o(Cg,"isLiteralCondition");var Eg="Negation";function Ng(t){return ge.isInstance(t,Eg)}o(Ng,"isNegation");var Pg="Parameter";function Ig(t){return ge.isInstance(t,Pg)}o(Ig,"isParameter");var Dg="ParameterReference";function Fl(t){return ge.isInstance(t,Dg)}o(Fl,"isParameterReference");var Og="ParserRule";function le(t){return ge.isInstance(t,Og)}o(le,"isParserRule");var Lg="ReferenceType";function ic(t){return ge.isInstance(t,Lg)}o(ic,"isReferenceType");var vw="ReturnType";function xl(t){return ge.isInstance(t,vw)}o(xl,"isReturnType");var $g="SimpleType";function Rn(t){return ge.isInstance(t,$g)}o(Rn,"isSimpleType");var Bu="TerminalRule";function Ke(t){return ge.isInstance(t,Bu)}o(Ke,"isTerminalRule");var el="Type";function Et(t){return ge.isInstance(t,el)}o(Et,"isType");var yw="TypeAttribute";function zd(t){return ge.isInstance(t,yw)}o(zd,"isTypeAttribute");var Mg="UnionType";function er(t){return ge.isInstance(t,Mg)}o(er,"isUnionType");var Fg="Action";function tt(t){return ge.isInstance(t,Fg)}o(tt,"isAction");var xg="Alternatives";function Fn(t){return ge.isInstance(t,xg)}o(Fn,"isAlternatives");var jg="Assignment";function Ye(t){return ge.isInstance(t,jg)}o(Ye,"isAssignment");var Ug="CharacterRange";function Vd(t){return ge.isInstance(t,Ug)}o(Vd,"isCharacterRange");var qg="CrossReference";function gn(t){return ge.isInstance(t,qg)}o(gn,"isCrossReference");var Gg="Group";function At(t){return ge.isInstance(t,Gg)}o(At,"isGroup");var Wg="Keyword";function vt(t){return ge.isInstance(t,Wg)}o(vt,"isKeyword");var Hg="NegatedToken";function Bg(t){return ge.isInstance(t,Hg)}o(Bg,"isNegatedToken");var Kg="RegexToken";function zg(t){return ge.isInstance(t,Kg)}o(zg,"isRegexToken");var Vg="RuleCall";function nt(t){return ge.isInstance(t,Vg)}o(nt,"isRuleCall");var Xg="TerminalAlternatives";function Yg(t){return ge.isInstance(t,Xg)}o(Yg,"isTerminalAlternatives");var Jg="TerminalGroup";function Qg(t){return ge.isInstance(t,Jg)}o(Qg,"isTerminalGroup");var Zg="TerminalRuleCall";function Xd(t){return ge.isInstance(t,Zg)}o(Xd,"isTerminalRuleCall");var ev="UnorderedGroup";function xn(t){return ge.isInstance(t,ev)}o(xn,"isUnorderedGroup");var tv="UntilToken";function nv(t){return ge.isInstance(t,tv)}o(nv,"isUntilToken");var rv="Wildcard";function iv(t){return ge.isInstance(t,rv)}o(iv,"isWildcard");var fs,sv=(fs=class extends cg{getAllTypes(){return["AbstractElement","AbstractRule","AbstractType","Action","Alternatives","ArrayType","Assignment","CharacterRange","Condition","Conjunction","CrossReference","Disjunction","Grammar","GrammarImport","Group","InferredType","Interface","Keyword","LiteralCondition","NamedArgument","NegatedToken","Negation","Parameter","ParameterReference","ParserRule","ReferenceType","RegexToken","ReturnType","RuleCall","SimpleType","TerminalAlternatives","TerminalGroup","TerminalRule","TerminalRuleCall","Type","TypeAttribute","TypeDefinition","UnionType","UnorderedGroup","UntilToken","Wildcard"]}computeIsSubtype(e,n){switch(e){case Fg:return this.isSubtype(Hu,n)||this.isSubtype(Kr,n);case xg:case jg:case Ug:case qg:case Gg:case Wg:case Hg:case Kg:case Vg:case Xg:case Jg:case Zg:case ev:case tv:case rv:return this.isSubtype(Hu,n);case Rg:case Lg:case $g:case Mg:return this.isSubtype(pw,n);case _g:case kg:case wg:case Eg:case Dg:return this.isSubtype(hw,n);case Zc:case el:return this.isSubtype(Kr,n);case Og:return this.isSubtype(Au,n)||this.isSubtype(Kr,n);case Bu:return this.isSubtype(Au,n);default:return!1}}getReferenceType(e){const n=`${e.container.$type}:${e.property}`;switch(n){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return Kr;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return Au;case"Grammar:usedGrammars":return Ag;case"NamedArgument:parameter":case"ParameterReference:parameter":return Pg;case"TerminalRuleCall:rule":return Bu;default:throw new Error(`${n} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"Grammar":return{name:"Grammar",mandatory:[{name:"definesHiddenTokens",type:"boolean"},{name:"hiddenTokens",type:"array"},{name:"imports",type:"array"},{name:"interfaces",type:"array"},{name:"isDeclared",type:"boolean"},{name:"rules",type:"array"},{name:"types",type:"array"},{name:"usedGrammars",type:"array"}]};case"Interface":return{name:"Interface",mandatory:[{name:"attributes",type:"array"},{name:"superTypes",type:"array"}]};case"LiteralCondition":return{name:"LiteralCondition",mandatory:[{name:"true",type:"boolean"}]};case"NamedArgument":return{name:"NamedArgument",mandatory:[{name:"calledByName",type:"boolean"}]};case"ParserRule":return{name:"ParserRule",mandatory:[{name:"definesHiddenTokens",type:"boolean"},{name:"entry",type:"boolean"},{name:"fragment",type:"boolean"},{name:"hiddenTokens",type:"array"},{name:"parameters",type:"array"},{name:"wildcard",type:"boolean"}]};case"TerminalRule":return{name:"TerminalRule",mandatory:[{name:"fragment",type:"boolean"},{name:"hidden",type:"boolean"}]};case"TypeAttribute":return{name:"TypeAttribute",mandatory:[{name:"isOptional",type:"boolean"}]};case"UnionType":return{name:"UnionType",mandatory:[{name:"types",type:"array"}]};case"Alternatives":return{name:"Alternatives",mandatory:[{name:"elements",type:"array"}]};case"CrossReference":return{name:"CrossReference",mandatory:[{name:"deprecatedSyntax",type:"boolean"}]};case"Group":return{name:"Group",mandatory:[{name:"elements",type:"array"}]};case"RuleCall":return{name:"RuleCall",mandatory:[{name:"arguments",type:"array"}]};case"TerminalAlternatives":return{name:"TerminalAlternatives",mandatory:[{name:"elements",type:"array"}]};case"TerminalGroup":return{name:"TerminalGroup",mandatory:[{name:"elements",type:"array"}]};case"UnorderedGroup":return{name:"UnorderedGroup",mandatory:[{name:"elements",type:"array"}]};default:return{name:e,mandatory:[]}}}},o(fs,"LangiumGrammarAstReflection"),fs),ge=new sv;function av(t){for(const[e,n]of Object.entries(t))e.startsWith("$")||(Array.isArray(n)?n.forEach((r,i)=>{ht(r)&&(r.$container=t,r.$containerProperty=e,r.$containerIndex=i)}):ht(n)&&(n.$container=t,n.$containerProperty=e))}o(av,"linkContentToContainer");function Xe(t,e){let n=t;for(;n;){if(e(n))return n;n=n.$container}}o(Xe,"getContainerOfType");function Ce(t){const n=jl(t).$document;if(!n)throw new Error("AST node has no document.");return n}o(Ce,"getDocument");function jl(t){for(;t.$container;)t=t.$container;return t}o(jl,"findRootNode");function hi(t,e){if(!t)throw new Error("Node must be an AstNode.");const n=e==null?void 0:e.range;return new In(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),r=>{for(;r.keyIndex<r.keys.length;){const i=r.keys[r.keyIndex];if(!i.startsWith("$")){const s=t[i];if(ht(s)){if(r.keyIndex++,tl(s,n))return{done:!1,value:s}}else if(Array.isArray(s)){for(;r.arrayIndex<s.length;){const a=r.arrayIndex++,c=s[a];if(ht(c)&&tl(c,n))return{done:!1,value:c}}r.arrayIndex=0}}r.keyIndex++}return Lt})}o(hi,"streamContents");function pt(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new ei(t,n=>hi(n,e))}o(pt,"streamAllContents");function sc(t,e){if(t){if(e!=null&&e.range&&!tl(t,e.range))return new ei(t,()=>[])}else throw new Error("Root node must be an AstNode.");return new ei(t,n=>hi(n,e),{includeRoot:!0})}o(sc,"streamAst");function tl(t,e){var n;if(!e)return!0;const r=(n=t.$cstNode)===null||n===void 0?void 0:n.range;return r?Wd(r,e):!1}o(tl,"isAstNodeInRange");function Yd(t){return new In(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const n=e.keys[e.keyIndex];if(!n.startsWith("$")){const r=t[n];if(Tr(r))return e.keyIndex++,{done:!1,value:{reference:r,container:t,property:n}};if(Array.isArray(r)){for(;e.arrayIndex<r.length;){const i=e.arrayIndex++,s=r[i];if(Tr(s))return{done:!1,value:{reference:s,container:t,property:n,index:i}}}e.arrayIndex=0}}e.keyIndex++}return Lt})}o(Yd,"streamReferences");function ov(t){var e,n;if(t){if("astNode"in t)return uv(t);if(Array.isArray(t))return t.reduce(Jd,void 0);{const r=t,i=cv(r)?lv((n=(e=r==null?void 0:r.root)===null||e===void 0?void 0:e.astNode)!==null&&n!==void 0?n:r==null?void 0:r.astNode):void 0;return mr(r,i)}}else return}o(ov,"getSourceRegion");function cv(t){return typeof t<"u"&&"element"in t&&"text"in t}o(cv,"isCstNode");function lv(t){try{return Ce(t).uri.toString()}catch{return}}o(lv,"getDocumentURIOrUndefined");function uv(t){var e,n;const{astNode:r,property:i,index:s}=t??{},a=(e=r==null?void 0:r.$cstNode)!==null&&e!==void 0?e:r==null?void 0:r.$textRegion;if(!(r===void 0||a===void 0)){if(i===void 0)return mr(a,Oc(r));{const c=o(l=>s!==void 0&&s>-1&&Array.isArray(r[i])?s<l.length?l[s]:void 0:l.reduce(Jd,void 0),"getSingleOrCompoundRegion");if(!((n=a.assignments)===null||n===void 0)&&n[i]){const l=c(a.assignments[i]);return l&&mr(l,Oc(r))}else if(r.$cstNode){const l=c(lc(r.$cstNode,i));return l&&mr(l,Oc(r))}else return}}}o(uv,"getSourceRegionOfAstNode");function Oc(t){var e,n,r,i;return t.$cstNode?(n=(e=Ce(t))===null||e===void 0?void 0:e.uri)===null||n===void 0?void 0:n.toString():t.$textRegion?t.$textRegion.documentURI||((i=(r=new ei(t,s=>s.$container?[s.$container]:[]).find(s=>{var a;return(a=s.$textRegion)===null||a===void 0?void 0:a.documentURI}))===null||r===void 0?void 0:r.$textRegion)===null||i===void 0?void 0:i.documentURI):void 0}o(Oc,"getDocumentURI");function mr(t,e){var n,r;const i={offset:t.offset,end:(n=t.end)!==null&&n!==void 0?n:t.offset+t.length,length:(r=t.length)!==null&&r!==void 0?r:t.end-t.offset};return t.range&&(i.range=t.range),e??(e=t.fileURI),e&&(i.fileURI=e),i}o(mr,"copyDocumentSegment");function Jd(t,e){var n,r;if(t){if(!e)return t&&mr(t)}else return e&&mr(e);const i=(n=t.end)!==null&&n!==void 0?n:t.offset+t.length,s=(r=e.end)!==null&&r!==void 0?r:e.offset+e.length,a=Math.min(t.offset,e.offset),c=Math.max(i,s),l=c-a,u={offset:a,end:c,length:l};if(t.range&&e.range&&(u.range={start:e.range.start.line<t.range.start.line||e.range.start.line===t.range.start.line&&e.range.start.character<t.range.start.character?e.range.start:t.range.start,end:e.range.end.line>t.range.end.line||e.range.end.line===t.range.end.line&&e.range.end.character>t.range.end.character?e.range.end:t.range.end}),t.fileURI||e.fileURI){const d=t.fileURI,f=e.fileURI,p=d&&f&&d!==f?`<unmergable text regions of ${d}, ${f}>`:d??f;u.fileURI=p}return u}o(Jd,"mergeDocumentSegment");var hs,Tw=(hs=class{constructor(e){this.defaultIndentation="    ",this.pendingIndent=!0,this.currentIndents=[],this.recentNonImmediateIndents=[],this.traceData=[],this.lines=[[]],typeof e=="string"?this.defaultIndentation=e:typeof e=="number"&&(this.defaultIndentation="".padStart(e))}get content(){return this.lines.map(e=>e.join("")).join("")}get currentLineNumber(){return this.lines.length-1}get currentLineContent(){return this.lines[this.currentLineNumber].join("")}get currentPosition(){return{offset:this.content.length,line:this.currentLineNumber,character:this.currentLineContent.length}}append(e,n){if(e.length>0){const r=n&&this.currentPosition;this.lines[this.currentLineNumber].push(e),r&&this.indentPendingTraceRegions(r)}}indentPendingTraceRegions(e){for(let n=this.traceData.length-1;n>=0;n--){const r=this.traceData[n];r.targetStart&&r.targetStart.offset===e.offset&&(r.targetStart=this.currentPosition)}}increaseIndent(e){this.currentIndents.push(e),e.indentImmediately||this.recentNonImmediateIndents.push(e)}decreaseIndent(){this.currentIndents.pop()}get relevantIndents(){return this.currentIndents.filter(e=>!this.recentNonImmediateIndents.includes(e))}resetCurrentLine(){this.lines[this.currentLineNumber]=[],this.pendingIndent=!0}addNewLine(){this.pendingIndent=!0,this.lines.push([]),this.recentNonImmediateIndents.length=0}pushTraceRegion(e){const n=dv(e,this.currentPosition,r=>{var i,s;return(s=(i=this.traceData[this.traceData.length-1])===null||i===void 0?void 0:i.children)===null||s===void 0?void 0:s.push(r)});return this.traceData.push(n),n}popTraceRegion(e){const n=this.traceData.pop();return this.assertTrue(n===e,"Trace region mismatch!"),n}getParentTraceSourceFileURI(){var e;for(let n=this.traceData.length-1;n>-1;n--){const r=(e=this.traceData[n].sourceRegion)===null||e===void 0?void 0:e.fileURI;if(r)return r}}assertTrue(e,n){if(!e)throw new Error(n)}},o(hs,"Context"),hs);function dv(t,e,n){const r={sourceRegion:t,targetRegion:void 0,children:[],targetStart:e,complete:i=>{var s,a;return r.targetRegion={offset:r.targetStart.offset,end:i.offset,length:i.offset-r.targetStart.offset,range:{start:{line:r.targetStart.line,character:r.targetStart.character},end:{line:i.line,character:i.character}}},delete r.targetStart,((s=r.children)===null||s===void 0?void 0:s.length)===0&&delete r.children,!((a=r.targetRegion)===null||a===void 0)&&a.length&&n(r),delete r.complete,r}};return r}o(dv,"createTraceRegion");function fv(t,e){const n=new Tw(e),r=n.pushTraceRegion(void 0);Qd(t,n),n.popTraceRegion(r),r.complete&&r.complete(n.currentPosition);const i=r.children&&r.children.length===1?r.children[0]:void 0,s=i==null?void 0:i.targetRegion,a=r.targetRegion;return s&&i.sourceRegion&&s.offset===a.offset&&s.length===a.length?{text:n.content,trace:i}:{text:n.content,trace:r}}o(fv,"processGeneratorNode");function Qd(t,e){typeof t=="string"?hv(t,e):t instanceof sf?pv(t,e):t instanceof an?tf(t,e):t instanceof ac&&mv(t,e)}o(Qd,"processNodeInternal");function Zd(t,e){return typeof t=="string"?t.length!==0:t instanceof an?t.contents.some(n=>Zd(n,e)):t instanceof ac?!(t.ifNotEmpty&&e.currentLineContent.length===0):!1}o(Zd,"hasContent");function hv(t,e){t&&(e.pendingIndent&&ef(e,!1),e.append(t))}o(hv,"processStringNode");function ef(t,e){var n;let r="";for(const i of t.relevantIndents.filter(s=>s.indentEmptyLines||!e))r+=(n=i.indentation)!==null&&n!==void 0?n:t.defaultIndentation;t.append(r,!0),t.pendingIndent=!1}o(ef,"handlePendingIndent");function tf(t,e){let n;const r=ov(t.tracedSource);r&&(n=e.pushTraceRegion(r));for(const i of t.contents)Qd(i,e);if(n){e.popTraceRegion(n);const i=e.getParentTraceSourceFileURI();i&&(r==null?void 0:r.fileURI)===i&&delete r.fileURI,n.complete&&n.complete(e.currentPosition)}}o(tf,"processCompositeNode");function pv(t,e){var n;if(Zd(t,e)){t.indentImmediately&&!e.pendingIndent&&e.append((n=t.indentation)!==null&&n!==void 0?n:e.defaultIndentation,!0);try{e.increaseIndent(t),tf(t,e)}finally{e.decreaseIndent()}}}o(pv,"processIndentNode");function mv(t,e){t.ifNotEmpty&&!gv(e.currentLineContent)?e.resetCurrentLine():(e.pendingIndent&&ef(e,!0),e.append(t.lineDelimiter),e.addNewLine())}o(mv,"processNewLineNode");function gv(t){return t.trimStart()!==""}o(gv,"hasNonWhitespace");Object.freeze("__«SKIP^NEW^LINE^IF^EMPTY»__");var nf=/\r?\n/g,Rw=/\S|$/;function vv(t){const e=t.filter(r=>r.length>0).map(r=>r.search(Rw)),n=e.length===0?0:Math.min(...e);return Math.max(0,n)}o(vv,"findIndentation");function rf(t,...e){const n=Tv(t),r=Rv(t,e,n);return bv(r)}o(rf,"expandToNode");function yv(t,e,n){return(r,...i)=>kv(t,e,n)(rf(r,...i))}o(yv,"expandTracedToNode");function Tv(t){const e=t.join("_").split(nf),n=e.length>1&&e[0].trim().length===0,r=n&&e.length>1&&e[e.length-1].trim().length===0;if(e.length===1||e.length!==0&&e[0].trim().length!==0||e.length===2&&e[1].trim().length===0)return{indentation:0,omitFirstLine:n,omitLastLine:r,trimLastLine:e.length!==1&&e[e.length-1].trim().length===0};{let i=n?e.slice(1):e;i=r?i.slice(0,i.length-1):i,i=i.filter(a=>a.length!==0);const s=vv(i);return{indentation:s,omitFirstLine:n,omitLastLine:r&&(e[e.length-1].length<s||!e[e.length-1].startsWith(i[0].substring(0,s)))}}}o(Tv,"findIndentationAndTemplateStructure");function Rv(t,e,{indentation:n,omitFirstLine:r,omitLastLine:i,trimLastLine:s}){const a=[];t.forEach((u,d)=>{a.push(...u.split(nf).map((f,p)=>p===0||f.length<n?f:f.substring(n)).reduce(d===0?(f,p,h)=>h===0?r?[]:[p]:h===1&&f.length===0?[p]:f.concat(Lc,p):(f,p,h)=>h===0?[p]:f.concat(Lc,p),[]).filter(f=>!(typeof f=="string"&&f.length===0)).concat(qi(e[d])?e[d]:e[d]!==void 0?{content:String(e[d])}:d<e.length?_v:[]))});const c=a.length,l=c!==0?a[c-1]:void 0;return(i||s)&&typeof l=="string"&&l.trim().length===0?r&&c!==1&&a[c-2]===Lc?a.slice(0,c-2):a.slice(0,c-1):a}o(Rv,"splitTemplateLinesAndMergeWithSubstitutions");var Lc={isNewLine:!0},_v={isUndefinedSegment:!0},Vh=o(t=>t===Lc,"isNewLineMarker"),wu=o(t=>t===_v,"isUndefinedSegmentMarker"),_w=o(t=>t.content!==void 0,"isSubstitutionWrapper");function bv(t){return t.reduce((n,r,i)=>wu(r)?n:Vh(r)?{node:i!==0&&(wu(t[i-1])||qi(t[i-1]))||i>1&&typeof t[i-1]=="string"&&(wu(t[i-2])||qi(t[i-2]))?n.node.appendNewLineIfNotEmpty():n.node.appendNewLine()}:(()=>{var s;const a=(i===0||Vh(t[i-1]))&&typeof r=="string"&&r.length!==0?"".padStart(r.length-r.trimStart().length):"",c=_w(r)?r.content:r;let l;return{node:n.indented?n.node:a.length!==0?n.node.indent({indentation:a,indentImmediately:!1,indentedChildren:u=>l=u.append(c)}):n.node.append(c),indented:l??((s=n.indented)===null||s===void 0?void 0:s.append(c))}})(),{node:new an}).node}o(bv,"composeFinalGeneratorNode");var bw=typeof process>"u"?`
`:process.platform==="win32"?`\r
`:`
`;function qi(t){return t instanceof an||t instanceof sf||t instanceof ac}o(qi,"isGeneratorNode");function Gi(t,e){return qi(t)?fv(t,e).text:String(t)}o(Gi,"toString");var oi,an=(oi=class{constructor(...e){this.contents=[],this.append(...e)}isEmpty(){return this.contents.length===0}trace(e,n,r){if(ht(e)){if(this.tracedSource={astNode:e,property:n,index:r},this.tracedSource.property===void 0&&this.tracedSource.index!==void 0&&this.tracedSource.index>-1)throw new Error("Generation support: 'property' argument must not be 'undefined' if a non-negative value is assigned to 'index' in 'CompositeGeneratorNode.trace(...)'.")}else this.tracedSource=e;return this}append(...e){for(const n of e)typeof n=="function"?n(this):n&&this.contents.push(n);return this}appendIf(e,...n){return e?this.append(...n):this}appendNewLine(){return this.append(Ue)}appendNewLineIf(e){return e?this.append(Ue):this}appendNewLineIfNotEmpty(){return this.append(kw)}appendNewLineIfNotEmptyIf(e){return e?this.appendNewLineIfNotEmpty():this}appendTemplate(e,...n){return this.append(rf(e,...n))}appendTemplateIf(e){return e?(n,...r)=>this.appendTemplate(n,...r):()=>this}indent(e){const{indentedChildren:n,indentation:r,indentEmptyLines:i,indentImmediately:s}=Array.isArray(e)||typeof e=="function"?{indentedChildren:e}:typeof e=="object"?e:{},a=new sf(r,s,i);return this.contents.push(a),Array.isArray(n)?a.append(...n):n&&a.append(n),this}appendTraced(e,n,r){return i=>this.append(new oi().trace(e,n,r).append(i))}appendTracedIf(e,n,r,i){return e?this.appendTraced(typeof n=="function"?n():n,r,i):()=>this}appendTracedTemplate(e,n,r){return(i,...s)=>this.append(yv(e,n,r)(i,...s))}appendTracedTemplateIf(e,n,r,i){return e?this.appendTracedTemplate(typeof n=="function"?n():n,r,i):()=>this}},o(oi,"CompositeGeneratorNode"),oi);function kv(t,e,n){return r=>r instanceof an&&r.tracedSource===void 0?r.trace(t,e,n):new an().trace(t,e,n).append(r)}o(kv,"traceToNode");var ps,sf=(ps=class extends an{constructor(e,n=!0,r=!1){super(),this.indentImmediately=!0,this.indentEmptyLines=!1,typeof e=="string"?this.indentation=e:typeof e=="number"&&(this.indentation="".padStart(e)),this.indentImmediately=n,this.indentEmptyLines=r}},o(ps,"IndentNode"),ps),ms,ac=(ms=class{constructor(e,n=!1){this.ifNotEmpty=!1,this.lineDelimiter=e??bw,this.ifNotEmpty=n}},o(ms,"NewLineNode"),ms),Ue=new ac,kw=new ac(void 0,!0);function zn(t){return"referenceType"in t}o(zn,"isReferenceType");function Vn(t){return"elementType"in t}o(Vn,"isArrayType");function lt(t){return"types"in t}o(lt,"isPropertyUnion");function af(t){if(lt(t)){const e=[];for(const n of t.types)e.push(...af(n));return e}else return[t]}o(af,"flattenPropertyUnion");function en(t){return"value"in t}o(en,"isValueType");function zt(t){return"primitive"in t}o(zt,"isPrimitiveType");function vn(t){return"string"in t}o(vn,"isStringType");function hn(t){return t&&"type"in t}o(hn,"isUnionType");function pn(t){return t&&"properties"in t}o(pn,"isInterfaceType");var gs,Sw=(gs=class{constructor(e,n){var r;this.superTypes=new Set,this.subTypes=new Set,this.typeNames=new Set,this.name=e,this.declared=(r=n==null?void 0:n.declared)!==null&&r!==void 0?r:!1,this.dataType=n==null?void 0:n.dataType}toAstTypesString(e){const n=new an;return n.append(`export type ${this.name} = ${nn(this.type,"AstType")};`,Ue),e&&(n.append(Ue),cf(n,this.name)),this.dataType&&Av(n,this),Gi(n)}toDeclaredTypesString(e){const n=new an;return n.append(`type ${ql(this.name,e)} = ${nn(this.type,"DeclaredType")};`,Ue),Gi(n)}},o(gs,"UnionType"),gs),ci,Sv=(ci=class{get superProperties(){return this.getSuperProperties(new Set)}getSuperProperties(e){if(e.has(this.name))return[];e.add(this.name);const n=new Map;for(const r of this.properties)n.set(r.name,r);for(const r of this.interfaceSuperTypes){const i=r.getSuperProperties(e);for(const s of i)n.has(s.name)||n.set(s.name,s)}return Array.from(n.values())}get allProperties(){const e=new Map(this.superProperties.map(r=>[r.name,r]));for(const r of this.subTypes)this.getSubTypeProperties(r,e,new Set);return Array.from(e.values())}getSubTypeProperties(e,n,r){if(r.has(this.name))return;r.add(this.name);const i=pn(e)?e.properties:[];for(const s of i)n.has(s.name)||n.set(s.name,s);for(const s of e.subTypes)this.getSubTypeProperties(s,n,r)}get interfaceSuperTypes(){return Array.from(this.superTypes).filter(e=>e instanceof ci)}constructor(e,n,r){this.superTypes=new Set,this.subTypes=new Set,this.containerTypes=new Set,this.typeNames=new Set,this.declared=!1,this.abstract=!1,this.properties=[],this.name=e,this.declared=n,this.abstract=r}toAstTypesString(e){const n=new an,r=this.interfaceSuperTypes.map(s=>s.name),i=r.length>0?hr([...r]):["AstNode"];return n.append(`export interface ${this.name} extends ${i.join(", ")} {`,Ue),n.indent(s=>{this.containerTypes.size>0&&s.append(`readonly $container: ${hr([...this.containerTypes].map(a=>a.name)).join(" | ")};`,Ue),this.typeNames.size>0&&s.append(`readonly $type: ${hr([...this.typeNames]).map(a=>`'${a}'`).join(" | ")};`,Ue),Ku(s,this.properties,"AstType")}),n.append("}",Ue),e&&(n.append(Ue),cf(n,this.name)),Gi(n)}toDeclaredTypesString(e){const n=new an,r=ql(this.name,e),i=hr(this.interfaceSuperTypes.map(s=>s.name)).join(", ");return n.append(`interface ${r}${i.length>0?` extends ${i}`:""} {`,Ue),n.indent(s=>Ku(s,this.properties,"DeclaredType",e)),n.append("}",Ue),Gi(n)}},o(ci,"InterfaceType"),ci),vs,Aw=(vs=class extends Error{constructor(e,n){super(e),this.name="TypeResolutionError",this.target=n}},o(vs,"TypeResolutionError"),vs);function Wi(t,e){return wn(t,e,new Map)}o(Wi,"isTypeAssignable");function wn(t,e,n){const r=`${Xr(t)}»${Xr(e)}`;let i=n.get(r);return i!==void 0||(n.set(r,!1),i=!1,lt(t)?i=t.types.every(s=>wn(s,e,n)):lt(e)?i=e.types.some(s=>wn(t,s,n)):en(e)&&hn(e.value)?en(t)&&hn(t.value)&&e.value.name===t.value.name?i=!0:i=wn(t,e.value.type,n):zn(t)?i=zn(e)&&wn(t.referenceType,e.referenceType,n):Vn(t)?i=Vn(e)&&wn(t.elementType,e.elementType,n):en(t)?hn(t.value)?i=wn(t.value.type,e,n):en(e)?hn(e.value)?i=wn(t,e.value.type,n):i=of(t.value,e.value,new Set):i=!1:zt(t)?i=zt(e)&&t.primitive===e.primitive:vn(t)&&(i=zt(e)&&e.primitive==="string"||vn(e)&&e.string===t.string),i&&n.set(r,i)),i}o(wn,"isTypeAssignableInternal");function of(t,e,n){const r=t.name;if(n.has(r))return!1;if(n.add(r),t.name===e.name)return!0;for(const i of t.superTypes)if(pn(i)&&of(i,e,n))return!0;return!1}o(of,"isInterfaceAssignable");function Xr(t){if(zn(t))return`@(${Xr(t.referenceType)})}`;if(Vn(t))return`(${Xr(t.elementType)})[]`;if(lt(t)){const e=t.types.map(n=>Xr(n)).join(" | ");return t.types.length<=1?`Union<${e}>`:e}else{if(en(t))return`Value<${t.value.name}>`;if(zt(t))return t.primitive;if(vn(t))return`'${t.string}'`}throw new Error("Invalid type")}o(Xr,"propertyTypeToKeyString");function nn(t,e="AstType"){if(zn(t)){const n=nn(t.referenceType,e);return e==="AstType"?`Reference<${n}>`:`@${$c(t.referenceType,n)}`}else if(Vn(t)){const n=nn(t.elementType,e);return e==="AstType"?`Array<${n}>`:`${$c(t.elementType,n)}[]`}else if(lt(t)){const n=t.types.map(r=>$c(r,nn(r,e)));return hr(n).join(" | ")}else{if(en(t))return t.value.name;if(zt(t))return t.primitive;if(vn(t)){const n=e==="AstType"?"'":'"';return`${n}${t.string}${n}`}}throw new Error("Invalid type")}o(nn,"propertyTypeToString");function $c(t,e){return lt(t)&&(e=`(${e})`),e}o($c,"typeParenthesis");function Ku(t,e,n,r=new Set){function i(s){const a=n==="AstType"?s.name:ql(s.name,r),c=s.optional&&!Ul(s.type),l=nn(s.type,n);return`${a}${c?"?":""}: ${l}`}o(i,"propertyToString"),hr(e,(s,a)=>s.name.localeCompare(a.name)).forEach(s=>t.append(i(s),Ue))}o(Ku,"pushProperties");function Ul(t){return Vn(t)?!0:zn(t)?!1:lt(t)?t.types.every(e=>Ul(e)):zt(t)?t.primitive==="boolean":!1}o(Ul,"isMandatoryPropertyType");function cf(t,e){t.append(`export const ${e} = '${e}';`,Ue),t.append(Ue),t.append(`export function is${e}(item: unknown): item is ${e} {`,Ue),t.indent(n=>n.append(`return reflection.isInstance(item, ${e});`,Ue)),t.append("}",Ue)}o(cf,"pushReflectionInfo");function Av(t,e){switch(e.dataType){case"string":if(nl(e.type)){const n=Array.from(e.subTypes).map(s=>s.name),r=lf(e.type),i=uf(e.type);if(n.length===0&&r.length===0&&i.length===0)bi(t,e.name,`typeof item === '${e.dataType}'`);else{const s=wv(n,r,i);bi(t,e.name,s)}}break;case"number":case"boolean":case"bigint":bi(t,e.name,`typeof item === '${e.dataType}'`);break;case"Date":bi(t,e.name,"item instanceof Date");break;default:return}}o(Av,"pushDataTypeReflectionInfo");function nl(t){let e=!0;if(zt(t))return t.primitive==="string";if(vn(t))return!0;if(lt(t)){for(const n of t.types)if(en(n))if(hn(n.value)){if(!nl(n.value.type))return!1}else return!1;else if(zt(n)){if(n.primitive!=="string"||!n.regex)return!1}else if(lt(n))e=nl(n);else if(!vn(n))return!1}else return!1;return e}o(nl,"containsOnlyStringTypes");function wv(t,e,n){const r=[...t.map(i=>`is${i}(item)`),...e.map(i=>`item === '${i}'`)];if(n.length>0){const i=n.map(s=>`${s}.test(item)`).join(" || ");r.push(`(typeof item === 'string' && (${i}))`)}return r.join(" || ")}o(wv,"createDataTypeCheckerFunctionReturnString");function ql(t,e){return e.has(t)?`^${t}`:t}o(ql,"escapeReservedWords");function lf(t){const e=[];if(vn(t))return[t.string];if(lt(t))for(const n of t.types)vn(n)?e.push(n.string):lt(n)&&e.push(...lf(n));return e}o(lf,"collectStringValuesFromDataType");function uf(t){const e=[];if(zt(t)&&t.primitive==="string"&&t.regex&&e.push(t.regex),lt(t))for(const n of t.types)zt(n)&&n.primitive==="string"&&n.regex?e.push(n.regex):lt(n)&&e.push(...uf(n));return e}o(uf,"collectRegexesFromDataType");function bi(t,e,n){t.append(Ue,`export function is${e}(item: unknown): item is ${e} {`,Ue),t.indent(r=>r.append(`return ${n};`,Ue)),t.append("}",Ue)}o(bi,"generateIsDataTypeFunction");function hr(t,e){return Array.from(new Set(t)).sort(e)}o(hr,"distinctAndSorted");function df(t,e,n,r){const i=new Set;return i.add(t),e.findReferences(t,{}).forEach(a=>{const c=n.getOrCreateDocument(a.sourceUri),l=r.getAstNode(c.parseResult.value,a.sourcePath);sn(l)?(i.add(l),df(l,e,n,r).forEach(d=>i.add(d))):l&&Et(l.$container)&&i.add(l.$container)}),i}o(df,"collectChildrenTypes");function Hi(t){const e=new Set;if(sn(t))e.add(t),t.superTypes.forEach(n=>{if(sn(n.ref)){e.add(n.ref);const r=Hi(n.ref);for(const i of r)e.add(i)}});else if(Et(t)){const n=ff(t.type);for(const r of n){const i=Hi(r);for(const s of i)e.add(s)}}return e}o(Hi,"collectSuperTypes");function ff(t){var e;if(er(t))return t.types.flatMap(n=>ff(n));if(Rn(t)){const n=(e=t.typeRef)===null||e===void 0?void 0:e.ref;if(Et(n)||sn(n))return[n]}return[]}o(ff,"collectUsedTypes");function zu(t,e){return t.interfaces.concat(e.interfaces)}o(zu,"mergeInterfaces");function Vu(t){return t.interfaces.concat(t.unions)}o(Vu,"mergeTypesAndInterfaces");function Cv(t){const e=t.sort((i,s)=>i.name.localeCompare(s.name)).map(i=>({value:i,nodes:[]}));for(const i of e)i.nodes=e.filter(s=>i.value.superTypes.has(s.value.name));const n=[],r=e.filter(i=>i.nodes.length===0);for(;r.length>0;){const i=r.shift();n.includes(i)||(n.push(i),e.filter(s=>s.nodes.includes(i)).forEach(s=>r.push(s)))}return n.map(i=>i.value)}o(Cv,"sortInterfacesTopologically");function Ev(t){return Pi(t,new Set)}o(Ev,"findAstTypes");function Pi(t,e){if(e.has(t))return[];if(e.add(t),lt(t))return t.types.flatMap(n=>Pi(n,e));if(en(t)){const n=t.value;return"type"in n?Pi(n.type,e):[n.name]}else if(Vn(t))return Pi(t.elementType,e);return[]}o(Pi,"findAstTypesInternal");function Gl(t){return typeof t.name=="string"}o(Gl,"isNamed");var ys,Nv=(ys=class{getName(e){if(Gl(e))return e.name}getNameNode(e){return Tn(e.$cstNode,"name")}},o(ys,"DefaultNameProvider"),ys);function ce(t){return t.charCodeAt(0)}o(ce,"cc");function Mc(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}o(Mc,"insertToSet");function Wr(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}o(Wr,"addFlag");function dr(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}o(dr,"ASSERT_EXISTS");function Pv(){throw Error("Internal Error - Should never get here!")}o(Pv,"ASSERT_NEVER_REACH_HERE");function Xu(t){return t.type==="Character"}o(Xu,"isCharacter");var rl=[];for(let t=ce("0");t<=ce("9");t++)rl.push(t);var il=[ce("_")].concat(rl);for(let t=ce("a");t<=ce("z");t++)il.push(t);for(let t=ce("A");t<=ce("Z");t++)il.push(t);var Xh=[ce(" "),ce("\f"),ce(`
`),ce("\r"),ce("	"),ce("\v"),ce("	"),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce(" "),ce("\u2028"),ce("\u2029"),ce(" "),ce(" "),ce("　"),ce("\uFEFF")],ww=/[0-9a-fA-F]/,Ac=/[0-9]/,Cw=/[1-9]/,Ts,Iv=(Ts=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Wr(r,"global");break;case"i":Wr(r,"ignoreCase");break;case"m":Wr(r,"multiLine");break;case"u":Wr(r,"unicode");break;case"y":Wr(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}dr(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return Pv()}quantifier(e=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:i,atMost:s}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;dr(n);break}if(!(e===!0&&n===void 0)&&dr(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),dr(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[ce(`
`),ce("\r"),ce("\u2028"),ce("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=rl;break;case"D":e=rl,n=!0;break;case"s":e=Xh;break;case"S":e=Xh,n=!0;break;case"w":e=il;break;case"W":e=il,n=!0;break}if(dr(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=ce("\f");break;case"n":e=ce(`
`);break;case"r":e=ce("\r");break;case"t":e=ce("	");break;case"v":e=ce("\v");break}if(dr(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:ce("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:ce(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:ce(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,Xu(r)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,Xu(i)){if(i.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:i.value})}else Mc(r.value,e),e.push(ce("-")),Mc(i.value,e)}else Mc(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:ce("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Cw.test(e)===!1)throw Error("Expecting a positive integer");for(;Ac.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Ac.test(e)===!1)throw Error("Expecting an integer");for(;Ac.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:ce(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Ac.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){const s=this.popChar();if(ww.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}},o(Ts,"RegExpParser"),Ts),Rs,Wl=(Rs=class{visitChildren(e){for(const n in e){const r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}},o(Rs,"BaseRegExpVisitor"),Rs),Ew=new Iv,_s,Nw=(_s=class extends Wl{constructor(){super(...arguments),this.isStarting=!0,this.endRegexStack=[],this.multiline=!1}get endRegex(){return this.endRegexStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegex="",this.isStarting=!0,this.endRegexStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexStack=[])}visitCharacter(e){const n=String.fromCharCode(e.value);if(!this.multiline&&n===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexStack=[];else{const r=Rr(n);this.endRegexStack.push(r),this.isStarting&&(this.startRegex+=r)}}visitSet(e){if(!this.multiline){const n=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(n);this.multiline=!!`
`.match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexStack=[];else{const n=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexStack.push(n),this.isStarting&&(this.startRegex+=n)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}},o(_s,"TerminalRegexVisitor"),_s),Cu=new Nw;function Dv(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),Cu.reset(t),Cu.visit(Ew.pattern(t)),Cu.multiline}catch{return!1}}o(Dv,"isMultilineComment");function Yu(t){return(typeof t=="string"?new RegExp(t):t).test(" ")}o(Yu,"isWhitespaceRegExp");function Rr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}o(Rr,"escapeRegExp");function Ov(t){return Array.prototype.map.call(t,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:Rr(e)).join("")}o(Ov,"getCaseInsensitivePattern");function Lv(t,e){const n=$v(t),r=e.match(n);return!!r&&r[0].length>0}o(Lv,"partialMatches");function $v(t){typeof t=="string"&&(t=new RegExp(t));const e=t,n=t.source;let r=0;function i(){let s="",a;function c(u){s+=n.substr(r,u),r+=u}o(c,"appendRaw");function l(u){s+="(?:"+n.substr(r,u)+"|$)",r+=u}for(o(l,"appendOptional");r<n.length;)switch(n[r]){case"\\":switch(n[r+1]){case"c":l(3);break;case"x":l(4);break;case"u":e.unicode?n[r+2]==="{"?l(n.indexOf("}",r)-r+1):l(6):l(2);break;case"p":case"P":e.unicode?l(n.indexOf("}",r)-r+1):l(2);break;case"k":l(n.indexOf(">",r)-r+1);break;default:l(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=r,a=a.exec(n)||[],l(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":c(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=r,a=a.exec(n),a?c(a[0].length):l(1);break;case"(":if(n[r+1]==="?")switch(n[r+2]){case":":s+="(?:",r+=3,s+=i()+"|$)";break;case"=":s+="(?=",r+=3,s+=i()+")";break;case"!":a=r,r+=3,i(),s+=n.substr(a,r-a);break;case"<":switch(n[r+3]){case"=":case"!":a=r,r+=4,i(),s+=n.substr(a,r-a);break;default:c(n.indexOf(">",r)-r+1),s+=i()+"|$)";break}break}else c(1),s+=i()+"|$)";break;case")":return++r,s;default:l(1);break}return s}return o(i,"process"),new RegExp(i(),t.flags)}o($v,"partialRegex");var Mv={};RA(Mv,{URI:()=>Pw,Utils:()=>Iw});var Fv;(()=>{var t={470:i=>{function s(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}o(s,"e");function a(l,u){for(var d,f="",p=0,h=-1,R=0,k=0;k<=l.length;++k){if(k<l.length)d=l.charCodeAt(k);else{if(d===47)break;d=47}if(d===47){if(!(h===k-1||R===1))if(h!==k-1&&R===2){if(f.length<2||p!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var A=f.lastIndexOf("/");if(A!==f.length-1){A===-1?(f="",p=0):p=(f=f.slice(0,A)).length-1-f.lastIndexOf("/"),h=k,R=0;continue}}else if(f.length===2||f.length===1){f="",p=0,h=k,R=0;continue}}u&&(f.length>0?f+="/..":f="..",p=2)}else f.length>0?f+="/"+l.slice(h+1,k):f=l.slice(h+1,k),p=k-h-1;h=k,R=0}else d===46&&R!==-1?++R:R=-1}return f}o(a,"r");var c={resolve:function(){for(var l,u="",d=!1,f=arguments.length-1;f>=-1&&!d;f--){var p;f>=0?p=arguments[f]:(l===void 0&&(l=process.cwd()),p=l),s(p),p.length!==0&&(u=p+"/"+u,d=p.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(l){if(s(l),l.length===0)return".";var u=l.charCodeAt(0)===47,d=l.charCodeAt(l.length-1)===47;return(l=a(l,!u)).length!==0||u||(l="."),l.length>0&&d&&(l+="/"),u?"/"+l:l},isAbsolute:function(l){return s(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,u=0;u<arguments.length;++u){var d=arguments[u];s(d),d.length>0&&(l===void 0?l=d:l+="/"+d)}return l===void 0?".":c.normalize(l)},relative:function(l,u){if(s(l),s(u),l===u||(l=c.resolve(l))===(u=c.resolve(u)))return"";for(var d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var f=l.length,p=f-d,h=1;h<u.length&&u.charCodeAt(h)===47;++h);for(var R=u.length-h,k=p<R?p:R,A=-1,w=0;w<=k;++w){if(w===k){if(R>k){if(u.charCodeAt(h+w)===47)return u.slice(h+w+1);if(w===0)return u.slice(h+w)}else p>k&&(l.charCodeAt(d+w)===47?A=w:w===0&&(A=0));break}var E=l.charCodeAt(d+w);if(E!==u.charCodeAt(h+w))break;E===47&&(A=w)}var P="";for(w=d+A+1;w<=f;++w)w!==f&&l.charCodeAt(w)!==47||(P.length===0?P+="..":P+="/..");return P.length>0?P+u.slice(h+A):(h+=A,u.charCodeAt(h)===47&&++h,u.slice(h))},_makeLong:function(l){return l},dirname:function(l){if(s(l),l.length===0)return".";for(var u=l.charCodeAt(0),d=u===47,f=-1,p=!0,h=l.length-1;h>=1;--h)if((u=l.charCodeAt(h))===47){if(!p){f=h;break}}else p=!1;return f===-1?d?"/":".":d&&f===1?"//":l.slice(0,f)},basename:function(l,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');s(l);var d,f=0,p=-1,h=!0;if(u!==void 0&&u.length>0&&u.length<=l.length){if(u.length===l.length&&u===l)return"";var R=u.length-1,k=-1;for(d=l.length-1;d>=0;--d){var A=l.charCodeAt(d);if(A===47){if(!h){f=d+1;break}}else k===-1&&(h=!1,k=d+1),R>=0&&(A===u.charCodeAt(R)?--R==-1&&(p=d):(R=-1,p=k))}return f===p?p=k:p===-1&&(p=l.length),l.slice(f,p)}for(d=l.length-1;d>=0;--d)if(l.charCodeAt(d)===47){if(!h){f=d+1;break}}else p===-1&&(h=!1,p=d+1);return p===-1?"":l.slice(f,p)},extname:function(l){s(l);for(var u=-1,d=0,f=-1,p=!0,h=0,R=l.length-1;R>=0;--R){var k=l.charCodeAt(R);if(k!==47)f===-1&&(p=!1,f=R+1),k===46?u===-1?u=R:h!==1&&(h=1):u!==-1&&(h=-1);else if(!p){d=R+1;break}}return u===-1||f===-1||h===0||h===1&&u===f-1&&u===d+1?"":l.slice(u,f)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(u,d){var f=d.dir||d.root,p=d.base||(d.name||"")+(d.ext||"");return f?f===d.root?f+p:f+"/"+p:p}(0,l)},parse:function(l){s(l);var u={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return u;var d,f=l.charCodeAt(0),p=f===47;p?(u.root="/",d=1):d=0;for(var h=-1,R=0,k=-1,A=!0,w=l.length-1,E=0;w>=d;--w)if((f=l.charCodeAt(w))!==47)k===-1&&(A=!1,k=w+1),f===46?h===-1?h=w:E!==1&&(E=1):h!==-1&&(E=-1);else if(!A){R=w+1;break}return h===-1||k===-1||E===0||E===1&&h===k-1&&h===R+1?k!==-1&&(u.base=u.name=R===0&&p?l.slice(1,k):l.slice(R,k)):(R===0&&p?(u.name=l.slice(1,h),u.base=l.slice(1,k)):(u.name=l.slice(R,h),u.base=l.slice(R,k)),u.ext=l.slice(h,k)),R>0?u.dir=l.slice(0,R-1):p&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};c.posix=c,i.exports=c}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}o(n,"r"),n.d=(i,s)=>{for(var a in s)n.o(s,a)&&!n.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{var i;if(n.r(r),n.d(r,{URI:()=>A,Utils:()=>W}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var s=navigator.userAgent;i=s.indexOf("Windows")>=0}var a,c,l=(a=o(function(O,_){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])},a(O,_)},"o"),function(O,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function g(){this.constructor=O}o(g,"r"),a(O,_),O.prototype=_===null?Object.create(_):(g.prototype=_.prototype,new g)}),u=/^\w[\w\d+.-]*$/,d=/^\//,f=/^\/\//;function p(O,_){if(!O.scheme&&_)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(O.authority,'", path: "').concat(O.path,'", query: "').concat(O.query,'", fragment: "').concat(O.fragment,'"}'));if(O.scheme&&!u.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!d.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}o(p,"f");var h="",R="/",k=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,A=function(){function O(_,g,y,b,T,m){m===void 0&&(m=!1),typeof _=="object"?(this.scheme=_.scheme||h,this.authority=_.authority||h,this.path=_.path||h,this.query=_.query||h,this.fragment=_.fragment||h):(this.scheme=function(C,D){return C||D?C:"file"}(_,m),this.authority=g||h,this.path=function(C,D){switch(C){case"https":case"http":case"file":D?D[0]!==R&&(D=R+D):D=R}return D}(this.scheme,y||h),this.query=b||h,this.fragment=T||h,p(this,m))}return o(O,"e"),O.isUri=function(_){return _ instanceof O||!!_&&typeof _.authority=="string"&&typeof _.fragment=="string"&&typeof _.path=="string"&&typeof _.query=="string"&&typeof _.scheme=="string"&&typeof _.fsPath=="string"&&typeof _.with=="function"&&typeof _.toString=="function"},Object.defineProperty(O.prototype,"fsPath",{get:function(){return ie(this,!1)},enumerable:!1,configurable:!0}),O.prototype.with=function(_){if(!_)return this;var g=_.scheme,y=_.authority,b=_.path,T=_.query,m=_.fragment;return g===void 0?g=this.scheme:g===null&&(g=h),y===void 0?y=this.authority:y===null&&(y=h),b===void 0?b=this.path:b===null&&(b=h),T===void 0?T=this.query:T===null&&(T=h),m===void 0?m=this.fragment:m===null&&(m=h),g===this.scheme&&y===this.authority&&b===this.path&&T===this.query&&m===this.fragment?this:new E(g,y,b,T,m)},O.parse=function(_,g){g===void 0&&(g=!1);var y=k.exec(_);return y?new E(y[2]||h,L(y[4]||h),L(y[5]||h),L(y[7]||h),L(y[9]||h),g):new E(h,h,h,h,h)},O.file=function(_){var g=h;if(i&&(_=_.replace(/\\/g,R)),_[0]===R&&_[1]===R){var y=_.indexOf(R,2);y===-1?(g=_.substring(2),_=R):(g=_.substring(2,y),_=_.substring(y)||R)}return new E("file",g,_,h,h)},O.from=function(_){var g=new E(_.scheme,_.authority,_.path,_.query,_.fragment);return p(g,!0),g},O.prototype.toString=function(_){return _===void 0&&(_=!1),de(this,_)},O.prototype.toJSON=function(){return this},O.revive=function(_){if(_){if(_ instanceof O)return _;var g=new E(_);return g._formatted=_.external,g._fsPath=_._sep===w?_.fsPath:null,g}return _},O}(),w=i?1:void 0,E=function(O){function _(){var g=O!==null&&O.apply(this,arguments)||this;return g._formatted=null,g._fsPath=null,g}return o(_,"e"),l(_,O),Object.defineProperty(_.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=ie(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),_.prototype.toString=function(g){return g===void 0&&(g=!1),g?de(this,!0):(this._formatted||(this._formatted=de(this,!1)),this._formatted)},_.prototype.toJSON=function(){var g={$mid:1};return this._fsPath&&(g.fsPath=this._fsPath,g._sep=w),this._formatted&&(g.external=this._formatted),this.path&&(g.path=this.path),this.scheme&&(g.scheme=this.scheme),this.authority&&(g.authority=this.authority),this.query&&(g.query=this.query),this.fragment&&(g.fragment=this.fragment),g},_}(A),P=((c={})[58]="%3A",c[47]="%2F",c[63]="%3F",c[35]="%23",c[91]="%5B",c[93]="%5D",c[64]="%40",c[33]="%21",c[36]="%24",c[38]="%26",c[39]="%27",c[40]="%28",c[41]="%29",c[42]="%2A",c[43]="%2B",c[44]="%2C",c[59]="%3B",c[61]="%3D",c[32]="%20",c);function j(O,_,g){for(var y=void 0,b=-1,T=0;T<O.length;T++){var m=O.charCodeAt(T);if(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||m===45||m===46||m===95||m===126||_&&m===47||g&&m===91||g&&m===93||g&&m===58)b!==-1&&(y+=encodeURIComponent(O.substring(b,T)),b=-1),y!==void 0&&(y+=O.charAt(T));else{y===void 0&&(y=O.substr(0,T));var C=P[m];C!==void 0?(b!==-1&&(y+=encodeURIComponent(O.substring(b,T)),b=-1),y+=C):b===-1&&(b=T)}}return b!==-1&&(y+=encodeURIComponent(O.substring(b))),y!==void 0?y:O}o(j,"m");function z(O){for(var _=void 0,g=0;g<O.length;g++){var y=O.charCodeAt(g);y===35||y===63?(_===void 0&&(_=O.substr(0,g)),_+=P[y]):_!==void 0&&(_+=O[g])}return _!==void 0?_:O}o(z,"b");function ie(O,_){var g;return g=O.authority&&O.path.length>1&&O.scheme==="file"?"//".concat(O.authority).concat(O.path):O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?_?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(g=g.replace(/\//g,"\\")),g}o(ie,"C");function de(O,_){var g=_?z:j,y="",b=O.scheme,T=O.authority,m=O.path,C=O.query,D=O.fragment;if(b&&(y+=b,y+=":"),(T||b==="file")&&(y+=R,y+=R),T){var B=T.indexOf("@");if(B!==-1){var ee=T.substr(0,B);T=T.substr(B+1),(B=ee.lastIndexOf(":"))===-1?y+=g(ee,!1,!1):(y+=g(ee.substr(0,B),!1,!1),y+=":",y+=g(ee.substr(B+1),!1,!0)),y+="@"}(B=(T=T.toLowerCase()).lastIndexOf(":"))===-1?y+=g(T,!1,!0):(y+=g(T.substr(0,B),!1,!0),y+=T.substr(B))}if(m){if(m.length>=3&&m.charCodeAt(0)===47&&m.charCodeAt(2)===58)(te=m.charCodeAt(1))>=65&&te<=90&&(m="/".concat(String.fromCharCode(te+32),":").concat(m.substr(3)));else if(m.length>=2&&m.charCodeAt(1)===58){var te;(te=m.charCodeAt(0))>=65&&te<=90&&(m="".concat(String.fromCharCode(te+32),":").concat(m.substr(2)))}y+=g(m,!0,!1)}return C&&(y+="?",y+=g(C,!1,!1)),D&&(y+="#",y+=_?D:j(D,!1,!1)),y}o(de,"A");function ve(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ve(O.substr(3)):O}}o(ve,"w");var ue=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function L(O){return O.match(ue)?O.replace(ue,function(_){return ve(_)}):O}o(L,"_");var W,v=n(470),q=o(function(O,_,g){if(g||arguments.length===2)for(var y,b=0,T=_.length;b<T;b++)!y&&b in _||(y||(y=Array.prototype.slice.call(_,0,b)),y[b]=_[b]);return O.concat(y||Array.prototype.slice.call(_))},"j"),Y=v.posix||v,V="/";(function(O){O.joinPath=function(_){for(var g=[],y=1;y<arguments.length;y++)g[y-1]=arguments[y];return _.with({path:Y.join.apply(Y,q([_.path],g,!1))})},O.resolvePath=function(_){for(var g=[],y=1;y<arguments.length;y++)g[y-1]=arguments[y];var b=_.path,T=!1;b[0]!==V&&(b=V+b,T=!0);var m=Y.resolve.apply(Y,q([b],g,!1));return T&&m[0]===V&&!_.authority&&(m=m.substring(1)),_.with({path:m})},O.dirname=function(_){if(_.path.length===0||_.path===V)return _;var g=Y.dirname(_.path);return g.length===1&&g.charCodeAt(0)===46&&(g=""),_.with({path:g})},O.basename=function(_){return Y.basename(_.path)},O.extname=function(_){return Y.extname(_.path)}})(W||(W={}))})(),Fv=r})();var{URI:Pw,Utils:Iw}=Fv,Nn=Mv;"default"in Nn&&(Nn=Nn.default);var ti=Nn.URI,je;(function(t){t.basename=Nn.Utils.basename,t.dirname=Nn.Utils.dirname,t.extname=Nn.Utils.extname,t.joinPath=Nn.Utils.joinPath,t.resolvePath=Nn.Utils.resolvePath;function e(r,i){return(r==null?void 0:r.toString())===(i==null?void 0:i.toString())}o(e,"equals"),t.equals=e;function n(r,i){const s=typeof r=="string"?r:r.path,a=typeof i=="string"?i:i.path,c=s.split("/").filter(p=>p.length>0),l=a.split("/").filter(p=>p.length>0);let u=0;for(;u<c.length&&c[u]===l[u];u++);const d="../".repeat(c.length-u),f=l.slice(u).join("/");return d+f}o(n,"relative"),t.relative=n})(je=je||(je={}));je.equals;je.relative;var wc,Dw=o(()=>wc??(wc=Of(`{"$type":"Grammar","isDeclared":true,"name":"LangiumGrammar","rules":[{"$type":"ParserRule","name":"Grammar","entry":true,"definition":{"$type":"Group","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"isDeclared","operator":"?=","terminal":{"$type":"Keyword","value":"grammar"}},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"with"},{"$type":"Assignment","feature":"usedGrammars","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"usedGrammars","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}}],"cardinality":"*"}],"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Assignment","feature":"definesHiddenTokens","operator":"?=","terminal":{"$type":"Keyword","value":"hidden"}},{"$type":"Keyword","value":"("},{"$type":"Group","elements":[{"$type":"Assignment","feature":"hiddenTokens","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"hiddenTokens","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}}],"cardinality":"*"}],"cardinality":"?"},{"$type":"Keyword","value":")"}],"cardinality":"?"}],"cardinality":"?"},{"$type":"Assignment","feature":"imports","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"rules","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"interfaces","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"Assignment","feature":"types","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"+"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Interface","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"interface"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"extends"},{"$type":"Assignment","feature":"superTypes","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"superTypes","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}}],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"SchemaType","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"{"},{"$type":"Assignment","feature":"attributes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},"cardinality":"*"},{"$type":"Keyword","value":"}"},{"$type":"Keyword","value":";","cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TypeAttribute","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@58"},"arguments":[]}},{"$type":"Assignment","feature":"isOptional","operator":"?=","terminal":{"$type":"Keyword","value":"?"},"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Keyword","value":";","cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TypeDefinition","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"UnionType","inferredType":{"$type":"InferredType","name":"TypeDefinition"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"UnionType"},"feature":"types","operator":"+="},{"$type":"Group","elements":[{"$type":"Keyword","value":"|"},{"$type":"Assignment","feature":"types","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ArrayType","inferredType":{"$type":"InferredType","name":"TypeDefinition"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"ArrayType"},"feature":"elementType","operator":"="},{"$type":"Keyword","value":"["},{"$type":"Keyword","value":"]"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ReferenceType","inferredType":{"$type":"InferredType","name":"TypeDefinition"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"ReferenceType"}},{"$type":"Keyword","value":"@"},{"$type":"Assignment","feature":"referenceType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"SimpleType","inferredType":{"$type":"InferredType","name":"TypeDefinition"},"definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"("},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":")"}]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"SimpleType"}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"typeRef","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Assignment","feature":"primitiveType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"stringType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@60"},"arguments":[]}}]}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PrimitiveType","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"string"},{"$type":"Keyword","value":"number"},{"$type":"Keyword","value":"boolean"},{"$type":"Keyword","value":"Date"},{"$type":"Keyword","value":"bigint"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Type","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"type"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},{"$type":"Keyword","value":"="},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Keyword","value":";","cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AbstractRule","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@46"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"GrammarImport","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"import"},{"$type":"Assignment","feature":"path","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@60"},"arguments":[]}},{"$type":"Keyword","value":";","cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParserRule","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"entry","operator":"?=","terminal":{"$type":"Keyword","value":"entry"}},{"$type":"Assignment","feature":"fragment","operator":"?=","terminal":{"$type":"Keyword","value":"fragment"}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"wildcard","operator":"?=","terminal":{"$type":"Keyword","value":"*"}},{"$type":"Group","elements":[{"$type":"Keyword","value":"returns"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"returnType","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Assignment","feature":"dataType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Assignment","feature":"inferredType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[{"$type":"NamedArgument","value":{"$type":"LiteralCondition","true":false},"calledByName":false}]}}],"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Assignment","feature":"definesHiddenTokens","operator":"?=","terminal":{"$type":"Keyword","value":"hidden"}},{"$type":"Keyword","value":"("},{"$type":"Group","elements":[{"$type":"Assignment","feature":"hiddenTokens","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"hiddenTokens","operator":"+=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}}],"cardinality":"*"}],"cardinality":"?"},{"$type":"Keyword","value":")"}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"definition","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Keyword","value":";"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"InferredType","parameters":[{"$type":"Parameter","name":"imperative"}],"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","guardCondition":{"$type":"ParameterReference","parameter":{"$ref":"#/rules@14/parameters@0"}},"elements":[{"$type":"Keyword","value":"infer"}]},{"$type":"Group","guardCondition":{"$type":"Negation","value":{"$type":"ParameterReference","parameter":{"$ref":"#/rules@14/parameters@0"}}},"elements":[{"$type":"Keyword","value":"infers"}]}]},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"wildcard":false},{"$type":"ParserRule","name":"RuleNameAndParams","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"<"},{"$type":"Group","elements":[{"$type":"Assignment","feature":"parameters","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"parameters","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}}],"cardinality":"*"}],"cardinality":"?"},{"$type":"Keyword","value":">"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Parameter","definition":{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Alternatives","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Alternatives"},"feature":"elements","operator":"+="},{"$type":"Group","elements":[{"$type":"Keyword","value":"|"},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ConditionalBranch","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Group"}},{"$type":"Keyword","value":"<"},{"$type":"Assignment","feature":"guardCondition","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":">"},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"cardinality":"+"}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"UnorderedGroup","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"UnorderedGroup"},"feature":"elements","operator":"+="},{"$type":"Group","elements":[{"$type":"Keyword","value":"&"},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Group"},"feature":"elements","operator":"+="},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AbstractToken","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AbstractTokenWithCardinality","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@37"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]}]},{"$type":"Assignment","feature":"cardinality","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"?"},{"$type":"Keyword","value":"*"},{"$type":"Keyword","value":"+"}]},"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Action","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Action"}},{"$type":"Keyword","value":"{"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Assignment","feature":"inferredType","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[{"$type":"NamedArgument","value":{"$type":"LiteralCondition","true":true},"calledByName":false}]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"."},{"$type":"Assignment","feature":"feature","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@58"},"arguments":[]}},{"$type":"Assignment","feature":"operator","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"="},{"$type":"Keyword","value":"+="}]}},{"$type":"Keyword","value":"current"}],"cardinality":"?"},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AbstractTerminal","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@25"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@26"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@43"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@35"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@36"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@44"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Keyword","definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@60"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RuleCall","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rule","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":"<"},{"$type":"Assignment","feature":"arguments","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@27"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"arguments","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@27"},"arguments":[]}}],"cardinality":"*"},{"$type":"Keyword","value":">"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NamedArgument","definition":{"$type":"Group","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"parameter","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@16"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Assignment","feature":"calledByName","operator":"?=","terminal":{"$type":"Keyword","value":"="}}],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LiteralCondition","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"true","operator":"?=","terminal":{"$type":"Keyword","value":"true"}},{"$type":"Keyword","value":"false"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Disjunction","inferredType":{"$type":"InferredType","name":"Condition"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@30"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Disjunction"},"feature":"left","operator":"="},{"$type":"Keyword","value":"|"},{"$type":"Assignment","feature":"right","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@30"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Conjunction","inferredType":{"$type":"InferredType","name":"Condition"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@31"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Conjunction"},"feature":"left","operator":"="},{"$type":"Keyword","value":"&"},{"$type":"Assignment","feature":"right","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@31"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Negation","inferredType":{"$type":"InferredType","name":"Condition"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@32"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Negation"}},{"$type":"Keyword","value":"!"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@31"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Atom","inferredType":{"$type":"InferredType","name":"Condition"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@34"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@33"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParenthesizedCondition","inferredType":{"$type":"InferredType","name":"Condition"},"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"("},{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},{"$type":"Keyword","value":")"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParameterReference","definition":{"$type":"Assignment","feature":"parameter","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@16"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PredicatedKeyword","inferredType":{"$type":"InferredType","name":"Keyword"},"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"=>"},{"$type":"Keyword","value":"->"}]},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@60"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PredicatedRuleCall","inferredType":{"$type":"InferredType","name":"RuleCall"},"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"=>"},{"$type":"Keyword","value":"->"}]},{"$type":"Assignment","feature":"rule","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@11"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Keyword","value":"<"},{"$type":"Assignment","feature":"arguments","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@27"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"arguments","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@27"},"arguments":[]}}],"cardinality":"*"},{"$type":"Keyword","value":">"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Assignment","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Assignment"}},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"=>"},{"$type":"Keyword","value":"->"}],"cardinality":"?"},{"$type":"Assignment","feature":"feature","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@58"},"arguments":[]}},{"$type":"Assignment","feature":"operator","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"+="},{"$type":"Keyword","value":"="},{"$type":"Keyword","value":"?="}]}},{"$type":"Assignment","feature":"terminal","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@38"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AssignableTerminal","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@25"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@26"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@39"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@41"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParenthesizedAssignableElement","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"("},{"$type":"RuleCall","rule":{"$ref":"#/rules@40"},"arguments":[]},{"$type":"Keyword","value":")"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"AssignableAlternatives","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@38"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Alternatives"},"feature":"elements","operator":"+="},{"$type":"Group","elements":[{"$type":"Keyword","value":"|"},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@38"},"arguments":[]}}],"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CrossReference","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"CrossReference"}},{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/types@0"},"deprecatedSyntax":false}},{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"deprecatedSyntax","operator":"?=","terminal":{"$type":"Keyword","value":"|"}},{"$type":"Keyword","value":":"}]},{"$type":"Assignment","feature":"terminal","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@42"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CrossReferenceableTerminal","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@25"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@26"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParenthesizedElement","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"("},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]},{"$type":"Keyword","value":")"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PredicatedGroup","inferredType":{"$type":"InferredType","name":"Group"},"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"=>"},{"$type":"Keyword","value":"->"}]},{"$type":"Keyword","value":"("},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Keyword","value":")"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ReturnType","definition":{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalRule","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"hidden","operator":"?=","terminal":{"$type":"Keyword","value":"hidden"},"cardinality":"?"},{"$type":"Keyword","value":"terminal"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"fragment","operator":"?=","terminal":{"$type":"Keyword","value":"fragment"}},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"returns"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@45"},"arguments":[]}}],"cardinality":"?"}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"definition","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@47"},"arguments":[]}},{"$type":"Keyword","value":";"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalAlternatives","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@48"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"TerminalAlternatives"},"feature":"elements","operator":"+="},{"$type":"Keyword","value":"|"},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@48"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalGroup","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@49"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"TerminalGroup"},"feature":"elements","operator":"+="},{"$type":"Assignment","feature":"elements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@49"},"arguments":[]},"cardinality":"+"}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalToken","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@50"},"arguments":[]},{"$type":"Assignment","feature":"cardinality","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"?"},{"$type":"Keyword","value":"*"},{"$type":"Keyword","value":"+"}]},"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalTokenElement","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@57"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@52"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@51"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@53"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@54"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@55"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@56"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ParenthesizedTerminalElement","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"("},{"$type":"Assignment","feature":"lookahead","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"?="},{"$type":"Keyword","value":"?!"}]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@47"},"arguments":[]},{"$type":"Keyword","value":")"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TerminalRuleCall","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"TerminalRuleCall"}},{"$type":"Assignment","feature":"rule","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@46"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]},"deprecatedSyntax":false}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NegatedToken","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"NegatedToken"}},{"$type":"Keyword","value":"!"},{"$type":"Assignment","feature":"terminal","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@50"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"UntilToken","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"UntilToken"}},{"$type":"Keyword","value":"->"},{"$type":"Assignment","feature":"terminal","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@50"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RegexToken","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"RegexToken"}},{"$type":"Assignment","feature":"regex","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@61"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Wildcard","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"Wildcard"}},{"$type":"Keyword","value":"."}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CharacterRange","inferredType":{"$type":"InferredType","name":"AbstractElement"},"definition":{"$type":"Group","elements":[{"$type":"Action","inferredType":{"$type":"InferredType","name":"CharacterRange"}},{"$type":"Assignment","feature":"left","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@25"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":".."},{"$type":"Assignment","feature":"right","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@25"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"FeatureName","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"current"},{"$type":"Keyword","value":"entry"},{"$type":"Keyword","value":"extends"},{"$type":"Keyword","value":"false"},{"$type":"Keyword","value":"fragment"},{"$type":"Keyword","value":"grammar"},{"$type":"Keyword","value":"hidden"},{"$type":"Keyword","value":"import"},{"$type":"Keyword","value":"interface"},{"$type":"Keyword","value":"returns"},{"$type":"Keyword","value":"terminal"},{"$type":"Keyword","value":"true"},{"$type":"Keyword","value":"type"},{"$type":"Keyword","value":"infer"},{"$type":"Keyword","value":"infers"},{"$type":"Keyword","value":"with"},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@59"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ID","definition":{"$type":"RegexToken","regex":"/\\\\^?[_a-zA-Z][\\\\w_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"(\\\\\\\\.|[^\\"\\\\\\\\])*\\"|'(\\\\\\\\.|[^'\\\\\\\\])*'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"RegexLiteral","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\/(?![*+?])(?:[^\\\\r\\\\n\\\\[/\\\\\\\\]|\\\\\\\\.|\\\\[(?:[^\\\\r\\\\n\\\\]\\\\\\\\]|\\\\\\\\.)*\\\\])+\\\\/[a-z]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/\\\\s+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\//"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SL_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\/\\\\/[^\\\\n\\\\r]*/"},"fragment":false}],"types":[{"$type":"Type","name":"AbstractType","type":{"$type":"UnionType","types":[{"$type":"SimpleType","typeRef":{"$ref":"#/rules@1"}},{"$type":"SimpleType","typeRef":{"$ref":"#/rules@10"}},{"$type":"SimpleType","typeRef":{"$ref":"#/rules@23/definition/elements@0"}},{"$type":"SimpleType","typeRef":{"$ref":"#/rules@13"}}]}}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"interfaces":[],"usedGrammars":[]}`)),"LangiumGrammarGrammar"),Yh;(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Yh||(Yh={}));var Ju;(function(t){function e(n){return typeof n=="string"}o(e,"is"),t.is=e})(Ju||(Ju={}));var Jh;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(Jh||(Jh={}));var sl;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}o(e,"is"),t.is=e})(sl||(sl={}));var $t;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=sl.MAX_VALUE),i===Number.MAX_VALUE&&(i=sl.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&N.uinteger(i.line)&&N.uinteger(i.character)}o(n,"is"),t.is=n})($t||($t={}));var Ve;(function(t){function e(r,i,s,a){if(N.uinteger(r)&&N.uinteger(i)&&N.uinteger(s)&&N.uinteger(a))return{start:$t.create(r,i),end:$t.create(s,a)};if($t.is(r)&&$t.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(s,", ").concat(a,"]"))}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&$t.is(i.start)&&$t.is(i.end)}o(n,"is"),t.is=n})(Ve||(Ve={}));var al;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&Ve.is(i.range)&&(N.string(i.uri)||N.undefined(i.uri))}o(n,"is"),t.is=n})(al||(al={}));var Qh;(function(t){function e(r,i,s,a){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:a}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&Ve.is(i.targetRange)&&N.string(i.targetUri)&&Ve.is(i.targetSelectionRange)&&(Ve.is(i.originSelectionRange)||N.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(Qh||(Qh={}));var Qu;(function(t){function e(r,i,s,a){return{red:r,green:i,blue:s,alpha:a}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&N.numberRange(i.red,0,1)&&N.numberRange(i.green,0,1)&&N.numberRange(i.blue,0,1)&&N.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(Qu||(Qu={}));var Zh;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&Ve.is(i.range)&&Qu.is(i.color)}o(n,"is"),t.is=n})(Zh||(Zh={}));var ep;(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&N.string(i.label)&&(N.undefined(i.textEdit)||Dn.is(i))&&(N.undefined(i.additionalTextEdits)||N.typedArray(i.additionalTextEdits,Dn.is))}o(n,"is"),t.is=n})(ep||(ep={}));var tp;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(tp||(tp={}));var np;(function(t){function e(r,i,s,a,c,l){var u={startLine:r,endLine:i};return N.defined(s)&&(u.startCharacter=s),N.defined(a)&&(u.endCharacter=a),N.defined(c)&&(u.kind=c),N.defined(l)&&(u.collapsedText=l),u}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&N.uinteger(i.startLine)&&N.uinteger(i.startLine)&&(N.undefined(i.startCharacter)||N.uinteger(i.startCharacter))&&(N.undefined(i.endCharacter)||N.uinteger(i.endCharacter))&&(N.undefined(i.kind)||N.string(i.kind))}o(n,"is"),t.is=n})(np||(np={}));var Zu;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&al.is(i.location)&&N.string(i.message)}o(n,"is"),t.is=n})(Zu||(Zu={}));var rp;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(rp||(rp={}));var Ii;(function(t){t.Unnecessary=1,t.Deprecated=2})(Ii||(Ii={}));var ip;(function(t){function e(n){var r=n;return N.objectLiteral(r)&&N.string(r.href)}o(e,"is"),t.is=e})(ip||(ip={}));var ol;(function(t){function e(r,i,s,a,c,l){var u={range:r,message:i};return N.defined(s)&&(u.severity=s),N.defined(a)&&(u.code=a),N.defined(c)&&(u.source=c),N.defined(l)&&(u.relatedInformation=l),u}o(e,"create"),t.create=e;function n(r){var i,s=r;return N.defined(s)&&Ve.is(s.range)&&N.string(s.message)&&(N.number(s.severity)||N.undefined(s.severity))&&(N.integer(s.code)||N.string(s.code)||N.undefined(s.code))&&(N.undefined(s.codeDescription)||N.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(N.string(s.source)||N.undefined(s.source))&&(N.undefined(s.relatedInformation)||N.typedArray(s.relatedInformation,Zu.is))}o(n,"is"),t.is=n})(ol||(ol={}));var ni;(function(t){function e(r,i){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];var c={title:r,command:i};return N.defined(s)&&s.length>0&&(c.arguments=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.string(i.title)&&N.string(i.command)}o(n,"is"),t.is=n})(ni||(ni={}));var Dn;(function(t){function e(s,a){return{range:s,newText:a}}o(e,"replace"),t.replace=e;function n(s,a){return{range:{start:s,end:s},newText:a}}o(n,"insert"),t.insert=n;function r(s){return{range:s,newText:""}}o(r,"del"),t.del=r;function i(s){var a=s;return N.objectLiteral(a)&&N.string(a.newText)&&Ve.is(a.range)}o(i,"is"),t.is=i})(Dn||(Dn={}));var Yr;(function(t){function e(r,i,s){var a={label:r};return i!==void 0&&(a.needsConfirmation=i),s!==void 0&&(a.description=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&N.string(i.label)&&(N.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(N.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(Yr||(Yr={}));var ft;(function(t){function e(n){var r=n;return N.string(r)}o(e,"is"),t.is=e})(ft||(ft={}));var Wn;(function(t){function e(s,a,c){return{range:s,newText:a,annotationId:c}}o(e,"replace"),t.replace=e;function n(s,a,c){return{range:{start:s,end:s},newText:a,annotationId:c}}o(n,"insert"),t.insert=n;function r(s,a){return{range:s,newText:"",annotationId:a}}o(r,"del"),t.del=r;function i(s){var a=s;return Dn.is(a)&&(Yr.is(a.annotationId)||ft.is(a.annotationId))}o(i,"is"),t.is=i})(Wn||(Wn={}));var cl;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&ll.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(cl||(cl={}));var Bi;(function(t){function e(r,i,s){var a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&N.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||N.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||N.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ft.is(i.annotationId))}o(n,"is"),t.is=n})(Bi||(Bi={}));var Ki;(function(t){function e(r,i,s,a){var c={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(c.options=s),a!==void 0&&(c.annotationId=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&N.string(i.oldUri)&&N.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||N.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||N.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ft.is(i.annotationId))}o(n,"is"),t.is=n})(Ki||(Ki={}));var zi;(function(t){function e(r,i,s){var a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&N.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||N.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||N.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ft.is(i.annotationId))}o(n,"is"),t.is=n})(zi||(zi={}));var ed;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return N.string(i.kind)?Bi.is(i)||Ki.is(i)||zi.is(i):cl.is(i)}))}o(e,"is"),t.is=e})(ed||(ed={}));var Cc=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,s;if(r===void 0?i=Dn.insert(e,n):ft.is(r)?(s=r,i=Wn.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Wn.insert(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,n,r){var i,s;if(r===void 0?i=Dn.replace(e,n):ft.is(r)?(s=r,i=Wn.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Wn.replace(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Dn.del(e):ft.is(n)?(i=n,r=Wn.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Wn.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),sp=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(ft.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}();(function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new sp(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(cl.is(r)){var i=new Cc(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Cc(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(ll.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],s={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Cc(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Cc(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new sp,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Yr.is(n)||ft.is(n)?i=n:r=n;var s,a;if(i===void 0?s=Bi.create(e,r):(a=ft.is(i)?i:this._changeAnnotations.manage(i),s=Bi.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;Yr.is(r)||ft.is(r)?s=r:i=r;var a,c;if(s===void 0?a=Ki.create(e,n,i):(c=ft.is(s)?s:this._changeAnnotations.manage(s),a=Ki.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(a),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Yr.is(n)||ft.is(n)?i=n:r=n;var s,a;if(i===void 0?s=zi.create(e,r):(a=ft.is(i)?i:this._changeAnnotations.manage(i),s=zi.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t})();var ap;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.string(i.uri)}o(n,"is"),t.is=n})(ap||(ap={}));var op;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.string(i.uri)&&N.integer(i.version)}o(n,"is"),t.is=n})(op||(op={}));var ll;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.string(i.uri)&&(i.version===null||N.integer(i.version))}o(n,"is"),t.is=n})(ll||(ll={}));var cp;(function(t){function e(r,i,s,a){return{uri:r,languageId:i,version:s,text:a}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.string(i.uri)&&N.string(i.languageId)&&N.integer(i.version)&&N.string(i.text)}o(n,"is"),t.is=n})(cp||(cp={}));var td;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e})(td||(td={}));var Vi;(function(t){function e(n){var r=n;return N.objectLiteral(n)&&td.is(r.kind)&&N.string(r.value)}o(e,"is"),t.is=e})(Vi||(Vi={}));var nd;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(nd||(nd={}));var lp;(function(t){t.PlainText=1,t.Snippet=2})(lp||(lp={}));var up;(function(t){t.Deprecated=1})(up||(up={}));var dp;(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&N.string(i.newText)&&Ve.is(i.insert)&&Ve.is(i.replace)}o(n,"is"),t.is=n})(dp||(dp={}));var fp;(function(t){t.asIs=1,t.adjustIndentation=2})(fp||(fp={}));var hp;(function(t){function e(n){var r=n;return r&&(N.string(r.detail)||r.detail===void 0)&&(N.string(r.description)||r.description===void 0)}o(e,"is"),t.is=e})(hp||(hp={}));var pp;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(pp||(pp={}));var mp;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(mp||(mp={}));var ul;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return N.string(i)||N.objectLiteral(i)&&N.string(i.language)&&N.string(i.value)}o(n,"is"),t.is=n})(ul||(ul={}));var gp;(function(t){function e(n){var r=n;return!!r&&N.objectLiteral(r)&&(Vi.is(r.contents)||ul.is(r.contents)||N.typedArray(r.contents,ul.is))&&(n.range===void 0||Ve.is(n.range))}o(e,"is"),t.is=e})(gp||(gp={}));var vp;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(vp||(vp={}));var yp;(function(t){function e(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a={label:n};return N.defined(r)&&(a.documentation=r),N.defined(i)?a.parameters=i:a.parameters=[],a}o(e,"create"),t.create=e})(yp||(yp={}));var Tp;(function(t){t.Text=1,t.Read=2,t.Write=3})(Tp||(Tp={}));var Rp;(function(t){function e(n,r){var i={range:n};return N.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(Rp||(Rp={}));var _p;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(_p||(_p={}));var bp;(function(t){t.Deprecated=1})(bp||(bp={}));var kp;(function(t){function e(n,r,i,s,a){var c={name:n,kind:r,location:{uri:s,range:i}};return a&&(c.containerName=a),c}o(e,"create"),t.create=e})(kp||(kp={}));var Sp;(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}o(e,"create"),t.create=e})(Sp||(Sp={}));var Ap;(function(t){function e(r,i,s,a,c,l){var u={name:r,detail:i,kind:s,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}o(e,"create"),t.create=e;function n(r){var i=r;return i&&N.string(i.name)&&N.number(i.kind)&&Ve.is(i.range)&&Ve.is(i.selectionRange)&&(i.detail===void 0||N.string(i.detail))&&(i.deprecated===void 0||N.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(Ap||(Ap={}));var wp;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(wp||(wp={}));var dl;(function(t){t.Invoked=1,t.Automatic=2})(dl||(dl={}));var Cp;(function(t){function e(r,i,s){var a={diagnostics:r};return i!=null&&(a.only=i),s!=null&&(a.triggerKind=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.typedArray(i.diagnostics,ol.is)&&(i.only===void 0||N.typedArray(i.only,N.string))&&(i.triggerKind===void 0||i.triggerKind===dl.Invoked||i.triggerKind===dl.Automatic)}o(n,"is"),t.is=n})(Cp||(Cp={}));var Ep;(function(t){function e(r,i,s){var a={title:r},c=!0;return typeof i=="string"?(c=!1,a.kind=i):ni.is(i)?a.command=i:a.edit=i,c&&s!==void 0&&(a.kind=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return i&&N.string(i.title)&&(i.diagnostics===void 0||N.typedArray(i.diagnostics,ol.is))&&(i.kind===void 0||N.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ni.is(i.command))&&(i.isPreferred===void 0||N.boolean(i.isPreferred))&&(i.edit===void 0||ed.is(i.edit))}o(n,"is"),t.is=n})(Ep||(Ep={}));var Np;(function(t){function e(r,i){var s={range:r};return N.defined(i)&&(s.data=i),s}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&Ve.is(i.range)&&(N.undefined(i.command)||ni.is(i.command))}o(n,"is"),t.is=n})(Np||(Np={}));var Pp;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&N.uinteger(i.tabSize)&&N.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(Pp||(Pp={}));var Ip;(function(t){function e(r,i,s){return{range:r,target:i,data:s}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&Ve.is(i.range)&&(N.undefined(i.target)||N.string(i.target))}o(n,"is"),t.is=n})(Ip||(Ip={}));var Dp;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&Ve.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Dp||(Dp={}));var Op;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Op||(Op={}));var Lp;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Lp||(Lp={}));var $p;(function(t){function e(n){var r=n;return N.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}o(e,"is"),t.is=e})($p||($p={}));var Mp;(function(t){function e(r,i){return{range:r,text:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ve.is(i.range)&&N.string(i.text)}o(n,"is"),t.is=n})(Mp||(Mp={}));var Fp;(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ve.is(i.range)&&N.boolean(i.caseSensitiveLookup)&&(N.string(i.variableName)||i.variableName===void 0)}o(n,"is"),t.is=n})(Fp||(Fp={}));var xp;(function(t){function e(r,i){return{range:r,expression:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!=null&&Ve.is(i.range)&&(N.string(i.expression)||i.expression===void 0)}o(n,"is"),t.is=n})(xp||(xp={}));var jp;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}o(e,"create"),t.create=e;function n(r){var i=r;return N.defined(i)&&Ve.is(r.stoppedLocation)}o(n,"is"),t.is=n})(jp||(jp={}));var rd;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}o(e,"is"),t.is=e})(rd||(rd={}));var id;(function(t){function e(r){return{value:r}}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&(i.tooltip===void 0||N.string(i.tooltip)||Vi.is(i.tooltip))&&(i.location===void 0||al.is(i.location))&&(i.command===void 0||ni.is(i.command))}o(n,"is"),t.is=n})(id||(id={}));var Up;(function(t){function e(r,i,s){var a={position:r,label:i};return s!==void 0&&(a.kind=s),a}o(e,"create"),t.create=e;function n(r){var i=r;return N.objectLiteral(i)&&$t.is(i.position)&&(N.string(i.label)||N.typedArray(i.label,id.is))&&(i.kind===void 0||rd.is(i.kind))&&i.textEdits===void 0||N.typedArray(i.textEdits,Dn.is)&&(i.tooltip===void 0||N.string(i.tooltip)||Vi.is(i.tooltip))&&(i.paddingLeft===void 0||N.boolean(i.paddingLeft))&&(i.paddingRight===void 0||N.boolean(i.paddingRight))}o(n,"is"),t.is=n})(Up||(Up={}));var qp;(function(t){function e(n){var r=n;return N.objectLiteral(r)&&Ju.is(r.uri)&&N.string(r.name)}o(e,"is"),t.is=e})(qp||(qp={}));var Gp;(function(t){function e(s,a,c,l){return new Ow(s,a,c,l)}o(e,"create"),t.create=e;function n(s){var a=s;return!!(N.defined(a)&&N.string(a.uri)&&(N.undefined(a.languageId)||N.string(a.languageId))&&N.uinteger(a.lineCount)&&N.func(a.getText)&&N.func(a.positionAt)&&N.func(a.offsetAt))}o(n,"is"),t.is=n;function r(s,a){for(var c=s.getText(),l=i(a,function(R,k){var A=R.range.start.line-k.range.start.line;return A===0?R.range.start.character-k.range.start.character:A}),u=c.length,d=l.length-1;d>=0;d--){var f=l[d],p=s.offsetAt(f.range.start),h=s.offsetAt(f.range.end);if(h<=u)c=c.substring(0,p)+f.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(s,a){if(s.length<=1)return s;var c=s.length/2|0,l=s.slice(0,c),u=s.slice(c);i(l,a),i(u,a);for(var d=0,f=0,p=0;d<l.length&&f<u.length;){var h=a(l[d],u[f]);h<=0?s[p++]=l[d++]:s[p++]=u[f++]}for(;d<l.length;)s[p++]=l[d++];for(;f<u.length;)s[p++]=u[f++];return s}o(i,"mergeSort")})(Gp||(Gp={}));var Ow=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return $t.create(0,e);for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var a=r-1;return $t.create(a,e-n[a])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),N;(function(t){var e=Object.prototype.toString;function n(h){return typeof h<"u"}o(n,"defined"),t.defined=n;function r(h){return typeof h>"u"}o(r,"undefined"),t.undefined=r;function i(h){return h===!0||h===!1}o(i,"boolean"),t.boolean=i;function s(h){return e.call(h)==="[object String]"}o(s,"string"),t.string=s;function a(h){return e.call(h)==="[object Number]"}o(a,"number"),t.number=a;function c(h,R,k){return e.call(h)==="[object Number]"&&R<=h&&h<=k}o(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}o(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}o(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}o(d,"func"),t.func=d;function f(h){return h!==null&&typeof h=="object"}o(f,"objectLiteral"),t.objectLiteral=f;function p(h,R){return Array.isArray(h)&&h.every(R)}o(p,"typedArray"),t.typedArray=p})(N||(N={}));var sd=_e(Zn(),1);function xv(){return new Promise(t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)})}o(xv,"delayNextTick");var Wp=0,Lw=10,jv=Symbol("OperationCancelled");function Hl(t){return t===jv}o(Hl,"isOperationCancelled");async function gt(t){if(t===sd.CancellationToken.None)return;const e=Date.now();if(e-Wp>=Lw&&(Wp=e,await xv()),t.isCancellationRequested)throw jv}o(gt,"interruptAndCheck");var bs,$w=(bs=class{constructor(){this.previousAction=Promise.resolve(),this.previousTokenSource=new sd.CancellationTokenSource}lock(e){this.cancel();const n=new sd.CancellationTokenSource;return this.previousTokenSource=n,this.previousAction=this.previousAction.then(()=>e(n.token).catch(r=>{Hl(r)||console.error("Error: ",r)}))}cancel(){this.previousTokenSource.cancel()}},o(bs,"MutexLock"),bs);function Wt(t){return{code:t}}o(Wt,"diagnosticData");var Di;(function(t){t.all=["fast","slow","built-in"]})(Di=Di||(Di={}));var ks,Mw=(ks=class{constructor(e){this.entries=new dt,this.reflection=e.shared.AstReflection}register(e,n=this,r="fast"){if(r==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,s]of Object.entries(e)){const a=s;if(Array.isArray(a))for(const c of a){const l={check:this.wrapValidationException(c,n),category:r};this.addEntry(i,l)}else if(typeof a=="function"){const c={check:this.wrapValidationException(a,n),category:r};this.addEntry(i,c)}}}wrapValidationException(e,n){return async(r,i,s)=>{try{await e.call(n,r,i,s)}catch(a){if(Hl(a))throw a;console.error("An error occurred during validation:",a);const c=a instanceof Error?a.message:String(a);a instanceof Error&&a.stack&&console.error(a.stack),i("error","An error occurred during validation: "+c,{node:r})}}}addEntry(e,n){if(e==="AstNode"){this.entries.add("AstNode",n);return}for(const r of this.reflection.getAllSubTypes(e))this.entries.add(r,n)}getChecks(e,n){let r=Ne(this.entries.get(e)).concat(this.entries.get("AstNode"));return n&&(r=r.filter(i=>n.includes(i.category))),r.map(i=>i.check)}},o(ks,"ValidationRegistry"),ks);function Uv(t,e){const n={unions:[],interfaces:[]};for(const r of t){const i=[];for(const c of r.attributes)i.push({name:c.name,optional:c.isOptional,astNodes:new Set([c]),type:gr(c.type)});const s=new Set;for(const c of r.superTypes)c.ref&&s.add(tr(c.ref));const a={name:r.name,declared:!0,abstract:!1,properties:i,superTypes:s,subTypes:new Set};n.interfaces.push(a)}for(const r of e){const i={name:r.name,declared:!0,type:gr(r.type),superTypes:new Set,subTypes:new Set};n.unions.push(i)}return n}o(Uv,"collectDeclaredTypes");function gr(t){if(rc(t))return{elementType:gr(t.elementType)};if(ic(t))return{referenceType:gr(t.referenceType)};if(er(t))return{types:t.types.map(gr)};if(Rn(t)){let e;if(t.primitiveType)return e=t.primitiveType,{primitive:e};if(t.stringType)return e=t.stringType,{string:e};if(t.typeRef){const n=t.typeRef.ref,r=Bn(n);if(r)return Bl(r)?{primitive:r}:{value:r}}}return{primitive:"unknown"}}o(gr,"typeDefinitionToPropertyType");function ri(t){return"referenceType"in t}o(ri,"isPlainReferenceType");function fl(t){return"elementType"in t}o(fl,"isPlainArrayType");function hf(t){return"types"in t}o(hf,"isPlainPropertyUnion");function hl(t){return"value"in t}o(hl,"isPlainValueType");function qv(t){return"primitive"in t}o(qv,"isPlainPrimitiveType");function Gv(t){return"string"in t}o(Gv,"isPlainStringType");function Wv(t){const e=new Map,n=new Map;for(const r of t.interfaces){const i=new Sv(r.name,r.declared,r.abstract);e.set(r.name,i)}for(const r of t.unions){const i=new Sw(r.name,{declared:r.declared,dataType:r.dataType});n.set(r.name,i)}for(const r of t.interfaces){const i=e.get(r.name);for(const s of r.superTypes){const a=e.get(s)||n.get(s);a&&i.superTypes.add(a)}for(const s of r.subTypes){const a=e.get(s)||n.get(s);a&&i.subTypes.add(a)}for(const s of r.properties){const a=Hv(s,e,n);i.properties.push(a)}}for(const r of t.unions){const i=n.get(r.name);i.type=Jr(r.type,i,e,n)}return{interfaces:Array.from(e.values()),unions:Array.from(n.values())}}o(Wv,"plainToTypes");function Hv(t,e,n){return{name:t.name,optional:t.optional,astNodes:t.astNodes,type:Jr(t.type,void 0,e,n)}}o(Hv,"plainToProperty");function Jr(t,e,n,r){if(fl(t))return{elementType:Jr(t.elementType,e,n,r)};if(ri(t))return{referenceType:Jr(t.referenceType,void 0,n,r)};if(hf(t))return{types:t.types.map(i=>Jr(i,e,n,r))};if(Gv(t))return{string:t.string};if(qv(t))return{primitive:t.primitive,regex:t.regex};if(hl(t)){const i=n.get(t.value)||r.get(t.value);return i?(e&&e.subTypes.add(i),{value:i}):{primitive:"unknown"}}else throw new Error("Invalid property type")}o(Jr,"plainToPropertyType");function pf(t,e){const n=Xi(t),r=Xi(e);for(const i of r)Bv(n,i)||n.push(i);return n.length===1?n[0]:{types:n}}o(pf,"mergePropertyTypes");function Bv(t,e){return t.some(n=>pl(n,e))}o(Bv,"includesType");function pl(t,e){return fl(t)&&fl(e)?pl(t.elementType,e.elementType):ri(t)&&ri(e)?pl(t.referenceType,e.referenceType):hl(t)&&hl(e)?t.value===e.value:!1}o(pl,"typeEquals");function Xi(t){return hf(t)?t.types.flatMap(e=>Xi(e)):[t]}o(Xi,"flattenPlainType");function Kv(t){const e=t.validation.ValidationRegistry,n=t.validation.LangiumGrammarValidator,r={Action:[n.checkAssignmentReservedName],AbstractRule:n.checkRuleName,Assignment:[n.checkAssignmentWithFeatureName,n.checkAssignmentToFragmentRule,n.checkAssignmentTypes,n.checkAssignmentReservedName],ParserRule:[n.checkParserRuleDataType,n.checkRuleParametersUsed,n.checkParserRuleReservedName],TerminalRule:[n.checkTerminalRuleReturnType,n.checkHiddenTerminalRule,n.checkEmptyTerminalRule],InferredType:n.checkTypeReservedName,Keyword:n.checkKeyword,UnorderedGroup:n.checkUnorderedGroup,Grammar:[n.checkGrammarName,n.checkEntryGrammarRule,n.checkUniqueRuleName,n.checkUniqueTypeName,n.checkUniqueImportedRules,n.checkDuplicateImportedGrammar,n.checkGrammarHiddenTokens,n.checkGrammarForUnusedRules,n.checkGrammarTypeInfer,n.checkClashingTerminalNames],GrammarImport:n.checkPackageImport,CharacterRange:n.checkInvalidCharacterRange,Interface:[n.checkTypeReservedName,n.checkInterfacePropertyTypes],Type:[n.checkTypeReservedName],TypeAttribute:n.checkTypeReservedName,RuleCall:[n.checkUsedHiddenTerminalRule,n.checkUsedFragmentTerminalRule,n.checkRuleCallParameters],TerminalRuleCall:n.checkUsedHiddenTerminalRule,CrossReference:[n.checkCrossReferenceSyntax,n.checkCrossRefNameAssignment,n.checkCrossRefTerminalType,n.checkCrossRefType,n.checkCrossReferenceToTypeUnion],SimpleType:n.checkFragmentsInTypes,ReferenceType:n.checkReferenceTypeUnion,RegexToken:[n.checkInvalidRegexFlags,n.checkDirectlyUsedRegexFlags]};e.register(r,n)}o(Kv,"registerValidationChecks");var Se;(function(t){t.GrammarNameUppercase="grammar-name-uppercase",t.RuleNameUppercase="rule-name-uppercase",t.HiddenGrammarTokens="hidden-grammar-tokens",t.UseRegexTokens="use-regex-tokens",t.EntryRuleTokenSyntax="entry-rule-token-syntax",t.CrossRefTokenSyntax="cross-ref-token-syntax",t.UnnecessaryFileExtension="unnecessary-file-extension",t.InvalidReturns="invalid-returns",t.InvalidInfers="invalid-infers",t.MissingInfer="missing-infer",t.MissingReturns="missing-returns",t.SuperfluousInfer="superfluous-infer",t.OptionalUnorderedGroup="optional-unordered-group"})(Se=Se||(Se={}));var Ss,Fw=(Ss=class{constructor(e){this.references=e.references.References,this.documents=e.shared.workspace.LangiumDocuments}checkGrammarName(e,n){if(e.name){const r=e.name.substring(0,1);r.toUpperCase()!==r&&n("warning","Grammar name should start with an upper case letter.",{node:e,property:"name",data:Wt(Se.GrammarNameUppercase)})}}checkEntryGrammarRule(e,n){if(e.isDeclared&&!e.name)return;const r=e.rules.filter(i=>le(i)&&i.entry);if(e.isDeclared&&r.length===0){const i=e.rules.find(s=>le(s)&&!Jt(s));i?n("error","The grammar is missing an entry parser rule. This rule can be an entry one.",{node:i,property:"name",data:Wt(Se.EntryRuleTokenSyntax)}):n("error","This grammar is missing an entry parser rule.",{node:e,property:"name"})}else!e.isDeclared&&r.length>=1?r.forEach(i=>n("error","Cannot declare entry rules for unnamed grammars.",{node:i,property:"name"})):r.length>1?r.forEach(i=>n("error","The entry rule has to be unique.",{node:i,property:"name"})):r.length===1&&Jt(r[0])&&n("error","The entry rule cannot be a data type rule.",{node:r[0],property:"name"})}checkUniqueRuleName(e,n){const r=o(i=>Ne(i.rules).filter(s=>!Hr(s)),"extractor");this.checkUniqueName(e,n,r,"rule")}checkUniqueTypeName(e,n){const r=o(i=>Ne(i.types).concat(i.interfaces),"extractor");this.checkUniqueName(e,n,r,"type")}checkUniqueName(e,n,r,i){const s=new dt;r(e).forEach(l=>s.add(l.name,l));for(const[,l]of s.entriesGroupedByKey())l.length>1&&l.forEach(u=>{n("error",`A ${i}'s name has to be unique.`,{node:u,property:"name"})});const a=new Set,c=ki(this.documents,e);for(const l of c)r(l).forEach(u=>a.add(u.name));for(const l of s.keys())a.has(l)&&s.get(l).forEach(d=>{n("error",`A ${i} with the name '${d.name}' already exists in an imported grammar.`,{node:d,property:"name"})})}checkDuplicateImportedGrammar(e,n){const r=new dt;for(const i of e.imports){const s=_r(this.documents,i);s&&r.add(s,i)}for(const[,i]of r.entriesGroupedByKey())i.length>1&&i.forEach((s,a)=>{a>0&&n("warning","The grammar is already being directly imported.",{node:s,tags:[Ii.Unnecessary]})})}checkUniqueImportedRules(e,n){const r=new Map;for(const s of e.imports){const a=ki(this.documents,s);r.set(s,a)}const i=new dt;for(const s of e.imports){const a=r.get(s);for(const c of e.imports){if(s===c)continue;const l=r.get(c),u=this.getDuplicateExportedRules(a,l);for(const d of u)i.add(s,d)}}for(const s of e.imports){const a=i.get(s);a.length>0&&n("error","Some rules exported by this grammar are also included in other imports: "+Ne(a).distinct().join(", "),{node:s,property:"path"})}}getDuplicateExportedRules(e,n){const i=e.filter(c=>!n.includes(c)).flatMap(c=>c.rules),s=n.flatMap(c=>c.rules),a=new Set;for(const c of i){const l=c.name;for(const u of s){const d=u.name;l===d&&a.add(u.name)}}return a}checkGrammarTypeInfer(e,n){var r,i,s;const a=new Set;for(const l of e.types)a.add(l.name);for(const l of e.interfaces)a.add(l.name);for(const l of ki(this.documents,e))l.types.forEach(u=>a.add(u.name)),l.interfaces.forEach(u=>a.add(u.name));for(const l of e.rules.filter(le)){if(Hr(l))continue;const u=Jt(l),d=!l.returnType&&!l.dataType,f=Bn(l);if(!u&&f&&a.has(f)===d){if((d||((r=l.returnType)===null||r===void 0?void 0:r.ref)!==void 0)&&l.inferredType===void 0)n("error",c(f,d),{node:l,property:"name",data:Wt(Se.MissingReturns)});else if(d||((i=l.returnType)===null||i===void 0?void 0:i.ref)!==void 0){const p=Pn(l.inferredType.$cstNode,"infers");n("error",c(f,d),{node:l.inferredType,property:"name",data:{code:Se.InvalidInfers,actionSegment:Kt(p)}})}}else if(u&&d){const p=Pn(l.$cstNode,"infer");n("error","Data type rules cannot infer a type.",{node:l,property:"inferredType",data:{code:Se.InvalidInfers,actionSegment:Kt(p)}})}}for(const l of pt(e).filter(tt)){const u=this.getActionType(l);if(u){const d=!!l.inferredType,f=Bn(l);if(l.type&&f&&a.has(f)===d){const p=d?Pn(l.$cstNode,"infer"):Pn(l.$cstNode,"{");n("error",c(f,d),{node:l,property:"type",data:{code:d?Se.SuperfluousInfer:Se.MissingInfer,actionSegment:Kt(p)}})}else if(u&&f&&a.has(f)&&d&&l.$cstNode){const p=Tn((s=l.inferredType)===null||s===void 0?void 0:s.$cstNode,"name"),h=Pn(l.$cstNode,"{");p&&h&&n("error",`${f} is a declared type and cannot be redefined.`,{node:l,property:"type",data:{code:Se.SuperfluousInfer,actionRange:{start:h.range.end,end:p.range.start}}})}}}function c(l,u){return u?`The type '${l}' is already explicitly declared and cannot be inferred.`:`The type '${l}' is not explicitly declared and must be inferred.`}o(c,"getMessage")}getActionType(e){var n;if(e.type)return(n=e.type)===null||n===void 0?void 0:n.ref;if(e.inferredType)return e.inferredType}checkGrammarHiddenTokens(e,n){e.definesHiddenTokens&&n("error","Hidden terminals are declared at the terminal definition.",{node:e,property:"definesHiddenTokens",data:Wt(Se.HiddenGrammarTokens)})}checkHiddenTerminalRule(e,n){e.hidden&&e.fragment&&n("error","Cannot use terminal fragments as hidden tokens.",{node:e,property:"hidden"})}checkEmptyTerminalRule(e,n){try{const r=Cr(e);new RegExp(r).test("")&&n("error","This terminal could match an empty string.",{node:e,property:"name"})}catch{}}checkInvalidRegexFlags(e,n){const r=e.regex;if(r){const i=r.lastIndexOf("/"),s=r.substring(i+1),a="gmy",l=a+"isu",u=new Set,d=new Set;for(let p=0;p<s.length;p++){const h=s.charAt(p);l.includes(h)?a.includes(h)&&d.add(h):u.add(h)}const f=this.getFlagRange(e);f&&(u.size>0?n("error",`'${Array.from(u).join("")}' ${u.size>1?"are":"is"} not valid regular expression flag${u.size>1?"s":""}.`,{node:e,range:f}):d.size>0&&n("warning",`'${Array.from(d).join("")}' regular expression flag${d.size>1?"s":""} will be ignored by Langium.`,{node:e,range:f}))}}checkDirectlyUsedRegexFlags(e,n){if(!Ke(e.$container)){const r=this.getFlagRange(e);r&&n("warning","Regular expression flags are only applied if the terminal is not a composition",{node:e,range:r})}}getFlagRange(e){const n=Tn(e.$cstNode,"regex");if(!n||!e.regex)return;const r=e.regex,i=r.lastIndexOf("/")+1;return{start:{line:n.range.end.line,character:n.range.end.character-r.length+i},end:n.range.end}}checkUsedHiddenTerminalRule(e,n){const r=Xe(e,i=>Ke(i)||le(i));if(r){if("hidden"in r&&r.hidden)return;const i=e.rule.ref;Ke(i)&&i.hidden&&n("error","Cannot use hidden terminal in non-hidden rule",{node:e,property:"rule"})}}checkUsedFragmentTerminalRule(e,n){const r=e.rule.ref;Ke(r)&&r.fragment&&Xe(e,le)&&n("error","Cannot use terminal fragments as part of parser rules.",{node:e,property:"rule"})}checkCrossReferenceSyntax(e,n){e.deprecatedSyntax&&n("error","'|' is deprecated. Please, use ':' instead.",{node:e,property:"deprecatedSyntax",data:Wt(Se.CrossRefTokenSyntax)})}checkPackageImport(e,n){_r(this.documents,e)===void 0?n("error","Import cannot be resolved.",{node:e,property:"path"}):e.path.endsWith(".langium")&&n("warning","Imports do not need file extensions.",{node:e,property:"path",data:Wt(Se.UnnecessaryFileExtension)})}checkInvalidCharacterRange(e,n){if(e.right){const r="Character ranges cannot use more than one character";let i=!1;e.left.value.length>1&&(i=!0,n("error",r,{node:e.left,property:"value"})),e.right.value.length>1&&(i=!0,n("error",r,{node:e.right,property:"value"})),i||n("hint","Consider using regex instead of character ranges",{node:e,data:Wt(Se.UseRegexTokens)})}}checkGrammarForUnusedRules(e,n){const r=Vl(e,!0);for(const i of e.rules)Ke(i)&&i.hidden||Hr(i)||r.has(i)||n("hint","This rule is declared but never referenced.",{node:i,property:"name",tags:[Ii.Unnecessary]})}checkClashingTerminalNames(e,n){const r=new dt,i=new Set;for(const u of e.rules)Ke(u)&&u.name&&r.add(u.name,u),le(u)&&pt(u).filter(vt).forEach(f=>i.add(f.value));const s=new dt,a=new dt;for(const u of e.imports){const d=ki(this.documents,u);for(const f of d)for(const p of f.rules)Ke(p)&&p.name?s.add(p.name,u):le(p)&&p.name&&pt(p).filter(vt).forEach(R=>a.add(R.value,u))}for(const u of r.values())if(i.has(u.name))n("error","Terminal name clashes with existing keyword.",{node:u,property:"name"});else if(a.has(u.name)){const d=a.get(u.name);n("error",`Terminal name clashes with imported keyword from "${d[0].path}".`,{node:u,property:"name"})}const c=new dt;for(const u of i)for(const d of s.get(u))c.add(d,u);for(const[u,d]of c.entriesGroupedByKey())d.length>0&&n("error",`Imported terminals (${d.join(", ")}) clash with locally defined keywords.`,{node:u,property:"path"});const l=new dt;for(const[u,d]of s.entriesGroupedByKey()){const f=a.get(u);f.length>0&&d.filter(p=>!f.includes(p)).forEach(p=>l.add(p,u))}for(const[u,d]of l.entriesGroupedByKey())d.length>0&&n("error",`Imported terminals (${d.join(", ")}) clash with imported keywords.`,{node:u,property:"path"})}checkRuleName(e,n){if(e.name&&!Hr(e)){const r=e.name.substring(0,1);r.toUpperCase()!==r&&n("warning","Rule name should start with an upper case letter.",{node:e,property:"name",data:Wt(Se.RuleNameUppercase)})}}checkTypeReservedName(e,n){this.checkReservedName(e,"name",n)}checkAssignmentReservedName(e,n){this.checkReservedName(e,"feature",n)}checkParserRuleReservedName(e,n){e.inferredType||this.checkReservedName(e,"name",n)}checkReservedName(e,n,r){const i=e[n];typeof i=="string"&&xw.has(i)&&r("error",`'${i}' is a reserved name of the JavaScript runtime.`,{node:e,property:n})}checkKeyword(e,n){Xe(e,le)&&(e.value.length===0?n("error","Keywords cannot be empty.",{node:e}):e.value.trim().length===0?n("error","Keywords cannot only consist of whitespace characters.",{node:e}):/\s/g.test(e.value)&&n("warning","Keywords should not contain whitespace characters.",{node:e}))}checkUnorderedGroup(e,n){e.elements.forEach(r=>{yn(r.cardinality)&&n("error","Optional elements in Unordered groups are currently not supported",{node:r,data:Wt(Se.OptionalUnorderedGroup)})})}checkRuleParametersUsed(e,n){const r=e.parameters;if(r.length>0){const i=pt(e).filter(Fl);for(const s of r)i.some(a=>a.parameter.ref===s)||n("hint",`Parameter '${s.name}' is unused.`,{node:s,tags:[Ii.Unnecessary]})}}checkParserRuleDataType(e,n){if(Hr(e))return;const r=Vv(e),i=Jt(e);!r&&i?n("error","This parser rule does not create an object. Add a primitive return type or an action to the start of the rule to force object instantiation.",{node:e,property:"name"}):r&&!i&&n("error","Normal parser rules are not allowed to return a primitive value. Use a datatype rule for that.",{node:e,property:e.dataType?"dataType":"returnType"})}checkAssignmentToFragmentRule(e,n){e.terminal&&nt(e.terminal)&&le(e.terminal.rule.ref)&&e.terminal.rule.ref.fragment&&n("error",`Cannot use fragment rule '${e.terminal.rule.ref.name}' for assignment of property '${e.feature}'.`,{node:e,property:"terminal"})}checkAssignmentTypes(e,n){if(!e.terminal)return;let r;pt(e.terminal).map(s=>gn(s)?"ref":"other").find(s=>r?s!==r:(r=s,!1))&&n("error",this.createMixedTypeError(e.feature),{node:e,property:"terminal"})}checkInterfacePropertyTypes(e,n){for(const r of e.attributes)if(r.type){const i=gr(r.type),s=Xi(i);let a=!1,c=!1;for(const l of s)ri(l)?a=!0:ri(l)||(c=!0);a&&c&&n("error",this.createMixedTypeError(r.name),{node:r,property:"type"})}}createMixedTypeError(e){return`Mixing a cross-reference with other types is not supported. Consider splitting property "${e}" into two or more different properties.`}checkTerminalRuleReturnType(e,n){var r;!((r=e.type)===null||r===void 0)&&r.name&&!Bl(e.type.name)&&n("error","Terminal rules can only return primitive types like 'string', 'boolean', 'number', 'Date' or 'bigint'.",{node:e.type,property:"name"})}checkRuleCallParameters(e,n){const r=e.rule.ref;if(le(r)){const i=r.parameters.length,s=e.arguments.length;i!==s&&n("error",`Rule '${r.name}' expects ${i} arguments, but got ${s}.`,{node:e})}else Ke(r)&&e.arguments.length>0&&n("error","Terminal rules do not accept any arguments",{node:e})}checkCrossRefNameAssignment(e,n){!e.terminal&&e.type.ref&&!Jl(e.type.ref)&&n("error","Cannot infer terminal or data type rule for cross-reference.",{node:e,property:"type"})}checkCrossRefTerminalType(e,n){var r;const i=e.terminal;if(nt(i)){const s=i.rule.ref;le(s)&&!Jt(s)?n("error","Parser rules cannot be used for cross-references.",{node:i,property:"rule"}):le(s)&&!Yv(s)?n("error","Data type rules for cross-references must be of type string.",{node:i,property:"rule"}):Ke(s)&&(!((r=s.type)===null||r===void 0)&&r.name)&&s.type.name!=="string"&&n("error","Terminal rules for cross-references must be of type string.",{node:i,property:"rule"})}}checkCrossRefType(e,n){const r=this.checkReferenceToRuleButNotType(e==null?void 0:e.type);r&&n("error",r,{node:e,property:"type"})}checkCrossReferenceToTypeUnion(e,n){if(Et(e.type.ref)&&er(e.type.ref.type)){const r=mf(e.type.ref.type);r.length>0&&n("error",`Cross-reference on type union is only valid if all alternatives are AST nodes. ${r.join(", ")} ${r.length>1?"are":"is"} not ${r.length>1?"":"an "}AST node${r.length>1?"s":""}.`,{node:e,property:"type"})}}checkFragmentsInTypes(e,n){var r,i;le((r=e.typeRef)===null||r===void 0?void 0:r.ref)&&(!((i=e.typeRef)===null||i===void 0)&&i.ref.fragment)&&n("error","Cannot use rule fragments in types.",{node:e,property:"typeRef"})}checkReferenceTypeUnion(e,n){Rn(e.referenceType)||n("error","Only direct rule references are allowed in reference types.",{node:e,property:"referenceType"})}checkReferenceToRuleButNotType(e){if(e&&le(e.ref)&&!Jt(e.ref)&&(e.ref.returnType||e.ref.inferredType)){const n=Bn(e.ref);if(n)return`Use the rule type '${n}' instead of the typed rule name '${e.ref.name}' for cross-references.`}}checkAssignmentWithFeatureName(e,n){e.feature==="name"&&gn(e.terminal)&&n("warning",'The "name" property is not recommended for cross-references.',{node:e,property:"feature"})}},o(Ss,"LangiumGrammarValidator"),Ss);function Hr(t){return!t.definition||!t.definition.$cstNode||t.definition.$cstNode.length===0}o(Hr,"isEmptyRule");var xw=new Set(["Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","Map","Set","WeakMap","WeakSet","Error","AggregateError","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","BigInt","RegExp","Number","Object","Function","Symbol","String","Math","NaN","Infinity","isFinite","isNaN","Buffer","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","globalThis","decodeURIComponent","decodeURI","encodeURIComponent","encodeURI","parseInt","parseFloat","Promise","Generator","GeneratorFunction","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Reflect","Proxy","Date","Intl","eval","undefined"]);function mf(t){const e=[];return t.types.forEach(n=>{var r;Rn(n)&&(!((r=n.typeRef)===null||r===void 0)&&r.ref?Et(n.typeRef.ref)&&(er(n.typeRef.ref.type)?e.push(...mf(n.typeRef.ref.type)):e.push(n.typeRef.ref.name)):n.stringType?e.push(`"${n.stringType}"`):n.primitiveType&&e.push(n.primitiveType))}),Array.from(new Set(e))}o(mf,"checkTypeUnionContainsOnlyParseRules");function yn(t,e){return t==="?"||t==="*"||At(e)&&!!e.guardCondition}o(yn,"isOptionalCardinality");function zv(t){return t==="*"||t==="+"}o(zv,"isArrayCardinality");function Jt(t){return gf(t,new Set)}o(Jt,"isDataTypeRule");function gf(t,e){if(e.has(t))return!0;e.add(t);for(const n of pt(t))if(nt(n)){if(!n.rule.ref||le(n.rule.ref)&&!gf(n.rule.ref,e))return!1}else{if(Ye(n))return!1;if(tt(n))return!1}return!!t.definition}o(gf,"isDataTypeRuleInternal");function Vv(t){var e;const n=(e=t.returnType)===null||e===void 0?void 0:e.ref;return t.dataType!==void 0||Et(n)&&Xv(n)}o(Vv,"hasDataTypeReturn");function Xv(t){return ml(t.type,new Set)}o(Xv,"isDataType");function ml(t,e){if(e.has(t))return!0;if(e.add(t),rc(t))return!1;if(ic(t))return!1;if(er(t))return t.types.every(n=>ml(n,e));if(Rn(t)){if(t.primitiveType!==void 0)return!0;if(t.stringType!==void 0)return!0;if(t.typeRef!==void 0){const n=t.typeRef.ref;return Et(n)?ml(n.type,e):!1}else return!1}else return!1}o(ml,"isDataTypeInternal");function Yv(t){return zr(t,new Set)}o(Yv,"isStringType");function zr(t,e){var n,r;if(e.has(t))return!0;if(e.add(t),le(t)){if(t.dataType)return t.dataType==="string";if(!((n=t.returnType)===null||n===void 0)&&n.ref)return zr(t.returnType.ref,e)}else{if(Et(t))return zr(t.type,e);if(rc(t))return!1;if(ic(t))return!1;if(er(t))return t.types.every(i=>zr(i,e));if(Rn(t)){if(t.primitiveType==="string")return!0;if(t.stringType)return!0;if(!((r=t.typeRef)===null||r===void 0)&&r.ref)return zr(t.typeRef.ref,e)}}return!1}o(zr,"isStringTypeInternal");function vf(t){const e=t.$container;if(At(e)){const n=e.elements,r=n.indexOf(t);for(let i=r-1;i>=0;i--){const s=n[i];if(tt(s))return s;{const a=pt(n[i]).find(tt);if(a)return a}}}if($l(e))return vf(e)}o(vf,"getActionAtElement");function tr(t){var e;if(le(t))return Jt(t)?t.name:(e=oc(t))!==null&&e!==void 0?e:t.name;if(sn(t)||Et(t)||xl(t))return t.name;if(tt(t)){const n=Yi(t);if(n)return n}else if(Ml(t))return t.name;throw new Aw("Cannot get name of Unknown Type",t.$cstNode)}o(tr,"getTypeName");function Bn(t){if(t)try{return tr(t)}catch{return}}o(Bn,"getTypeNameWithoutError");function oc(t){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){const e=t.returnType.ref;if(e){if(le(e))return e.name;if(sn(e)||Et(e))return e.name}}}o(oc,"getExplicitRuleType");function Yi(t){var e;if(t.inferredType)return t.inferredType.name;if(!((e=t.type)===null||e===void 0)&&e.ref)return tr(t.type.ref)}o(Yi,"getActionType");function cc(t){var e,n,r;return Ke(t)?(n=(e=t.type)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:"string":Jt(t)?t.name:(r=oc(t))!==null&&r!==void 0?r:t.name}o(cc,"getRuleType");function Cr(t){const e={s:!1,i:!1,u:!1},n=Er(t.definition,e),r=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(n,r)}o(Cr,"terminalRegex");var yf=/[\s\S]/.source;function Er(t,e){if(Yg(t))return Jv(t);if(Qg(t))return Qv(t);if(Vd(t))return ty(t);if(Xd(t)){const n=t.rule.ref;if(!n)throw new Error("Missing rule reference.");return mn(Er(n.definition),{cardinality:t.cardinality,lookahead:t.lookahead})}else{if(Bg(t))return ey(t);if(nv(t))return Zv(t);if(zg(t)){const n=t.regex.lastIndexOf("/"),r=t.regex.substring(1,n),i=t.regex.substring(n+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),mn(r,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}else{if(iv(t))return mn(yf,{cardinality:t.cardinality,lookahead:t.lookahead});throw new Error(`Invalid terminal element: ${t==null?void 0:t.$type}`)}}}o(Er,"abstractElementToRegex");function Jv(t){return mn(t.elements.map(e=>Er(e)).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead})}o(Jv,"terminalAlternativesToRegex");function Qv(t){return mn(t.elements.map(e=>Er(e)).join(""),{cardinality:t.cardinality,lookahead:t.lookahead})}o(Qv,"terminalGroupToRegex");function Zv(t){return mn(`${yf}*?${Er(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead})}o(Zv,"untilTokenToRegex");function ey(t){return mn(`(?!${Er(t.terminal)})${yf}*?`,{cardinality:t.cardinality,lookahead:t.lookahead})}o(ey,"negateTokenToRegex");function ty(t){return t.right?mn(`[${Fc(t.left)}-${Fc(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1}):mn(Fc(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}o(ty,"characterRangeToRegex");function Fc(t){return Rr(t.value)}o(Fc,"keywordToRegex");function mn(t,e){var n;return(e.wrap!==!1||e.lookahead)&&(t=`(${(n=e.lookahead)!==null&&n!==void 0?n:""}${t})`),e.cardinality?`${t}${e.cardinality}`:t}o(mn,"withCardinality");function Tf(t){if(t.path===void 0||t.path.length===0)return;const e=je.dirname(Ce(t).uri);let n=t.path;return n.endsWith(".langium")||(n+=".langium"),je.resolvePath(e,n)}o(Tf,"resolveImportUri");function _r(t,e){const n=Tf(e);try{if(n){const i=t.getOrCreateDocument(n).parseResult.value;if(Qc(i))return i}}catch{}}o(_r,"resolveImport");function ki(t,e){if(Kd(e)){const n=_r(t,e);if(n){const r=gl(t,n);return r.push(n),r}return[]}else return gl(t,e)}o(ki,"resolveTransitiveImports");function gl(t,e,n=e,r=new Set,i=new Set){const s=Ce(e);if(n!==e&&i.add(e),!r.has(s.uri)){r.add(s.uri);for(const a of e.imports){const c=_r(t,a);c&&gl(t,c,n,r,i)}}return Array.from(i)}o(gl,"resolveTransitiveImportsInternal");function Ji(t){return Ye(t)?[t]:Fn(t)||At(t)||xn(t)?t.elements.flatMap(e=>Ji(e)):nt(t)&&t.rule.ref?Ji(t.rule.ref.definition):[]}o(Ji,"extractAssignments");var jw=["string","number","boolean","Date","bigint"];function Bl(t){return jw.includes(t)}o(Bl,"isPrimitiveType");var As,Uw=(As=class{constructor(e,n){this.context=e,this.root=n}getTypes(){const e={name:this.root.name,properties:this.root.properties,ruleCalls:this.root.ruleCalls,super:[]};return this.root.children.length===0?[{alt:e,next:[]}]:this.applyNext(this.root,{alt:e,next:this.root.children})}applyNext(e,n){const r=this.splitType(n.alt,n.next.length),i=[];for(let s=0;s<n.next.length;s++){const a=r[s],c=n.next[s];c.actionWithAssignment&&i.push({alt:ad(a),next:[]}),c.name!==void 0&&c.name!==a.name&&(c.actionWithAssignment?(a.properties=[],a.ruleCalls=[],a.super=[e.name],a.name=c.name):(a.super=[a.name,...a.ruleCalls],a.properties=[],a.ruleCalls=[],a.name=c.name)),a.properties.push(...c.properties),a.ruleCalls.push(...c.ruleCalls);const l={alt:a,next:c.children};l.next.length===0?(l.alt.super=l.alt.super.filter(u=>u!==l.alt.name),i.push(l)):i.push(...this.applyNext(e,l))}return kf(i)}splitType(e,n){const r=[];for(let i=0;i<n;i++)r.push(ad(e));return r}getSuperTypes(e){const n=new Set;return this.collectSuperTypes(e,e,n),Array.from(n)}collectSuperTypes(e,n,r){if(n.ruleCalls.length>0){for(const i of n.ruleCalls)r.add(i);return}for(const i of n.parents)e.name===void 0?this.collectSuperTypes(i,i,r):i.name!==void 0&&i.name!==e.name?r.add(i.name):this.collectSuperTypes(e,i,r);n.parents.length===0&&n.name&&r.add(n.name)}connect(e,n){return n.parents.push(e),e.children.push(n),n}merge(...e){if(e.length===1)return e[0];if(e.length===0)throw new Error("No parts to merge");const n=Hn();n.parents=e;for(const r of e)r.children.push(n);return n}hasLeafNode(e){return this.partHasLeafNode(e)}partHasLeafNode(e,n){return e.children.some(r=>r!==n)?!0:e.name?!1:e.parents.some(r=>this.partHasLeafNode(r,e))}},o(As,"TypeGraph"),As);function ny(t){return{name:t.name,children:[],parents:[],actionWithAssignment:t.actionWithAssignment,ruleCalls:[...t.ruleCalls],properties:t.properties.map(Rf)}}o(ny,"copyTypePart");function ad(t){return{name:t.name,super:t.super,ruleCalls:t.ruleCalls,properties:t.properties.map(e=>Rf(e))}}o(ad,"copyTypeAlternative");function Rf(t){return{name:t.name,optional:t.optional,type:t.type,astNodes:t.astNodes}}o(Rf,"copyProperty");function ry(t,e,n){const r=[],i={fragments:new Map};for(const l of t)r.push(..._f(i,l));const s=ly(r),a=uy(s),c=dy(s,a,n);for(const l of e){const u=iy(l);c.unions.push({name:l.name,declared:!1,type:u,subTypes:new Set,superTypes:new Set,dataType:l.dataType})}return c}o(ry,"collectInferredTypes");function iy(t){if(t.dataType&&t.dataType!=="string")return{primitive:t.dataType};let e=!1;const n=o(()=>(e=!0,{primitive:"unknown"}),"cancel"),r=vl(t.definition,n);return e?{primitive:"string"}:r}o(iy,"getDataRuleType");function vl(t,e){var n,r,i;if(t.cardinality)return e();if(Fn(t))return{types:t.elements.map(s=>vl(s,e))};if(At(t)||xn(t))return t.elements.length!==1?e():vl(t.elements[0],e);if(nt(t)){const s=(n=t.rule)===null||n===void 0?void 0:n.ref;return s?Ke(s)?{primitive:(i=(r=s.type)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"string",regex:Cr(s).toString()}:{value:s.name}:e()}else if(vt(t))return{string:t.value};return e()}o(vl,"buildDataRuleType");function _f(t,e){const n=Hn(e),r=new Uw(t,n);return e.definition&&yl(r,r.root,e.definition),r.getTypes()}o(_f,"getRuleTypes");function Hn(t){return{name:le(t)||tt(t)?Bn(t):t,properties:[],ruleCalls:[],children:[],parents:[],actionWithAssignment:!1}}o(Hn,"newTypePart");function yl(t,e,n){const r=yn(n.cardinality,n);if(Fn(n)){const i=[];r&&i.push(t.connect(e,Hn()));for(const s of n.elements){const a=t.connect(e,Hn());i.push(yl(t,a,s))}return t.merge(...i)}else if(At(n)||xn(n)){let i=t.connect(e,Hn()),s;r&&(s=t.connect(e,Hn()));for(const a of n.elements)i=yl(t,i,a);return s?t.merge(s,i):i}else{if(tt(n))return sy(t,e,n);Ye(n)?ay(e,n):nt(n)&&oy(t,e,n)}return e}o(yl,"collectElement");function sy(t,e,n){var r;if(!t.hasLeafNode(e)){const s=ny(e);t.connect(e,s)}const i=t.connect(e,Hn(n));if(n.type){const s=(r=n.type)===null||r===void 0?void 0:r.ref;s&&Gl(s)&&(i.name=s.name)}return n.feature&&n.operator&&(i.actionWithAssignment=!0,i.properties.push({name:n.feature,optional:!1,type:Kn(n.operator==="+=",!1,t.root.ruleCalls.length!==0?t.root.ruleCalls:t.getSuperTypes(i)),astNodes:new Set([n])})),i}o(sy,"addAction");function ay(t,e){const n={types:new Set,reference:!1};bf(e.terminal,n);const r=Kn(e.operator==="+=",n.reference,e.operator==="?="?["boolean"]:Array.from(n.types));t.properties.push({name:e.feature,optional:yn(e.cardinality),type:r,astNodes:new Set([e])})}o(ay,"addAssignment");function bf(t,e){if(Fn(t)||xn(t)||At(t))for(const n of t.elements)bf(n,e);else if(vt(t))e.types.add(`'${t.value}'`);else if(nt(t)&&t.rule.ref)e.types.add(cc(t.rule.ref));else if(gn(t)&&t.type.ref){const n=Bn(t.type.ref);n&&e.types.add(n),e.reference=!0}}o(bf,"findTypes");function oy(t,e,n){const r=n.rule.ref;if(le(r)&&r.fragment){const i=cy(r,t.context);yn(n.cardinality)?e.properties.push(...i.map(s=>Object.assign(Object.assign({},s),{optional:!0}))):e.properties.push(...i)}else le(r)&&e.ruleCalls.push(cc(r))}o(oy,"addRuleCall");function cy(t,e){const n=e.fragments.get(t);if(n)return n;const r=[];e.fragments.set(t,r);const i=Bn(t),s=_f(e,t).filter(a=>a.alt.name===i);return r.push(...s.flatMap(a=>a.alt.properties)),r}o(cy,"getFragmentProperties");function ly(t){const e=new Map,n=[],r=kf(t).map(i=>i.alt);for(const i of r){const s={name:i.name,properties:i.properties,superTypes:new Set(i.super),subTypes:new Set,declared:!1,abstract:!1};e.set(s.name,s),i.ruleCalls.length>0&&(n.push(i),i.ruleCalls.forEach(a=>{a!==s.name&&s.subTypes.add(a)}))}for(const i of n)for(const s of i.ruleCalls){const a=e.get(s);a&&a.name!==i.name&&a.superTypes.add(i.name)}return Array.from(e.values())}o(ly,"calculateInterfaces");function kf(t){const e=t.reduce((r,i)=>r.add(i.alt.name,i),new dt),n=[];for(const[r,i]of e.entriesGroupedByKey()){const s=[],a=new Set,c={alt:{name:r,properties:s,ruleCalls:[],super:[]},next:[]};for(const l of i){const u=l.alt;c.alt.super.push(...u.super),c.next.push(...l.next);const d=u.properties;for(const f of d){const p=s.find(h=>h.name===f.name);p?(p.type=pf(p.type,f.type),f.astNodes.forEach(h=>p.astNodes.add(h))):s.push(Object.assign({},f))}u.ruleCalls.forEach(f=>a.add(f))}for(const l of i){const u=l.alt;if(u.ruleCalls.length===0)for(const d of s)u.properties.find(f=>f.name===d.name)||(d.optional=!0)}c.alt.ruleCalls=Array.from(a),n.push(c)}return n}o(kf,"flattenTypes");function uy(t){const e=new Map(t.map(i=>[i.name,i])),n=[],r=new dt;for(const i of t)for(const s of i.superTypes)r.add(s,i.name);for(const[i,s]of r.entriesGroupedByKey())if(!e.has(i)){const a={declared:!1,name:i,subTypes:new Set,superTypes:new Set,type:Kn(!1,!1,s)};n.push(a)}return n}o(uy,"buildSuperUnions");function dy(t,e,n){const r=new dt;for(const c of t)for(const l of c.superTypes)r.add(l,c.name);const i=new Set(n.interfaces.map(c=>c.name)),s={interfaces:[],unions:e},a=new Map(e.map(c=>[c.name,c]));for(const c of t){const l=new Set(r.get(c.name));if(c.properties.length===0&&l.size>0)if(i.has(c.name))c.abstract=!0,s.interfaces.push(c);else{const u=Kn(!1,!1,Array.from(l)),d=a.get(c.name);if(d)d.type=pf(d.type,u);else{const f={name:c.name,declared:!1,subTypes:l,superTypes:c.superTypes,type:u};s.unions.push(f),a.set(c.name,f)}}else s.interfaces.push(c)}for(const c of s.interfaces)c.superTypes=new Set([...c.superTypes].filter(l=>!a.has(l)));return s}o(dy,"extractUnions");function Kn(t,e,n){if(t)return{elementType:Kn(!1,e,n)};if(e)return{referenceType:Kn(!1,!1,n)};if(n.length===1){const r=n[0];return r.startsWith("'")?{string:r.substring(1,r.length-1)}:Bl(r)?{primitive:r}:{value:r}}else return{types:n.map(r=>Kn(!1,!1,[r]))}}o(Kn,"toPropertyType");function fy(t,e){const n=Sf(t,e),r=Uv(n.interfaces,n.types),i=ry(n.parserRules,n.datatypeRules,r);return{astResources:n,inferred:i,declared:r}}o(fy,"collectTypeResources");function Sf(t,e,n=new Set,r={parserRules:[],datatypeRules:[],interfaces:[],types:[]}){Array.isArray(t)||(t=[t]);for(const i of t){const s=Ce(i);if(!n.has(s.uri)){n.add(s.uri);for(const a of i.rules)le(a)&&!a.fragment&&(Jt(a)?r.datatypeRules.push(a):r.parserRules.push(a));if(i.interfaces.forEach(a=>r.interfaces.push(a)),i.types.forEach(a=>r.types.push(a)),e){const a=i.imports.map(c=>_r(e,c)).filter(c=>c!==void 0);Sf(a,e,n,r)}}}return r}o(Sf,"collectAllAstResources");function hy(t,e){const{inferred:n,declared:r,astResources:i}=fy(t,e);return{astResources:i,inferred:od(r,n),declared:od(n,r)}}o(hy,"collectValidationAst");function od(t,e){var n,r;const i={interfaces:Cv(cd(...t.interfaces,...(n=e==null?void 0:e.interfaces)!==null&&n!==void 0?n:[])),unions:cd(...t.unions,...(r=e==null?void 0:e.unions)!==null&&r!==void 0?r:[])},s=Wv(i);return py(s),s}o(od,"createAstTypes");function cd(...t){return Array.from(t.reduce((e,n)=>(e.set(n.name,n),e),new Map).values()).sort((e,n)=>e.name.localeCompare(n.name))}o(cd,"mergeAndRemoveDuplicates");function py(t){const e=gy(t),n=Array.from(e.values());vy(n),yy(t.interfaces),my(n)}o(py,"specifyAstNodeProperties");function my(t){const e=new Set,n=o(r=>{if(!e.has(r)){e.add(r),r.typeNames.add(r.name);for(const i of r.subTypes)n(i),i.typeNames.forEach(s=>r.typeNames.add(s))}},"collect");t.forEach(n)}o(my,"buildTypeNames");function gy({interfaces:t,unions:e}){const n=t.concat(e).reduce((i,s)=>(i.set(s.name,s),i),new Map),r=new Map;for(const i of e)r.set(i,Tl(i.type,new Set));for(const[i,s]of r)s&&n.delete(i.name);return n}o(gy,"filterInterfaceLikeTypes");function Tl(t,e){if(e.has(t))return!0;if(e.add(t),lt(t))return t.types.every(n=>Tl(n,e));if(en(t)){const n=t.value;return hn(n)?Tl(n.type,e):!1}else return zt(t)||vn(t)}o(Tl,"isDataType");function vy(t){for(const e of t)for(const n of e.superTypes)n.subTypes.add(e)}o(vy,"addSubTypes");function yy(t){var e;const n=t.reduce((a,c)=>(a.set(c.name,c),a),new Map);for(const a of t){const c=a.properties.flatMap(l=>Ev(l.type));for(const l of c)(e=n.get(l))===null||e===void 0||e.containerTypes.add(a)}const r=new Set,i=t.filter(a=>a.subTypes.size===0),s=new Set(i);for(;i.length>0;){const a=i.shift();if(a)for(const c of a.superTypes)pn(c)&&(a.containerTypes.size===0?(r.add(c.name),c.containerTypes.clear()):r.has(c.name)||a.containerTypes.forEach(l=>c.containerTypes.add(l)),s.has(c)||(s.add(c),i.push(c)))}}o(yy,"buildContainerTypes");var qw={languageId:"langium",fileExtensions:[".langium"],caseInsensitive:!1},Gw={maxLookahead:3},Ww={AstReflection:()=>new sv},Hw={Grammar:()=>Dw(),LanguageMetaData:()=>qw,parser:{ParserConfig:()=>Gw}},ws,Hp=(ws=class{constructor(e,n,r){var i;this.elements=e,this.outerScope=n,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const n=this.caseInsensitive?this.elements.find(r=>r.name.toLowerCase()===e.toLowerCase()):this.elements.find(r=>r.name===e);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}},o(ws,"StreamScope"),ws),Cs,Ty=(Cs=class{constructor(e,n,r){var i;this.elements=new Map,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1;for(const s of e){const a=this.caseInsensitive?s.name.toLowerCase():s.name;this.elements.set(a,s)}this.outerScope=n}getElement(e){const n=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(n);if(r)return r;if(this.outerScope)return this.outerScope.getElement(e)}getAllElements(){let e=Ne(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},o(Cs,"MapScope"),Cs),Bw={getElement(){},getAllElements(){return Xc}},Eu=_e(Zn(),1),Es,Ry=(Es=class{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,n=Eu.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,n)}async computeExportsForNode(e,n,r=hi,i=Eu.CancellationToken.None){const s=[];this.exportNode(e,s,n);for(const a of r(e))await gt(i),this.exportNode(a,s,n);return s}exportNode(e,n,r){const i=this.nameProvider.getName(e);i&&n.push(this.descriptions.createDescription(e,i,r))}async computeLocalScopes(e,n=Eu.CancellationToken.None){const r=e.parseResult.value,i=new dt;for(const s of pt(r))await gt(n),this.processNode(s,e,i);return i}processNode(e,n,r){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&r.add(i,this.descriptions.createDescription(e,s,n))}}},o(Es,"DefaultScopeComputation"),Es),Ns,_y=(Ns=class{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},o(Ns,"DisposableCache"),Ns),Ps,Kw=(Ps=class extends _y{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,n){this.throwIfDisposed(),this.cache.set(e,n)}get(e,n){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(n){const r=n();return this.cache.set(e,r),r}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},o(Ps,"SimpleCache"),Ps),Is,zw=(Is=class extends _y{constructor(e){super(),this.cache=new Map,this.converter=e??(n=>n)}has(e,n){return this.throwIfDisposed(),this.cacheForContext(e).has(n)}set(e,n,r){this.throwIfDisposed(),this.cacheForContext(e).set(n,r)}get(e,n,r){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(n))return i.get(n);if(r){const s=r();return i.set(n,s),s}else return}delete(e,n){return this.throwIfDisposed(),this.cacheForContext(e).delete(n)}clear(e){if(this.throwIfDisposed(),e){const n=this.converter(e);this.cache.delete(n)}else this.cache.clear()}cacheForContext(e){const n=this.converter(e);let r=this.cache.get(n);return r||(r=new Map,this.cache.set(n,r)),r}},o(Is,"ContextCache"),Is),Ds,Vw=(Ds=class extends Kw{constructor(e){super(),this.onDispose(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}},o(Ds,"WorkspaceCache"),Ds),Os,by=(Os=class{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new Vw(e.shared)}getScope(e){const n=[],r=this.reflection.getReferenceType(e),i=Ce(e.container).precomputedScopes;if(i){let a=e.container;do{const c=i.get(a);c.length>0&&n.push(Ne(c).filter(l=>this.reflection.isSubtype(l.type,r))),a=a.$container}while(a)}let s=this.getGlobalScope(r,e);for(let a=n.length-1;a>=0;a--)s=this.createScope(n[a],s);return s}createScope(e,n,r){return new Hp(Ne(e),n,r)}createScopeForNodes(e,n,r){const i=Ne(e).map(s=>{const a=this.nameProvider.getName(s);if(a)return this.descriptions.createDescription(s,a)}).nonNullable();return new Hp(i,n,r)}getGlobalScope(e,n){return this.globalScopeCache.get(e,()=>new Ty(this.indexManager.allElements(e)))}},o(Os,"DefaultScopeProvider"),Os),Ls,Xw=(Ls=class extends by{constructor(e){super(e),this.langiumDocuments=e.shared.workspace.LangiumDocuments}getScope(e){const n=this.reflection.getReferenceType(e);return n===Kr?this.getTypeScope(n,e):super.getScope(e)}getTypeScope(e,n){let r;const i=Ce(n.container).precomputedScopes,s=jl(n.container);if(i&&s){const c=i.get(s);c.length>0&&(r=Ne(c).filter(l=>l.type===Zc||l.type===el))}const a=this.getGlobalScope(e,n);return r?this.createScope(r,a):a}getGlobalScope(e,n){const r=Xe(n.container,Qc);if(!r)return Bw;const i=new Set;this.gatherImports(r,i);let s=this.indexManager.allElements(e,i);return e===Kr&&(s=s.filter(a=>a.type===Zc||a.type===el)),new Ty(s)}gatherImports(e,n){for(const r of e.imports){const i=Tf(r);if(i&&!n.has(i.toString())&&(n.add(i.toString()),this.langiumDocuments.hasDocument(i))){const a=this.langiumDocuments.getOrCreateDocument(i).parseResult.value;Qc(a)&&this.gatherImports(a,n)}}}},o(Ls,"LangiumGrammarScopeProvider"),Ls),$s,Yw=($s=class extends Ry{constructor(e){super(e),this.astNodeLocator=e.workspace.AstNodeLocator}exportNode(e,n,r){var i;if(super.exportNode(e,n,r),le(e)){if(!e.returnType&&!e.dataType){const s=(i=e.inferredType)!==null&&i!==void 0?i:e;n.push(this.createInterfaceDescription(s,s.name,r))}pt(e).forEach(s=>{if(tt(s)&&s.inferredType){const a=Yi(s);a&&n.push(this.createInterfaceDescription(s,a,r))}})}}processNode(e,n,r){xl(e)||(this.processTypeNode(e,n,r),this.processActionNode(e,n,r),super.processNode(e,n,r))}processTypeNode(e,n,r){var i;const s=e.$container;if(s&&le(e)&&!e.returnType&&!e.dataType){const a=(i=e.inferredType)!==null&&i!==void 0?i:e;r.add(s,this.createInterfaceDescription(a,a.name,n))}}processActionNode(e,n,r){const i=jl(e);if(i&&tt(e)&&e.inferredType){const s=Yi(e);s&&r.add(i,this.createInterfaceDescription(e,s,n))}}createInterfaceDescription(e,n,r=Ce(e)){let i;const s=o(()=>{var a;return i??(i=Kt((a=this.nameProvider.getNameNode(e))!==null&&a!==void 0?a:e.$cstNode))},"nameSegmentGetter");return{node:e,name:n,get nameSegment(){return s()},selectionSegment:Kt(e.$cstNode),type:"Interface",documentUri:r.uri,path:this.astNodeLocator.getAstNodePath(e)}}},o($s,"LangiumGrammarScopeComputation"),$s),Gt=_e(Ee(),1),Bt=_e(Ee(),1),Ms,Jw=(Ms=class{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,n={},r=Bt.CancellationToken.None){const i=e.parseResult,s=[];if(await gt(r),(!n.categories||n.categories.includes("built-in"))&&(this.processLexingErrors(i,s,n),n.stopAfterLexingErrors&&s.some(a=>{var c;return((c=a.data)===null||c===void 0?void 0:c.code)===dn.LexingError})||(this.processParsingErrors(i,s,n),n.stopAfterParsingErrors&&s.some(a=>{var c;return((c=a.data)===null||c===void 0?void 0:c.code)===dn.ParsingError}))||(this.processLinkingErrors(e,s,n),n.stopAfterLinkingErrors&&s.some(a=>{var c;return((c=a.data)===null||c===void 0?void 0:c.code)===dn.LinkingError}))))return s;try{s.push(...await this.validateAst(i.value,n,r))}catch(a){if(Hl(a))throw a;console.error("An error occurred during validation:",a)}return await gt(r),s}processLexingErrors(e,n,r){for(const i of e.lexerErrors){const s={severity:Bt.DiagnosticSeverity.Error,range:{start:{line:i.line-1,character:i.column-1},end:{line:i.line-1,character:i.column+i.length-1}},message:i.message,data:Wt(dn.LexingError),source:this.getSource()};n.push(s)}}processParsingErrors(e,n,r){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const a=i.previousToken;if(isNaN(a.startOffset))s=Bt.Range.create(0,0,0,0);else{const c=Bt.Position.create(a.endLine-1,a.endColumn);s=Bt.Range.create(c,c)}}}else s=Yc(i.token);if(s){const a={severity:Bt.DiagnosticSeverity.Error,range:s,message:i.message,data:Wt(dn.ParsingError),source:this.getSource()};n.push(a)}}}processLinkingErrors(e,n,r){for(const i of e.references){const s=i.error;if(s){const a={node:s.container,property:s.property,index:s.index,data:{code:dn.LinkingError,containerType:s.container.$type,property:s.property,refText:s.reference.$refText}};n.push(this.toDiagnostic("error",s.message,a))}}}async validateAst(e,n,r=Bt.CancellationToken.None){const i=[],s=o((a,c,l)=>{i.push(this.toDiagnostic(a,c,l))},"acceptor");return await Promise.all(sc(e).map(async a=>{await gt(r);const c=this.validationRegistry.getChecks(a.$type,n.categories);for(const l of c)await l(a,s,r)})),i}toDiagnostic(e,n,r){return{message:n,range:ky(r),severity:Sy(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}},o(Ms,"DefaultDocumentValidator"),Ms);function ky(t){if(Bt.Range.is(t.range))return t.range;let e;return typeof t.property=="string"?e=Tn(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=Pn(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}o(ky,"getDiagnosticRange");function Sy(t){switch(t){case"error":return Bt.DiagnosticSeverity.Error;case"warning":return Bt.DiagnosticSeverity.Warning;case"info":return Bt.DiagnosticSeverity.Information;case"hint":return Bt.DiagnosticSeverity.Hint;default:throw new Error("Invalid diagnostic severity: "+t)}}o(Sy,"toDiagnosticSeverity");var dn;(function(t){t.LexingError="lexing-error",t.ParsingError="parsing-error",t.LinkingError="linking-error"})(dn=dn||(dn={}));var Fs,Qw=(Fs=class{constructor(e){this.reflection=e.shared.AstReflection,this.indexManager=e.shared.workspace.IndexManager}getCodeActions(e,n){const r=[],i=o(s=>s&&r.push(s),"acceptor");for(const s of n.context.diagnostics)this.createCodeActions(s,e,i);return r}createCodeActions(e,n,r){var i;switch((i=e.data)===null||i===void 0?void 0:i.code){case Se.GrammarNameUppercase:case Se.RuleNameUppercase:r(this.makeUpperCase(e,n));break;case Se.HiddenGrammarTokens:r(this.fixHiddenTerminals(e,n));break;case Se.UseRegexTokens:r(this.fixRegexTokens(e,n));break;case Se.EntryRuleTokenSyntax:r(this.addEntryKeyword(e,n));break;case Se.CrossRefTokenSyntax:r(this.fixCrossRefSyntax(e,n));break;case Se.UnnecessaryFileExtension:r(this.fixUnnecessaryFileExtension(e,n));break;case Se.MissingReturns:r(this.fixMissingReturns(e,n));break;case Se.InvalidInfers:case Se.InvalidReturns:r(this.fixInvalidReturnsInfers(e,n));break;case Se.MissingInfer:r(this.fixMissingInfer(e,n));break;case Se.SuperfluousInfer:r(this.fixSuperfluousInfer(e,n));break;case dn.LinkingError:{const s=e.data;s&&s.containerType==="RuleCall"&&s.property==="rule"&&r(this.addNewRule(e,s,n)),s&&this.lookInGlobalScope(e,s,n).forEach(r);break}}}fixMissingReturns(e,n){const r=n.textDocument.getText(e.range);if(r)return{title:`Add explicit return type for parser rule ${r}`,kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],edit:{changes:{[n.textDocument.uri]:[{range:e.range,newText:`${r} returns ${r}`}]}}}}fixInvalidReturnsInfers(e,n){const r=e.data;if(r&&r.actionSegment){const i=n.textDocument.getText(r.actionSegment.range);return{title:`Correct ${i} usage`,kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],edit:{changes:{[n.textDocument.uri]:[{range:r.actionSegment.range,newText:i==="infers"?"returns":"infers"}]}}}}}fixMissingInfer(e,n){const r=e.data;if(r&&r.actionSegment)return{title:"Correct 'infer' usage",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],edit:{changes:{[n.textDocument.uri]:[{range:{start:r.actionSegment.range.end,end:r.actionSegment.range.end},newText:"infer "}]}}}}fixSuperfluousInfer(e,n){const r=e.data;if(r&&r.actionRange)return{title:"Remove the 'infer' keyword",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],edit:{changes:{[n.textDocument.uri]:[{range:r.actionRange,newText:""}]}}}}fixUnnecessaryFileExtension(e,n){const r=Object.assign({},e.range.end);r.character-=1;const i=Object.assign({},r);return i.character-=8,{title:"Remove file extension",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:{start:i,end:r},newText:""}]}}}}makeUpperCase(e,n){const r={start:e.range.start,end:{line:e.range.start.line,character:e.range.start.character+1}};return{title:"First letter to upper case",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:r,newText:n.textDocument.getText(r).toUpperCase()}]}}}}addEntryKeyword(e,n){return{title:"Add entry keyword",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:{start:e.range.start,end:e.range.start},newText:"entry "}]}}}}fixRegexTokens(e,n){const r=n.textDocument.offsetAt(e.range.start),i=n.parseResult.value.$cstNode;if(i){const s=Zt(i,r),a=Xe(s==null?void 0:s.astNode,Vd);if(a&&a.right&&a.$cstNode){const c=a.left.value,l=a.right.value;return{title:"Refactor into regular expression",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:a.$cstNode.range,newText:`/[${Rr(c)}-${Rr(l)}]/`}]}}}}}}fixCrossRefSyntax(e,n){return{title:"Replace '|' with ':'",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:e.range,newText:":"}]}}}}fixHiddenTerminals(e,n){const r=n.parseResult.value,i=r.hiddenTokens,s=[],a=Tn(r.$cstNode,"definesHiddenTokens");if(a){const c=a.range.start,l=a.offset,u=r.$cstNode.text.indexOf(")",l)+1;s.push({newText:"",range:{start:c,end:n.textDocument.positionAt(u)}})}for(const c of i){const l=c.ref;if(l&&Ke(l)&&!l.hidden&&l.$cstNode){const u=l.$cstNode.range.start;s.push({newText:"hidden ",range:{start:u,end:u}})}}return{title:"Fix hidden terminals",kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:s}}}}addNewRule(e,n,r){const i=r.textDocument.offsetAt(e.range.start),s=r.parseResult.value.$cstNode;if(s){const a=Zt(s,i),c=Xe(a==null?void 0:a.astNode,le);if(c&&c.$cstNode)return{title:`Add new rule '${n.refText}'`,kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!1,edit:{changes:{[r.textDocument.uri]:[{range:{start:c.$cstNode.range.end,end:c.$cstNode.range.end},newText:`

`+n.refText+`:
    /* TODO implement rule */ {infer `+n.refText+"};"}]}}}}}lookInGlobalScope(e,n,r){var i,s;const a={container:{$type:n.containerType},property:n.property,reference:{$refText:n.refText}},c=this.reflection.getReferenceType(a),l=this.indexManager.allElements(c).filter(p=>p.name===n.refText),u=[];let d=-1,f=-1;for(const p of l){if(je.equals(p.documentUri,r.uri))continue;const h=Ay(r.uri,p.documentUri);let R,k="";const A=r.parseResult.value,w=A.imports.find(E=>E.path&&h<E.path);if(w)R=(i=w.$cstNode)===null||i===void 0?void 0:i.range.start;else if(A.imports.length>0){const E=A.imports[A.imports.length-1].$cstNode.range.end;E&&(R={line:E.line+1,character:0})}else A.rules.length>0&&(R=(s=A.rules[0].$cstNode)===null||s===void 0?void 0:s.range.start,k=`
`);R&&((d<0||h.length<f)&&(d=u.length,f=h.length),u.push({title:`Add import to '${h}'`,kind:Gt.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!1,edit:{changes:{[r.textDocument.uri]:[{range:{start:R,end:R},newText:`import '${h}'
${k}`}]}}}))}return d>=0&&(u[d].isPreferred=!0),u}},o(Fs,"LangiumGrammarCodeActionProvider"),Fs);function Ay(t,e){const n=je.dirname(t);let r=je.relative(n,e);return!r.startsWith("./")&&!r.startsWith("../")&&(r="./"+r),r.endsWith(".langium")&&(r=r.substring(0,r.length-8)),r}o(Ay,"getRelativeImport");var Nu=_e(Ee(),1);function ld(t,e){const n={stacks:t,tokens:e};return wy(n),n.stacks.flat().forEach(i=>{i.property=void 0}),wf(n.stacks).map(i=>i[i.length-1])}o(ld,"findNextFeatures");function Kl(t){const{next:e,cardinalities:n,visited:r,plus:i}=t,s=[],a=e.feature;if(r.has(a))return[];r.add(a);let c,l=a;for(;l.$container;)if(At(l.$container)){c=l.$container;break}else if($l(l.$container))l=l.$container;else break;if(zv(l.cardinality)){const u=vr({next:{feature:l,type:e.type,new:!1},cardinalities:n,visited:r,plus:i});for(const d of u)i.add(d.feature);s.push(...u)}if(c){const u=c.elements.indexOf(l);u!==void 0&&u<c.elements.length-1&&s.push(...Af({feature:c,type:e.type,new:!1},u+1,n,r,i)),s.every(d=>yn(d.feature.cardinality,d.feature)||yn(n.get(d.feature))||i.has(d.feature))&&s.push(...Kl({next:{feature:c,type:e.type,new:!1},cardinalities:n,visited:r,plus:i}))}return s}o(Kl,"findNextFeaturesInternal");function Oi(t){return ht(t)&&(t={feature:t}),vr({next:t,cardinalities:new Map,visited:new Set,plus:new Set})}o(Oi,"findFirstFeatures");function vr(t){var e,n,r;const{next:i,cardinalities:s,visited:a,plus:c}=t;if(i===void 0)return[];const{feature:l,type:u}=i;if(At(l)){if(a.has(l))return[];a.add(l)}if(At(l))return Af(i,0,s,a,c).map(d=>Si(d,l.cardinality,s));if(Fn(l)||xn(l))return l.elements.flatMap(d=>vr({next:{feature:d,new:!1,type:u},cardinalities:s,visited:a,plus:c})).map(d=>Si(d,l.cardinality,s));if(Ye(l)){const d={feature:l.terminal,new:!1,type:u,property:(e=i.property)!==null&&e!==void 0?e:l.feature};return vr({next:d,cardinalities:s,visited:a,plus:c}).map(f=>Si(f,l.cardinality,s))}else{if(tt(l))return Kl({next:{feature:l,new:!0,type:tr(l),property:(n=i.property)!==null&&n!==void 0?n:l.feature},cardinalities:s,visited:a,plus:c});if(nt(l)&&le(l.rule.ref)){const d=l.rule.ref,f={feature:d.definition,new:!0,type:d.fragment?void 0:(r=oc(d))!==null&&r!==void 0?r:d.name,property:i.property};return vr({next:f,cardinalities:s,visited:a,plus:c}).map(p=>Si(p,l.cardinality,s))}else return[i]}}o(vr,"findFirstFeaturesInternal");function Si(t,e,n){return n.set(t.feature,e),t}o(Si,"modifyCardinality");function Af(t,e,n,r,i){var s;const a=[];let c;for(;e<t.feature.elements.length&&(c={feature:t.feature.elements[e++],new:!1,type:t.type},a.push(...vr({next:c,cardinalities:n,visited:r,plus:i})),!!yn((s=c.feature.cardinality)!==null&&s!==void 0?s:n.get(c.feature),c.feature)););return a}o(Af,"findNextFeaturesInGroup");function wy(t){for(const e of t.tokens){const n=wf(t.stacks,e);t.stacks=n}}o(wy,"interpretTokens");function wf(t,e){const n=[];for(const r of t)n.push(...Cy(r,e));return n}o(wf,"findNextFeatureStacks");function Cy(t,e){const n=new Map,r=new Set(t.map(s=>s.feature).filter(Ey)),i=[];for(;t.length>0;){const s=t.pop(),a=Kl({next:s,cardinalities:n,plus:r,visited:new Set}).filter(c=>e?zl(c.feature,e):!0);for(const c of a)i.push([...t,c]);if(!a.every(c=>yn(c.feature.cardinality,c.feature)||yn(n.get(c.feature))))break}return i}o(Cy,"interpretStackToken");function Ey(t){if(t.cardinality==="+")return!0;const e=Xe(t,Ye);return!!(e&&e.cardinality==="+")}o(Ey,"isPlusFeature");function zl(t,e){if(vt(t))return t.value===e.image;if(nt(t))return Ny(t.rule.ref,e);if(gn(t)){const n=Nf(t);if(n)return zl(n,e)}return!1}o(zl,"featureMatches");function Ny(t,e){return le(t)?Oi(t.definition).some(r=>zl(r.feature,e)):Ke(t)?Cr(t).test(e.image):!1}o(Ny,"ruleMatches");function Py(t){const e=Array.from(new Set(t.flatMap(r=>{var i;return(i=r==null?void 0:r.triggerCharacters)!==null&&i!==void 0?i:[]}))),n=Array.from(new Set(t.flatMap(r=>{var i;return(i=r==null?void 0:r.allCommitCharacters)!==null&&i!==void 0?i:[]})));return{triggerCharacters:e.length>0?e:void 0,allCommitCharacters:n.length>0?n:void 0}}o(Py,"mergeCompletionProviderOptions");var xs,Iy=(xs=class{constructor(e){this.scopeProvider=e.references.ScopeProvider,this.grammar=e.Grammar,this.completionParser=e.parser.CompletionParser,this.nameProvider=e.references.NameProvider,this.lexer=e.parser.Lexer,this.nodeKindProvider=e.shared.lsp.NodeKindProvider,this.fuzzyMatcher=e.shared.lsp.FuzzyMatcher,this.grammarConfig=e.parser.GrammarConfig}async getCompletion(e,n){const r=[],i=this.buildContexts(e,n.position),s=o((l,u)=>{const d=this.fillCompletionItem(l,u);d&&r.push(d)},"acceptor"),a=o(l=>vt(l.feature)?l.feature.value:l.feature,"distinctionFunction"),c=[];for(const l of i)if(await Promise.all(Ne(l.features).distinct(a).exclude(c).map(u=>this.completionFor(l,u,s))),c.push(...l.features),!this.continueCompletion(r))break;return Nu.CompletionList.create(this.deduplicateItems(r),!0)}deduplicateItems(e){return Ne(e).distinct(n=>`${n.kind}_${n.label}_${n.detail}`).toArray()}findFeaturesAt(e,n){const r=e.getText({start:Nu.Position.create(0,0),end:e.positionAt(n)}),i=this.completionParser.parse(r),s=i.tokens;if(i.tokenIndex===0){const l=Rl(this.grammar),u=Oi({feature:l.definition,new:!0,type:oc(l)});return s.length>0?(s.shift(),ld(u.map(d=>[d]),s)):u}const a=[...s].splice(i.tokenIndex);return ld([i.elementStack.map(l=>({feature:l}))],a)}*buildContexts(e,n){var r,i,s,a,c;const l=e.parseResult.value.$cstNode;if(!l)return;const u=e.textDocument,d=u.getText(),f=u.offsetAt(n),p={document:e,textDocument:u,offset:f,position:n},h=this.findDataTypeRuleStart(l,f);if(h){const[P,j]=h,z=(r=Zt(l,P))===null||r===void 0?void 0:r.astNode,ie=this.findFeaturesAt(u,P);yield Object.assign(Object.assign({},p),{node:z,tokenOffset:P,tokenEndOffset:j,features:ie})}const{nextTokenStart:R,nextTokenEnd:k,previousTokenStart:A,previousTokenEnd:w}=this.backtrackToAnyToken(d,f);let E;if(A!==void 0&&w!==void 0&&w===f){E=(i=Zt(l,A))===null||i===void 0?void 0:i.astNode;const P=this.findFeaturesAt(u,A);yield Object.assign(Object.assign({},p),{node:E,tokenOffset:A,tokenEndOffset:w,features:P})}if(E=(a=(s=Zt(l,R))===null||s===void 0?void 0:s.astNode)!==null&&a!==void 0?a:A===void 0||(c=Zt(l,A))===null||c===void 0?void 0:c.astNode,E){const P=this.findFeaturesAt(u,R);yield Object.assign(Object.assign({},p),{node:E,tokenOffset:R,tokenEndOffset:k,features:P})}else{const P=Rl(this.grammar),j=Oi(P.definition);yield Object.assign(Object.assign({},p),{tokenOffset:R,tokenEndOffset:k,features:j})}}findDataTypeRuleStart(e,n){var r,i;let s=tn(e,n,this.grammarConfig.nameRegexp),a=!!(!((r=Xe(s==null?void 0:s.grammarSource,le))===null||r===void 0)&&r.dataType);if(a){for(;a;)s=s==null?void 0:s.container,a=!!(!((i=Xe(s==null?void 0:s.grammarSource,le))===null||i===void 0)&&i.dataType);if(s)return[s.offset,s.end]}}continueCompletion(e){return e.length===0}backtrackToAnyToken(e,n){const r=this.lexer.tokenize(e).tokens;if(r.length===0)return{nextTokenStart:n,nextTokenEnd:n};let i;for(const s of r){if(s.startOffset>=n)return{nextTokenStart:n,nextTokenEnd:n,previousTokenStart:i?i.startOffset:void 0,previousTokenEnd:i?i.endOffset+1:void 0};if(s.endOffset>=n)return{nextTokenStart:s.startOffset,nextTokenEnd:s.endOffset+1,previousTokenStart:i?i.startOffset:void 0,previousTokenEnd:i?i.endOffset+1:void 0};i=s}return{nextTokenStart:n,nextTokenEnd:n,previousTokenStart:i?i.startOffset:void 0,previousTokenEnd:i?i.endOffset+1:void 0}}async completionForRule(e,n,r){if(le(n)){const i=Oi(n.definition);await Promise.all(i.map(s=>this.completionFor(e,s,r)))}}completionFor(e,n,r){if(vt(n.feature))return this.completionForKeyword(e,n.feature,r);if(gn(n.feature)&&e.node)return this.completionForCrossReference(e,n,r)}completionForCrossReference(e,n,r){const i=Xe(n.feature,Ye);let s=e.node;if(i&&s){if(n.type&&(n.new||s.$type!==n.type)&&(s={$type:n.type,$container:s,$containerProperty:n.property}),!e)return;const a={reference:{},container:s,property:i.feature};try{const c=this.scopeProvider.getScope(a),l=new Set;c.getAllElements().forEach(u=>{!l.has(u.name)&&this.filterCrossReference(u)&&(r(e,this.createReferenceCompletionItem(u)),l.add(u.name))})}catch(c){console.error(c)}}}createReferenceCompletionItem(e){return{nodeDescription:e,kind:this.nodeKindProvider.getCompletionItemKind(e),detail:e.type,sortText:"0"}}filterCrossReference(e){return!0}completionForKeyword(e,n,r){n.value.match(/[\w]/)&&r(e,{label:n.value,kind:Nu.CompletionItemKind.Keyword,detail:"Keyword",sortText:"1"})}fillCompletionItem(e,n){var r,i;let s;if(typeof n.label=="string")s=n.label;else if("node"in n){const u=this.nameProvider.getName(n.node);if(!u)return;s=u}else if("nodeDescription"in n)s=n.nodeDescription.name;else return;let a;typeof((r=n.textEdit)===null||r===void 0?void 0:r.newText)=="string"?a=n.textEdit.newText:typeof n.insertText=="string"?a=n.insertText:a=s;const c=(i=n.textEdit)!==null&&i!==void 0?i:this.buildCompletionTextEdit(e,s,a);return c?{additionalTextEdits:n.additionalTextEdits,command:n.command,commitCharacters:n.commitCharacters,data:n.data,detail:n.detail,documentation:n.documentation,filterText:n.filterText,insertText:n.insertText,insertTextFormat:n.insertTextFormat,insertTextMode:n.insertTextMode,kind:n.kind,labelDetails:n.labelDetails,preselect:n.preselect,sortText:n.sortText,tags:n.tags,textEditText:n.textEditText,textEdit:c,label:s}:void 0}buildCompletionTextEdit(e,n,r){const s=e.textDocument.getText().substring(e.tokenOffset,e.offset);if(this.fuzzyMatcher.match(s,n)){const a=e.textDocument.positionAt(e.tokenOffset),c=e.position;return{newText:r,range:{start:a,end:c}}}else return}},o(xs,"DefaultCompletionProvider"),xs),js,Zw=(js=class extends Iy{constructor(e){super(e),this.documents=()=>e.shared.workspace.LangiumDocuments}completionFor(e,n,r){const i=Xe(n.feature,Ye);if((i==null?void 0:i.feature)==="path")this.completeImportPath(e,r);else return super.completionFor(e,n,r)}completeImportPath(e,n){const i=e.textDocument.getText().substring(e.tokenOffset,e.offset);let s=this.getAllFiles(e.document),a={start:e.position,end:e.position};if(i.length>0){const c=i.substring(1);s=s.filter(d=>d.startsWith(c));const l=e.textDocument.positionAt(e.tokenOffset+1),u=e.textDocument.positionAt(e.tokenEndOffset-1);a={start:l,end:u}}for(const c of s){const l=i.length>0?"":'"',u=`${l}${c}${l}`;n(e,{label:c,textEdit:{newText:u,range:a},kind:nd.File,sortText:"0"})}}getAllFiles(e){const n=this.documents().all,r=e.uri.toString(),i=je.dirname(e.uri).toString(),s=[];for(const a of n)if(!je.equals(a.uri,r)){const c=a.uri.toString(),l=c.substring(0,c.length-je.extname(a.uri).length);let u=je.relative(i,l);u.startsWith(".")||(u=`./${u}`),s.push(u)}return s}},o(js,"LangiumGrammarCompletionProvider"),js),Pu=_e(Ee(),1),Us,Dy=(Us=class{constructor(e){this.commentNames=e.parser.GrammarConfig.multilineCommentRules}getFoldingRanges(e){const n=[],r=o(i=>n.push(i),"acceptor");return this.collectFolding(e,r),n}collectFolding(e,n){var r;const i=(r=e.parseResult)===null||r===void 0?void 0:r.value;if(i){if(this.shouldProcessContent(i)){const s=pt(i).iterator();let a;do if(a=s.next(),!a.done){const c=a.value;this.shouldProcess(c)&&this.collectObjectFolding(e,c,n),this.shouldProcessContent(c)||s.prune()}while(!a.done)}this.collectCommentFolding(e,i,n)}}shouldProcess(e){return!0}shouldProcessContent(e){return!0}collectObjectFolding(e,n,r){const i=n.$cstNode;if(i){const s=this.toFoldingRange(e,i);s&&r(s)}}collectCommentFolding(e,n,r){const i=n.$cstNode;if(i){for(const s of dg(i))if(this.commentNames.includes(s.tokenType.name)){const a=this.toFoldingRange(e,s,Pu.FoldingRangeKind.Comment);a&&r(a)}}}toFoldingRange(e,n,r){const i=n.range,s=i.start;let a=i.end;if(!(a.line-s.line<2))return this.includeLastFoldingLine(n,r)||(a=e.textDocument.positionAt(e.textDocument.offsetAt({line:a.line,character:0})-1)),Pu.FoldingRange.create(s.line,a.line,s.character,a.character,r)}includeLastFoldingLine(e,n){if(n===Pu.FoldingRangeKind.Comment)return!1;const r=e.text,i=r.charAt(r.length-1);return!(i==="}"||i===")"||i==="]")}},o(Us,"DefaultFoldingRangeProvider"),Us),qs,eC=(qs=class extends Dy{shouldProcessContent(e){return!le(e)}},o(qs,"LangiumGrammarFoldingRangeProvider"),qs),Gs,tC=(Gs=class{constructor(){this.collector=()=>{}}getNodeFormatter(e){return new nC(e,this.collector)}formatDocument(e,n){const r=e.parseResult;return r.lexerErrors.length===0&&r.parserErrors.length===0?this.doDocumentFormat(e,n.options):[]}isFormatRangeErrorFree(e,n){const r=e.parseResult;return r.lexerErrors.length||r.parserErrors.length?Math.min(...r.lexerErrors.map(s=>{var a;return(a=s.line)!==null&&a!==void 0?a:Number.MAX_VALUE}),...r.parserErrors.map(s=>{var a;return(a=s.token.startLine)!==null&&a!==void 0?a:Number.MAX_VALUE}))>n.end.line:!0}formatDocumentRange(e,n){return this.isFormatRangeErrorFree(e,n.range)?this.doDocumentFormat(e,n.options,n.range):[]}formatDocumentOnType(e,n){const r={start:{character:0,line:n.position.line},end:n.position};return this.isFormatRangeErrorFree(e,r)?this.doDocumentFormat(e,n.options,r):[]}get formatOnTypeOptions(){}doDocumentFormat(e,n,r){const i=new Map,s=o((c,l,u)=>{var d,f;const p=this.nodeModeToKey(c,l),h=i.get(p),R=(d=u.options.priority)!==null&&d!==void 0?d:0,k=(f=h==null?void 0:h.options.priority)!==null&&f!==void 0?f:0;(!h||k<=R)&&i.set(p,u)},"collector");this.collector=s,this.iterateAstFormatting(e,r);const a=this.iterateCstFormatting(e,i,n,r);return this.avoidOverlappingEdits(e.textDocument,a)}avoidOverlappingEdits(e,n){const r=[];for(const i of n){const s=r[r.length-1];if(s){const a=e.offsetAt(i.range.start),c=e.offsetAt(s.range.end);a<c&&r.pop()}r.push(i)}return r}iterateAstFormatting(e,n){const r=e.parseResult.value;this.format(r);const i=pt(r).iterator();let s;do if(s=i.next(),!s.done){const a=s.value;this.insideRange(a.$cstNode.range,n)?this.format(a):i.prune()}while(!s.done)}nodeModeToKey(e,n){return`${e.offset}:${e.end}:${n}`}insideRange(e,n){return!n||e.start.line<=n.start.line&&e.end.line>=n.end.line||e.start.line>=n.start.line&&e.end.line<=n.end.line||e.start.line<=n.end.line&&e.end.line>=n.end.line}isNecessary(e,n){return n.getText(e.range)!==e.newText}iterateCstFormatting(e,n,r,i){const s={indentation:0,options:r,document:e.textDocument},a=[],l=this.iterateCstTree(e,s).iterator();let u,d;do if(d=l.next(),!d.done){const f=d.value,p=Zr(f),h=this.nodeModeToKey(f,"prepend"),R=n.get(h);if(n.delete(h),R){const w=this.createTextEdit(u,f,R,s);for(const E of w)E&&this.insideRange(E.range,i)&&this.isNecessary(E,e.textDocument)&&a.push(E)}const k=this.nodeModeToKey(f,"append"),A=n.get(k);if(n.delete(k),A){const w=vg(f);if(w){const E=this.createTextEdit(f,w,A,s);for(const P of E)P&&this.insideRange(P.range,i)&&this.isNecessary(P,e.textDocument)&&a.push(P)}}if(!R&&f.hidden){const w=this.createHiddenTextEdits(u,f,void 0,s);for(const E of w)E&&this.insideRange(E.range,i)&&this.isNecessary(E,e.textDocument)&&a.push(E)}p&&(u=f)}while(!d.done);return a}createHiddenTextEdits(e,n,r,i){var s;const a=n.range.start.line;if(e&&e.range.end.line===a)return[];const c=[],l={start:{character:0,line:a},end:n.range.start},u=i.document.getText(l),d=this.findFittingMove(l,(s=r==null?void 0:r.moves)!==null&&s!==void 0?s:[],i),f=this.getExistingIndentationCharacterCount(u,i),h=this.getIndentationCharacterCount(i,d)-f;if(h===0)return[];let R="";h>0&&(R=(i.options.insertSpaces?" ":"	").repeat(h));const k=n.text.split(`
`);k[0]=u+k[0];for(let A=0;A<k.length;A++){const w=a+A,E={character:0,line:w};if(h>0)c.push({newText:R,range:{start:E,end:E}});else{const P=k[A];let j=0;for(;j<P.length;j++){const z=P.charAt(j);if(z!==" "&&z!=="	")break}c.push({newText:"",range:{start:E,end:{line:w,character:Math.min(j,Math.abs(h))}}})}}return c}getExistingIndentationCharacterCount(e,n){const r=" ".repeat(n.options.tabSize);return(n.options.insertSpaces?e.replaceAll("	",r):e.replaceAll(r,"	")).length}getIndentationCharacterCount(e,n){let r=e.indentation;return n&&n.tabs&&(r+=n.tabs),(e.options.insertSpaces?e.options.tabSize:1)*r}createTextEdit(e,n,r,i){var s;if(n.hidden)return this.createHiddenTextEdits(e,n,r,i);const a={start:(s=e==null?void 0:e.range.end)!==null&&s!==void 0?s:{character:0,line:0},end:n.range.start},c=this.findFittingMove(a,r.moves,i);if(!c)return[];const l=c.characters,u=c.lines,d=c.tabs,f=i.indentation;i.indentation+=d??0;const p=[];return l!==void 0?p.push(this.createSpaceTextEdit(a,l,r.options)):u!==void 0?p.push(this.createLineTextEdit(a,u,i,r.options)):d!==void 0&&p.push(this.createTabTextEdit(a,!!e,i)),Zr(n)&&(i.indentation=f),p}createSpaceTextEdit(e,n,r){if(e.start.line===e.end.line){const s=e.end.character-e.start.character;n=this.fitIntoOptions(n,s,r)}return{newText:" ".repeat(n),range:e}}createLineTextEdit(e,n,r,i){const s=e.end.line-e.start.line;n=this.fitIntoOptions(n,s,i);const c=(r.options.insertSpaces?" ".repeat(r.options.tabSize):"	").repeat(r.indentation);return{newText:`${`
`.repeat(n)}${c}`,range:e}}createTabTextEdit(e,n,r){const s=(r.options.insertSpaces?" ".repeat(r.options.tabSize):"	").repeat(r.indentation),a=n?1:0,c=Math.max(e.end.line-e.start.line,a);return{newText:`${`
`.repeat(c)}${s}`,range:e}}fitIntoOptions(e,n,r){return r.allowMore?e=Math.max(n,e):r.allowLess&&(e=Math.min(n,e)),e}findFittingMove(e,n,r){if(n.length===0)return;if(n.length===1)return n[0];const i=e.end.line-e.start.line;for(const s of n){if(s.lines!==void 0&&i<=s.lines)return s;if(s.lines===void 0&&i===0)return s}return n[n.length-1]}iterateCstTree(e,n){const i=e.parseResult.value.$cstNode;return i?new ei(i,s=>this.iterateCst(s,n)):Xc}iterateCst(e,n){if(!wr(e))return Xc;const r=n.indentation;return new In(()=>({index:0}),i=>i.index<e.content.length?{done:!1,value:e.content[i.index++]}:(n.indentation=r,Lt))}},o(Gs,"AbstractFormatter"),Gs),Ws,nC=(Ws=class{constructor(e,n){this.astNode=e,this.collector=n}node(e){return new An(e.$cstNode?[e.$cstNode]:[],this.collector)}nodes(...e){const n=[];for(const r of e)r.$cstNode&&n.push(r.$cstNode);return new An(n,this.collector)}property(e,n){const r=Tn(this.astNode.$cstNode,e,n);return new An(r?[r]:[],this.collector)}properties(...e){const n=[];for(const r of e){const i=lc(this.astNode.$cstNode,r);n.push(...i)}return new An(n,this.collector)}keyword(e,n){const r=Pn(this.astNode.$cstNode,e,n);return new An(r?[r]:[],this.collector)}keywords(...e){const n=[];for(const r of e){const i=Pf(this.astNode.$cstNode,r);n.push(...i)}return new An(n,this.collector)}cst(e){return new An([...e],this.collector)}interior(e,n){const r=e.nodes,i=n.nodes;if(r.length!==1||i.length!==1)return new An([],this.collector);let s=r[0],a=i[0];if(s.offset>a.offset){const c=s;s=a,a=c}return new An(yg(s,a),this.collector)}},o(Ws,"DefaultNodeFormatter"),Ws),li,An=(li=class{constructor(e,n){this.nodes=e,this.collector=n}prepend(e){for(const n of this.nodes)this.collector(n,"prepend",e);return this}append(e){for(const n of this.nodes)this.collector(n,"append",e);return this}surround(e){for(const n of this.nodes)this.collector(n,"prepend",e),this.collector(n,"append",e);return this}slice(e,n){return new li(this.nodes.slice(e,n),this.collector)}},o(li,"FormattingRegion"),li),Te;(function(t){function e(...d){return{options:{},moves:d.flatMap(f=>f.moves).sort(u)}}o(e,"fit"),t.fit=e;function n(d){return i(0,d)}o(n,"noSpace"),t.noSpace=n;function r(d){return i(1,d)}o(r,"oneSpace"),t.oneSpace=r;function i(d,f){return{options:f??{},moves:[{characters:d}]}}o(i,"spaces"),t.spaces=i;function s(d){return a(1,d)}o(s,"newLine"),t.newLine=s;function a(d,f){return{options:f??{},moves:[{lines:d}]}}o(a,"newLines"),t.newLines=a;function c(d){return{options:d??{},moves:[{tabs:1,lines:1}]}}o(c,"indent"),t.indent=c;function l(d){return{options:d??{},moves:[{tabs:0}]}}o(l,"noIndent"),t.noIndent=l;function u(d,f){var p,h,R,k,A,w;const E=(p=d.lines)!==null&&p!==void 0?p:0,P=(h=f.lines)!==null&&h!==void 0?h:0,j=(R=d.tabs)!==null&&R!==void 0?R:0,z=(k=f.tabs)!==null&&k!==void 0?k:0,ie=(A=d.characters)!==null&&A!==void 0?A:0,de=(w=f.characters)!==null&&w!==void 0?w:0;return E<P?-1:E>P?1:j<z?-1:j>z?1:ie<de?-1:ie>de?1:0}o(u,"compareMoves")})(Te=Te||(Te={}));var Hs,rC=(Hs=class extends tC{format(e){if(gn(e))this.getNodeFormatter(e).properties("type","terminal").surround(Te.noSpace());else if(le(e)){const n=this.getNodeFormatter(e);n.keywords("entry","fragment","returns").append(Te.oneSpace()),(e.inferredType||e.returnType||e.dataType)&&e.parameters.length===0?n.property("name").append(Te.oneSpace()):n.property("name").append(Te.noSpace()),n.properties("parameters").append(Te.noSpace()),n.keywords(",").append(Te.oneSpace()),n.keywords("<").append(Te.noSpace());const r=n.keyword(";"),i=n.keyword(":");i.prepend(Te.noSpace()),n.interior(i,r).prepend(Te.indent()),r.prepend(Te.fit(Te.noSpace(),Te.newLine())),n.node(e).prepend(Te.noIndent())}else if(Ke(e)){const n=this.getNodeFormatter(e);e.type&&(n.property("name").append(Te.oneSpace()),n.keyword("returns").append(Te.oneSpace())),n.keywords("hidden","terminal","fragment").append(Te.oneSpace()),n.keyword(":").prepend(Te.noSpace()),n.keyword(";").prepend(Te.fit(Te.noSpace(),Te.newLine())),n.node(e).prepend(Te.noIndent())}else if(tt(e)){const n=this.getNodeFormatter(e);n.keyword("{").append(Te.noSpace()),n.keywords(".","+=","=").surround(Te.noSpace()),n.keyword("}").prepend(Te.noSpace())}else if(Ml(e))this.getNodeFormatter(e).keywords("infer","infers").append(Te.oneSpace());else if(Ye(e))this.getNodeFormatter(e).keywords("=","+=","?=").surround(Te.noSpace());else if(nt(e)){const n=this.getNodeFormatter(e);n.keyword("<").surround(Te.noSpace()),n.keyword(",").append(Te.oneSpace()),n.properties("arguments").append(Te.noSpace())}$l(e)&&this.getNodeFormatter(e).property("cardinality").prepend(Te.noSpace())}},o(Hs,"LangiumGrammarFormatter"),Hs),Gn=_e(Ee(),1),me=_e(Ee(),1),Cf={[me.SemanticTokenTypes.class]:0,[me.SemanticTokenTypes.comment]:1,[me.SemanticTokenTypes.enum]:2,[me.SemanticTokenTypes.enumMember]:3,[me.SemanticTokenTypes.event]:4,[me.SemanticTokenTypes.function]:5,[me.SemanticTokenTypes.interface]:6,[me.SemanticTokenTypes.keyword]:7,[me.SemanticTokenTypes.macro]:8,[me.SemanticTokenTypes.method]:9,[me.SemanticTokenTypes.modifier]:10,[me.SemanticTokenTypes.namespace]:11,[me.SemanticTokenTypes.number]:12,[me.SemanticTokenTypes.operator]:13,[me.SemanticTokenTypes.parameter]:14,[me.SemanticTokenTypes.property]:15,[me.SemanticTokenTypes.regexp]:16,[me.SemanticTokenTypes.string]:17,[me.SemanticTokenTypes.struct]:18,[me.SemanticTokenTypes.type]:19,[me.SemanticTokenTypes.typeParameter]:20,[me.SemanticTokenTypes.variable]:21},Oy={[me.SemanticTokenModifiers.abstract]:1,[me.SemanticTokenModifiers.async]:2,[me.SemanticTokenModifiers.declaration]:4,[me.SemanticTokenModifiers.defaultLibrary]:8,[me.SemanticTokenModifiers.definition]:16,[me.SemanticTokenModifiers.deprecated]:32,[me.SemanticTokenModifiers.documentation]:64,[me.SemanticTokenModifiers.modification]:128,[me.SemanticTokenModifiers.readonly]:256,[me.SemanticTokenModifiers.static]:512},iC={legend:{tokenTypes:Object.keys(Cf),tokenModifiers:Object.keys(Oy)},full:{delta:!0},range:!0},Bs,sC=(Bs=class extends me.SemanticTokensBuilder{constructor(){super(...arguments),this._tokens=[]}push(e,n,r,i,s){this._tokens.push({line:e,char:n,length:r,tokenType:i,tokenModifiers:s})}build(){return this.applyTokens(),super.build()}buildEdits(){return this.applyTokens(),super.buildEdits()}applyTokens(){for(const e of this._tokens.sort(this.compareTokens))super.push(e.line,e.char,e.length,e.tokenType,e.tokenModifiers);this._tokens=[]}compareTokens(e,n){return e.line===n.line?e.char-n.char:e.line-n.line}},o(Bs,"SemanticTokensBuilder"),Bs),Ks,aC=(Ks=class{constructor(e){this.tokensBuilders=new Map,e.shared.workspace.TextDocuments.onDidClose(n=>{this.tokensBuilders.delete(n.document.uri)}),e.shared.lsp.LanguageServer.onInitialize(n=>{var r;this.initialize((r=n.capabilities.textDocument)===null||r===void 0?void 0:r.semanticTokens)})}initialize(e){this.clientCapabilities=e}async semanticHighlight(e,n,r=me.CancellationToken.None){return this.currentRange=void 0,this.currentDocument=e,this.currentTokensBuilder=this.getDocumentTokensBuilder(e),await this.computeHighlighting(e,this.createAcceptor(),r),this.currentTokensBuilder.build()}async semanticHighlightRange(e,n,r=me.CancellationToken.None){return this.currentRange=n.range,this.currentDocument=e,this.currentTokensBuilder=this.getDocumentTokensBuilder(e),await this.computeHighlighting(e,this.createAcceptor(),r),this.currentTokensBuilder.build()}async semanticHighlightDelta(e,n,r=me.CancellationToken.None){return this.currentRange=void 0,this.currentDocument=e,this.currentTokensBuilder=this.getDocumentTokensBuilder(e),this.currentTokensBuilder.previousResult(n.previousResultId),await this.computeHighlighting(e,this.createAcceptor(),r),this.currentTokensBuilder.buildEdits()}createAcceptor(){return o(n=>{"line"in n?this.highlightToken({range:{start:{line:n.line,character:n.char},end:{line:n.line,character:n.char+n.length}},type:n.type,modifier:n.modifier}):"range"in n?this.highlightToken(n):"keyword"in n?this.highlightKeyword(n):"property"in n?this.highlightProperty(n):this.highlightNode({node:n.cst,type:n.type,modifier:n.modifier})},"acceptor")}getDocumentTokensBuilder(e){const n=this.tokensBuilders.get(e.uri.toString());if(n)return n;const r=new sC;return this.tokensBuilders.set(e.uri.toString(),r),r}async computeHighlighting(e,n,r){const i=e.parseResult.value,s=sc(i,{range:this.currentRange}).iterator();let a;do if(a=s.next(),!a.done){await gt(r);const c=a.value;this.highlightElement(c,n)==="prune"&&s.prune()}while(!a.done)}highlightToken(e){var n;const{range:r,type:i}=e;let s=e.modifier;if(this.currentRange&&!Wd(r,this.currentRange)||!this.currentDocument||!this.currentTokensBuilder)return;const a=Cf[i];let c=0;if(s!==void 0){typeof s=="string"&&(s=[s]);for(const d of s){const f=Oy[d];c|=f}}const l=r.start.line,u=r.end.line;if(l===u){const d=r.start.character,f=r.end.character-d;this.currentTokensBuilder.push(l,d,f,a,c)}else if(!((n=this.clientCapabilities)===null||n===void 0)&&n.multilineTokenSupport){const d=r.start.character,f=this.currentDocument.textDocument.offsetAt(r.start),p=this.currentDocument.textDocument.offsetAt(r.end);this.currentTokensBuilder.push(l,d,p-f,a,c)}else{const d=r.start;let f=this.currentDocument.textDocument.offsetAt({line:l+1,character:0});this.currentTokensBuilder.push(d.line,d.character,f-d.character-1,a,c);for(let p=l+1;p<u;p++){const h=f;f=this.currentDocument.textDocument.offsetAt({line:p+1,character:0}),this.currentTokensBuilder.push(p,0,f-h-1,a,c)}this.currentTokensBuilder.push(u,0,r.end.character,a,c)}}highlightProperty(e){const n=[];if(typeof e.index=="number"){const s=Tn(e.node.$cstNode,e.property,e.index);s&&n.push(s)}else n.push(...lc(e.node.$cstNode,e.property));const{type:r,modifier:i}=e;for(const s of n)this.highlightNode({node:s,type:r,modifier:i})}highlightKeyword(e){const{node:n,keyword:r,type:i,index:s,modifier:a}=e,c=[];if(typeof s=="number"){const l=Pn(n.$cstNode,r,s);l&&c.push(l)}else c.push(...Pf(n.$cstNode,r));for(const l of c)this.highlightNode({node:l,type:i,modifier:a})}highlightNode(e){const{node:n,type:r,modifier:i}=e,s=n.range;this.highlightToken({range:s,type:r,modifier:i})}},o(Ks,"AbstractSemanticTokenProvider"),Ks),Iu;(function(t){function e(r,i){const s=new Map;Object.entries(Cf).forEach(([l,u])=>s.set(u,l));let a=0,c=0;return n(r.data,5).map(l=>{a+=l[0],l[0]!==0&&(c=0),c+=l[1];const u=l[2];return{offset:i.textDocument.offsetAt({line:a,character:c}),tokenType:s.get(l[3]),tokenModifiers:l[4],text:i.textDocument.getText({start:{line:a,character:c},end:{line:a,character:c+u}})}})}o(e,"decode"),t.decode=e;function n(r,i){const s=[];for(let a=0;a<r.length;a+=i){const c=r.slice(a,a+i);s.push(c)}return s}o(n,"sliceIntoChunks")})(Iu=Iu||(Iu={}));var zs,oC=(zs=class extends aC{highlightElement(e,n){var r;Ye(e)?n({node:e,property:"feature",type:Gn.SemanticTokenTypes.property}):tt(e)?e.feature&&n({node:e,property:"feature",type:Gn.SemanticTokenTypes.property}):xl(e)?n({node:e,property:"name",type:Gn.SemanticTokenTypes.type}):Rn(e)?(e.primitiveType||e.typeRef)&&n({node:e,property:e.primitiveType?"primitiveType":"typeRef",type:Gn.SemanticTokenTypes.type}):Ig(e)?n({node:e,property:"name",type:Gn.SemanticTokenTypes.parameter}):Fl(e)?n({node:e,property:"parameter",type:Gn.SemanticTokenTypes.parameter}):nt(e)?!((r=e.rule.ref)===null||r===void 0)&&r.fragment&&n({node:e,property:"rule",type:Gn.SemanticTokenTypes.type}):zd(e)&&n({node:e,property:"name",type:Gn.SemanticTokenTypes.property})}},o(zs,"LangiumGrammarSemanticTokenProvider"),zs),Vs,cC=(Vs=class extends Nv{getName(e){return Ye(e)?e.feature:super.getName(e)}getNameNode(e){return Ye(e)?Tn(e.$cstNode,"feature"):super.getNameNode(e)}},o(Vs,"LangiumGrammarNameProvider"),Vs),Xs,Ly=(Xs=class{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const n=Yl(e),r=e.astNode;if(n&&r){const i=r[n.feature];if(Tr(i))return i.ref;if(Array.isArray(i)){for(const s of i)if(Tr(s)&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return s.ref}}if(r){const i=this.nameProvider.getNameNode(r);if(i&&(i===e||fg(e,i)))return r}}}findDeclarationNode(e){const n=this.findDeclaration(e);if(n!=null&&n.$cstNode){const r=this.nameProvider.getNameNode(n);return r??n.$cstNode}}findReferences(e,n){const r=[];if(n.includeDeclaration){const s=this.getReferenceToSelf(e);s&&r.push(s)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return n.documentUri&&(i=i.filter(s=>je.equals(s.sourceUri,n.documentUri))),r.push(...i),Ne(r)}getReferenceToSelf(e){const n=this.nameProvider.getNameNode(e);if(n){const r=Ce(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:Kt(n),local:!0}}}},o(Xs,"DefaultReferences"),Xs),Ys,lC=(Ys=class extends Ly{constructor(e){super(e),this.documents=e.shared.workspace.LangiumDocuments}findDeclaration(e){const n=e.astNode,r=Yl(e);if(r&&r.feature==="feature"){if(Ye(n))return this.findAssignmentDeclaration(n);if(tt(n))return this.findActionDeclaration(n)}return super.findDeclaration(e)}findReferences(e,n){var r;return zd(e)?this.findReferencesToTypeAttribute(e,(r=n.includeDeclaration)!==null&&r!==void 0?r:!1):super.findReferences(e,n)}findReferencesToTypeAttribute(e,n){const r=[],i=Xe(e,sn);if(i){if(n){const c=this.getReferenceToSelf(e);c&&r.push(c)}const s=df(i,this,this.documents,this.nodeLocator),a=[];s.forEach(c=>{const l=this.findRulesWithReturnType(c);a.push(...l)}),a.forEach(c=>{const l=this.createReferencesToAttribute(c,e);r.push(...l)})}return Ne(r)}createReferencesToAttribute(e,n){const r=[];if(le(e)){const i=Ji(e.definition).find(s=>s.feature===n.name);if(i!=null&&i.$cstNode){const s=this.nameProvider.getNameNode(i);s&&r.push({sourceUri:Ce(i).uri,sourcePath:this.nodeLocator.getAstNodePath(i),targetUri:Ce(n).uri,targetPath:this.nodeLocator.getAstNodePath(n),segment:Kt(s),local:je.equals(Ce(i).uri,Ce(n).uri)})}}else{if(e.feature===n.name){const s=Tn(e.$cstNode,"feature");s&&r.push({sourceUri:Ce(e).uri,sourcePath:this.nodeLocator.getAstNodePath(e),targetUri:Ce(n).uri,targetPath:this.nodeLocator.getAstNodePath(n),segment:Kt(s),local:je.equals(Ce(e).uri,Ce(n).uri)})}const i=Xe(e,le);r.push(...this.createReferencesToAttribute(i,n))}return r}findAssignmentDeclaration(e){var n;const r=Xe(e,le),i=vf(e);if(i){const s=this.findActionDeclaration(i,e.feature);if(s)return s}if(!((n=r==null?void 0:r.returnType)===null||n===void 0)&&n.ref&&(sn(r.returnType.ref)||Et(r.returnType.ref))){const s=Hi(r.returnType.ref);for(const a of s){const c=a.attributes.find(l=>l.name===e.feature);if(c)return c}}return e}findActionDeclaration(e,n){var r;if(!((r=e.type)===null||r===void 0)&&r.ref){const i=n??e.feature,s=Hi(e.type.ref);for(const a of s){const c=a.attributes.find(l=>l.name===i);if(c)return c}}}findRulesWithReturnType(e){const n=[];return this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e)).forEach(i=>{const s=this.documents.getOrCreateDocument(i.sourceUri),a=this.nodeLocator.getAstNode(s.parseResult.value,i.sourcePath);(le(a)||tt(a))&&n.push(a)}),n}},o(Ys,"LangiumGrammarReferences"),Ys),Du=_e(Ee(),1),uC=_e(Ee(),1),Js,dC=(Js=class{constructor(e){this.grammarConfig=e.parser.GrammarConfig,this.nameProvider=e.references.NameProvider,this.documents=e.shared.workspace.LangiumDocuments,this.references=e.references.References}prepareCallHierarchy(e,n){const r=e.parseResult.value,i=tn(r.$cstNode,e.textDocument.offsetAt(n.position),this.grammarConfig.nameRegexp);if(!i)return;const s=this.references.findDeclarationNode(i);if(s)return this.getCallHierarchyItems(s.astNode,e)}getCallHierarchyItems(e,n){const r=this.nameProvider.getNameNode(e),i=this.nameProvider.getName(e);if(!(!r||!e.$cstNode||i===void 0))return[Object.assign({kind:uC.SymbolKind.Method,name:i,range:e.$cstNode.range,selectionRange:r.range,uri:n.uri.toString()},this.getCallHierarchyItem(e))]}getCallHierarchyItem(e){}incomingCalls(e){const n=this.documents.getOrCreateDocument(ti.parse(e.item.uri)),r=n.parseResult.value,i=tn(r.$cstNode,n.textDocument.offsetAt(e.item.range.start),this.grammarConfig.nameRegexp);if(!i)return;const s=this.references.findReferences(i.astNode,{includeDeclaration:!1});return this.getIncomingCalls(i.astNode,s)}outgoingCalls(e){const n=this.documents.getOrCreateDocument(ti.parse(e.item.uri)),r=n.parseResult.value,i=tn(r.$cstNode,n.textDocument.offsetAt(e.item.range.start),this.grammarConfig.nameRegexp);if(i)return this.getOutgoingCalls(i.astNode)}},o(Js,"AbstractCallHierarchyProvider"),Js),fC=_e(Ee(),1),Qs,$y=(Qs=class{constructor(e){this.nameProvider=e.references.NameProvider,this.references=e.references.References,this.grammarConfig=e.parser.GrammarConfig}getDefinition(e,n){const r=e.parseResult.value;if(r.$cstNode){const i=r.$cstNode,s=tn(i,e.textDocument.offsetAt(n.position),this.grammarConfig.nameRegexp);if(s)return this.collectLocationLinks(s,n)}}collectLocationLinks(e,n){var r;const i=this.findLink(e);if(i)return[fC.LocationLink.create(i.targetDocument.textDocument.uri,((r=i.target.astNode.$cstNode)!==null&&r!==void 0?r:i.target).range,i.target.range,i.source.range)]}findLink(e){const n=this.references.findDeclarationNode(e);if(n!=null&&n.astNode){const r=Ce(n.astNode);if(n&&r)return{source:e,target:n,targetDocument:r}}}},o(Qs,"DefaultDefinitionProvider"),Qs),hC=_e(Ee(),1),Zs,pC=(Zs=class{constructor(e){this.references=e.references.References,this.nameProvider=e.references.NameProvider,this.grammarConfig=e.parser.GrammarConfig}getDocumentHighlight(e,n){const r=e.parseResult.value.$cstNode;if(!r)return;const i=tn(r,e.textDocument.offsetAt(n.position),this.grammarConfig.nameRegexp);if(!i)return;const s=this.references.findDeclaration(i);if(s){const a=je.equals(Ce(s).uri,e.uri),c={documentUri:e.uri,includeDeclaration:a};return this.references.findReferences(s,c).map(u=>this.createDocumentHighlight(u)).toArray()}}createDocumentHighlight(e){return hC.DocumentHighlight.create(e.segment.range)}},o(Zs,"DefaultDocumentHighlightProvider"),Zs),ea,mC=(ea=class{constructor(e){this.nameProvider=e.references.NameProvider,this.nodeKindProvider=e.shared.lsp.NodeKindProvider}getSymbols(e){return this.getSymbol(e,e.parseResult.value)}getSymbol(e,n){const r=n.$cstNode,i=this.nameProvider.getNameNode(n);if(i&&r){const s=this.nameProvider.getName(n);return[{kind:this.nodeKindProvider.getSymbolKind(n),name:s??i.text,range:r.range,selectionRange:i.range,children:this.getChildSymbols(e,n)}]}else return this.getChildSymbols(e,n)||[]}getChildSymbols(e,n){const r=[];for(const i of hi(n)){const s=this.getSymbol(e,i);r.push(...s)}if(r.length>0)return r}},o(ea,"DefaultDocumentSymbolProvider"),ea);_e(Ee(),1);var ta,gC=(ta=class{match(e,n){if(e.length===0)return!0;n=n.toLowerCase();let r=!1,i,s=0;const a=n.length;for(let c=0;c<a;c++){const l=n.charCodeAt(c),u=e.charCodeAt(s);if((l===u||this.toUpperCharCode(l)===this.toUpperCharCode(u))&&(r||(r=i===void 0||this.isWordTransition(i,l)),r&&s++,s===e.length))return!0;i=l}return!1}isWordTransition(e,n){return Bp<=e&&e<=Kp&&vC<=n&&n<=yC||e===zp&&n!==zp}toUpperCharCode(e){return Bp<=e&&e<=Kp?e-32:e}},o(ta,"DefaultFuzzyMatcher"),ta),Bp=97,Kp=122,vC=65,yC=90,zp=95,na,TC=(na=class{constructor(e){this.references=e.references.References,this.grammarConfig=e.parser.GrammarConfig}getHoverContent(e,n){var r,i;const s=(i=(r=e.parseResult)===null||r===void 0?void 0:r.value)===null||i===void 0?void 0:i.$cstNode;if(s){const a=e.textDocument.offsetAt(n.position),c=tn(s,a,this.grammarConfig.nameRegexp);if(c&&c.offset+c.length>a){const l=this.references.findDeclaration(c);if(l)return this.getAstNodeHoverContent(l)}}}},o(na,"AstNodeHoverProvider"),na),ra,RC=(ra=class extends TC{constructor(e){super(e),this.documentationProvider=e.documentation.DocumentationProvider}getAstNodeHoverContent(e){const n=this.documentationProvider.getDocumentation(e);if(n)return{contents:{kind:"markdown",value:n}}}},o(ra,"MultilineCommentHoverProvider"),ra);_e(Ee(),1);_e(Ee(),1);var Ou=_e(Ee(),1),Be;(function(t){t[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated"})(Be=Be||(Be={}));var ia,_C=(ia=class{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}fromTextDocument(e,n){return this.create(n??ti.parse(e.uri),e)}fromString(e,n){return this.create(n,e)}fromModel(e,n){return this.create(n,{$model:e})}create(e,n){if(n??(n=this.textDocuments.get(e.toString())),n??(n=this.getContentFromFileSystem(e)),typeof n=="string"){const r=this.parse(e,n);return this.createLangiumDocument(r,e,void 0,n)}else if("$model"in n){const r={value:n.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}else{const r=this.parse(e,n.getText());return this.createLangiumDocument(r,e,n)}}createLangiumDocument(e,n,r,i){let s;if(r)s={parseResult:e,uri:n,state:Be.Parsed,references:[],textDocument:r};else{const a=this.createTextDocumentGetter(n,i);s={parseResult:e,uri:n,state:Be.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=s,s}update(e){const n=this.textDocuments.get(e.uri.toString()),r=n?n.getText():this.getContentFromFileSystem(e.uri);if(n)Object.defineProperty(e,"textDocument",{value:n});else{const i=this.createTextDocumentGetter(e.uri,r);Object.defineProperty(e,"textDocument",{get:i})}return e.parseResult=this.parse(e.uri,r),e.parseResult.value.$document=e,e}getContentFromFileSystem(e){return this.fileSystemProvider.readFileSync(e)}parse(e,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(n)}createTextDocumentGetter(e,n){const r=this.serviceRegistry;let i;return()=>i??(i=zc.create(e.toString(),r.getServices(e).LanguageMetaData.languageId,0,n??""))}},o(ia,"DefaultLangiumDocumentFactory"),ia),sa,bC=(sa=class{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory}get all(){return Ne(this.documentMap.values())}addDocument(e){const n=e.uri.toString();if(this.documentMap.has(n))throw new Error(`A document with the URI '${n}' is already present.`);this.documentMap.set(n,e)}getOrCreateDocument(e){const n=e.toString();let r=this.documentMap.get(n);return r||(r=this.langiumDocumentFactory.create(e),this.documentMap.set(n,r),r)}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const n=e.toString(),r=this.documentMap.get(n);return r&&(r.state=Be.Changed,r.precomputedScopes=void 0,r.references=[],r.diagnostics=void 0),r}deleteDocument(e){const n=e.toString(),r=this.documentMap.get(n);return r&&(r.state=Be.Changed,this.documentMap.delete(n)),r}},o(sa,"DefaultLangiumDocuments"),sa);_e(Ee(),1);function My(t){const e=[],n=[];t.forEach(i=>{i!=null&&i.triggerCharacters&&e.push(...i.triggerCharacters),i!=null&&i.retriggerCharacters&&n.push(...i.retriggerCharacters)});const r={triggerCharacters:e.length>0?Array.from(new Set(e)).sort():void 0,retriggerCharacters:n.length>0?Array.from(new Set(n)).sort():void 0};return r.triggerCharacters?r:void 0}o(My,"mergeSignatureHelpOptions");var aa,kC=(aa=class{constructor(e){this.onInitializeEmitter=new Ou.Emitter,this.onInitializedEmitter=new Ou.Emitter,this.services=e}get onInitialize(){return this.onInitializeEmitter.event}get onInitialized(){return this.onInitializedEmitter.event}async initialize(e){return this.eagerLoadServices(),this.onInitializeEmitter.fire(e),this.onInitializeEmitter.dispose(),this.buildInitializeResult(e)}eagerLoadServices(){Jc(this.services),this.services.ServiceRegistry.all.forEach(e=>Jc(e))}hasService(e){return this.services.ServiceRegistry.all.some(n=>e(n)!==void 0)}buildInitializeResult(e){var n;const r=this.services.ServiceRegistry.all,i=this.hasService(v=>v.lsp.Formatter),s=r.map(v=>{var q;return(q=v.lsp.Formatter)===null||q===void 0?void 0:q.formatOnTypeOptions}).find(v=>!!v),a=this.hasService(v=>v.lsp.CodeActionProvider),c=this.hasService(v=>v.lsp.SemanticTokenProvider),l=(n=this.services.lsp.ExecuteCommandHandler)===null||n===void 0?void 0:n.commands,u=this.hasService(v=>v.lsp.DocumentLinkProvider),d=My(r.map(v=>{var q;return(q=v.lsp.SignatureHelp)===null||q===void 0?void 0:q.signatureHelpOptions})),f=this.hasService(v=>v.lsp.TypeProvider),p=this.hasService(v=>v.lsp.ImplementationProvider),h=this.hasService(v=>v.lsp.CompletionProvider),R=Py(r.map(v=>{var q;return(q=v.lsp.CompletionProvider)===null||q===void 0?void 0:q.completionOptions})),k=this.hasService(v=>v.lsp.ReferencesProvider),A=this.hasService(v=>v.lsp.DocumentSymbolProvider),w=this.hasService(v=>v.lsp.DefinitionProvider),E=this.hasService(v=>v.lsp.DocumentHighlightProvider),P=this.hasService(v=>v.lsp.FoldingRangeProvider),j=this.hasService(v=>v.lsp.HoverProvider),z=this.hasService(v=>v.lsp.RenameProvider),ie=this.hasService(v=>v.lsp.CallHierarchyProvider),de=this.hasService(v=>v.lsp.CodeLensProvider),ve=this.hasService(v=>v.lsp.DeclarationProvider),ue=this.hasService(v=>v.lsp.InlayHintProvider),L=this.services.lsp.WorkspaceSymbolProvider;return{capabilities:{workspace:{workspaceFolders:{supported:!0}},executeCommandProvider:l&&{commands:l},textDocumentSync:Ou.TextDocumentSyncKind.Incremental,completionProvider:h?R:void 0,referencesProvider:k,documentSymbolProvider:A,definitionProvider:w,typeDefinitionProvider:f,documentHighlightProvider:E,codeActionProvider:a,documentFormattingProvider:i,documentRangeFormattingProvider:i,documentOnTypeFormattingProvider:s,foldingRangeProvider:P,hoverProvider:j,renameProvider:z?{prepareProvider:!0}:void 0,semanticTokensProvider:c?iC:void 0,signatureHelpProvider:d,implementationProvider:p,callHierarchyProvider:ie?{}:void 0,documentLinkProvider:u?{resolveProvider:!1}:void 0,codeLensProvider:de?{resolveProvider:!1}:void 0,declarationProvider:ve,inlayHintProvider:ue?{resolveProvider:!1}:void 0,workspaceSymbolProvider:L?{resolveProvider:!!L.resolveSymbol}:void 0}}}async initialized(e){this.onInitializedEmitter.fire(e),this.onInitializedEmitter.dispose()}},o(aa,"DefaultLanguageServer"),aa),Vp=_e(Ee(),1),oa,SC=(oa=class{getSymbolKind(){return Vp.SymbolKind.Field}getCompletionItemKind(){return Vp.CompletionItemKind.Reference}},o(oa,"DefaultNodeKindProvider"),oa),AC=_e(Ee(),1),ca,wC=(ca=class{constructor(e){this.nameProvider=e.references.NameProvider,this.references=e.references.References,this.grammarConfig=e.parser.GrammarConfig}findReferences(e,n){const r=e.parseResult.value.$cstNode;if(!r)return[];const i=tn(r,e.textDocument.offsetAt(n.position),this.grammarConfig.nameRegexp);return i?this.getReferences(i,n,e):[]}getReferences(e,n,r){const i=[],s=this.references.findDeclaration(e);if(s){const a={includeDeclaration:n.context.includeDeclaration};this.references.findReferences(s,a).forEach(c=>{i.push(AC.Location.create(c.sourceUri.toString(),c.segment.range))})}return i}},o(ca,"DefaultReferencesProvider"),ca),CC=_e(Ee(),1),la,EC=(la=class{constructor(e){this.references=e.references.References,this.nameProvider=e.references.NameProvider,this.grammarConfig=e.parser.GrammarConfig}async rename(e,n){const r={},i=e.parseResult.value.$cstNode;if(!i)return;const s=e.textDocument.offsetAt(n.position),a=tn(i,s,this.grammarConfig.nameRegexp);if(!a)return;const c=this.references.findDeclaration(a);if(!c)return;const l={onlyLocal:!1,includeDeclaration:!0};return this.references.findReferences(c,l).forEach(d=>{const f=CC.TextEdit.replace(d.segment.range,n.newName),p=d.sourceUri.toString();r[p]?r[p].push(f):r[p]=[f]}),{changes:r}}prepareRename(e,n){return this.renameNodeRange(e,n.position)}renameNodeRange(e,n){const r=e.parseResult.value.$cstNode,i=e.textDocument.offsetAt(n);if(r&&i){const s=tn(r,i,this.grammarConfig.nameRegexp);if(!s)return;if(this.references.findDeclaration(s)||this.isNameNode(s))return s.range}}isNameNode(e){return(e==null?void 0:e.astNode)&&Gl(e.astNode)&&e===this.nameProvider.getNameNode(e.astNode)}},o(la,"DefaultRenameProvider"),la);_e(Ee(),1);var NC=_e(Ee(),1),ua,PC=(ua=class{constructor(e){this.indexManager=e.workspace.IndexManager,this.nodeKindProvider=e.lsp.NodeKindProvider,this.fuzzyMatcher=e.lsp.FuzzyMatcher}async getSymbols(e,n=NC.CancellationToken.None){const r=[],i=e.query.toLowerCase();for(const s of this.indexManager.allElements())if(await gt(n),this.fuzzyMatcher.match(i,s.name)){const a=this.getWorkspaceSymbol(s);a&&r.push(a)}return r}getWorkspaceSymbol(e){const n=e.nameSegment;if(n)return{kind:this.nodeKindProvider.getSymbolKind(e),name:e.name,location:{range:n.range,uri:e.documentUri.toString()}}}},o(ua,"DefaultWorkspaceSymbolProvider"),ua),da,IC=(da=class extends $y{constructor(e){super(e),this.documents=e.shared.workspace.LangiumDocuments}collectLocationLinks(e,n){var r,i,s,a,c,l;if(Kd(e.astNode)&&((r=Yl(e))===null||r===void 0?void 0:r.feature)==="path"){const d=_r(this.documents,e.astNode);if(d!=null&&d.$document){const f=(i=this.findTargetObject(d))!==null&&i!==void 0?i:d,p=(a=(s=this.nameProvider.getNameNode(f))===null||s===void 0?void 0:s.range)!==null&&a!==void 0?a:Du.Range.create(0,0,0,0),h=(l=(c=f.$cstNode)===null||c===void 0?void 0:c.range)!==null&&l!==void 0?l:Du.Range.create(0,0,0,0);return[Du.LocationLink.create(d.$document.uri.toString(),h,p,e.range)]}return}return super.collectLocationLinks(e,n)}findTargetObject(e){return e.isDeclared?e:hi(e).head()}},o(da,"LangiumGrammarDefinitionProvider"),da),Xp=_e(Ee(),1),fa,DC=(fa=class extends dC{getIncomingCalls(e,n){if(!le(e))return;const r=new Map;if(n.forEach(i=>{const a=this.documents.getOrCreateDocument(i.sourceUri).parseResult.value;if(!a.$cstNode)return;const c=Zt(a.$cstNode,i.segment.offset);if(!c)return;const l=Xe(c.astNode,le);if(!l||!l.$cstNode)return;const u=this.nameProvider.getNameNode(l);if(!u)return;const d=i.sourceUri.toString(),f=d+"@"+u.text;r.has(f)?r.set(f,{parserRule:l.$cstNode,nameNode:u,targetNodes:[...r.get(f).targetNodes,c],docUri:d}):r.set(f,{parserRule:l.$cstNode,nameNode:u,targetNodes:[c],docUri:d})}),r.size!==0)return Array.from(r.values()).map(i=>({from:{kind:Xp.SymbolKind.Method,name:i.nameNode.text,range:i.parserRule.range,selectionRange:i.nameNode.range,uri:i.docUri},fromRanges:i.targetNodes.map(s=>s.range)}))}getOutgoingCalls(e){if(!le(e))return;const n=pt(e).filter(nt).toArray(),r=new Map;if(n.forEach(i=>{var s;const a=i.$cstNode;if(!a)return;const c=(s=i.rule.ref)===null||s===void 0?void 0:s.$cstNode;if(!c)return;const l=this.nameProvider.getNameNode(c.astNode);if(!l)return;const u=Ce(c.astNode).uri.toString(),d=u+"@"+l.text;r.has(d)?r.set(d,{refCstNode:c,to:l,from:[...r.get(d).from,a.range],docUri:u}):r.set(d,{refCstNode:c,to:l,from:[a.range],docUri:u})}),r.size!==0)return Array.from(r.values()).map(i=>({to:{kind:Xp.SymbolKind.Method,name:i.to.text,range:i.refCstNode.range,selectionRange:i.to.range,uri:i.docUri},fromRanges:i.from}))}},o(fa,"LangiumGrammarCallHierarchyProvider"),fa),ha,OC=(ha=class{constructor(e){this.documents=e.shared.workspace.LangiumDocuments}collectValidationResources(e){const n=hy(e,this.documents);return{typeToValidationInfo:this.collectValidationInfo(n),typeToSuperProperties:this.collectSuperProperties(n)}}collectValidationInfo({astResources:e,inferred:n,declared:r}){const i=new Map,s=Fy(e);for(const c of Vu(n))i.set(c.name,{inferred:c,inferredNodes:s.get(c.name)});const a=Ne(e.interfaces).concat(e.types).reduce((c,l)=>c.set(l.name,l),new Map);for(const c of Vu(r)){const l=a.get(c.name);if(l){const u=i.get(c.name);i.set(c.name,Object.assign(Object.assign({},u??{}),{declared:c,declaredNode:l}))}}return i}collectSuperProperties({inferred:e,declared:n}){const r=new Map,i=zu(e,n),s=new Map(i.map(a=>[a.name,a]));for(const a of zu(e,n))r.set(a.name,this.addSuperProperties(a,s,new Set));return r}addSuperProperties(e,n,r){if(r.has(e.name))return[];r.add(e.name);const i=[...e.properties];for(const s of e.superTypes){const a=n.get(s.name);a&&i.push(...this.addSuperProperties(a,n,r))}return i}},o(ha,"LangiumGrammarValidationResourcesCollector"),ha);function Fy({parserRules:t,datatypeRules:e}){const n=new dt;Ne(t).concat(e).forEach(i=>n.add(cc(i),i));function r(i){if(tt(i)){const s=Yi(i);s&&n.add(s,i)}(Fn(i)||At(i)||xn(i))&&i.elements.forEach(s=>r(s))}return o(r,"collectActions"),t.forEach(i=>r(i.definition)),n}o(Fy,"collectNameToRulesActions");function xy(t){return t&&"declared"in t}o(xy,"isDeclared");function jy(t){return t&&"inferred"in t}o(jy,"isInferred");function Uy(t){return t&&"inferred"in t&&"declared"in t}o(Uy,"isInferredAndDeclared");function qy(t){const e=t.validation.ValidationRegistry,n=t.validation.LangiumGrammarTypesValidator,r={Action:[n.checkActionIsNotUnionType],Grammar:[n.checkDeclaredTypesConsistency,n.checkDeclaredAndInferredTypesConsistency],Interface:[n.checkCyclicInterface],Type:[n.checkCyclicType]};e.register(r,n)}o(qy,"registerTypeValidationChecks");var pa,LC=(pa=class{checkCyclicType(e,n){Cn(e,new Set)&&n("error",`Type alias '${e.name}' circularly references itself.`,{node:e,property:"name"})}checkCyclicInterface(e,n){Cn(e,new Set)&&n("error",`Type '${e.name}' recursively references itself as a base type.`,{node:e,property:"name"})}checkDeclaredTypesConsistency(e,n){var r;const i=(r=e.$document)===null||r===void 0?void 0:r.validationResources;if(i){for(const s of i.typeToValidationInfo.values())if(xy(s)&&pn(s.declared)&&sn(s.declaredNode)){const a=s;Wy(a,n),Hy(a,n)}}}checkDeclaredAndInferredTypesConsistency(e,n){var r;const i=(r=e.$document)===null||r===void 0?void 0:r.validationResources;if(i)for(const s of i.typeToValidationInfo.values())jy(s)&&s.inferred instanceof Sv&&Gy(s.inferred,n),Uy(s)&&zy(s,i,n)}checkActionIsNotUnionType(e,n){Et(e.type)&&n("error","Actions cannot create union types.",{node:e,property:"type"})}},o(pa,"LangiumGrammarTypesValidator"),pa);function Cn(t,e){var n;if(e.has(t))return!0;if(e.add(t),Et(t))return Cn(t.type,e);if(sn(t))return t.superTypes.some(r=>r.ref&&Cn(r.ref,e));if(Rn(t)){if(!((n=t.typeRef)===null||n===void 0)&&n.ref)return Cn(t.typeRef.ref,e)}else{if(ic(t))return Cn(t.referenceType,e);if(rc(t))return Cn(t.elementType,e);if(er(t))return t.types.some(r=>Cn(r,e))}return!1}o(Cn,"isCyclicType");function Gy(t,e){t.properties.forEach(n=>{var r;const i=af(n.type);if(i.length>1){const s=o(c=>zn(c)?"ref":"other","typeKind"),a=s(i[0]);if(i.slice(1).some(c=>s(c)!==a)){const c=(r=n.astNodes.values().next())===null||r===void 0?void 0:r.value;c&&e("error",`Mixing a cross-reference with other types is not supported. Consider splitting property "${n.name}" into two or more different properties.`,{node:c})}}})}o(Gy,"validateInferredInterface");function Wy({declared:t,declaredNode:e},n){Array.from(t.superTypes).forEach((r,i)=>{r&&(hn(r)&&n("error","Interfaces cannot extend union types.",{node:e,property:"superTypes",index:i}),r.declared||n("error","Extending an inferred type is discouraged.",{node:e,property:"superTypes",index:i}))})}o(Wy,"validateInterfaceSuperTypes");function Hy({declared:t,declaredNode:e},n){const r=t.properties.reduce((a,c)=>a.add(c.name,c),new dt);for(const[a,c]of r.entriesGroupedByKey())if(c.length>1)for(const l of c)n("error",`Cannot have two properties with the same name '${a}'.`,{node:Array.from(l.astNodes)[0],property:"name"});const i=Array.from(t.superTypes);for(let a=0;a<i.length;a++)for(let c=a+1;c<i.length;c++){const l=i[a],u=i[c],d=pn(l)?l.superProperties:[],f=pn(u)?u.superProperties:[],p=By(d,f);p.length>0&&n("error",`Cannot simultaneously inherit from '${l}' and '${u}'. Their ${p.map(h=>"'"+h+"'").join(", ")} properties are not identical.`,{node:e,property:"name"})}const s=new Set;for(const a of i){const c=pn(a)?a.superProperties:[];for(const l of c)s.add(l.name)}for(const a of t.properties)if(s.has(a.name)){const c=e.attributes.find(l=>l.name===a.name);c&&n("error",`Cannot redeclare property '${a.name}'. It is already inherited from another interface.`,{node:c,property:"name"})}}o(Hy,"validateSuperTypesConsistency");function By(t,e){const n=[];for(const r of t){const i=e.find(s=>s.name===r.name);i&&!Ky(r,i)&&n.push(r.name)}return n}o(By,"getNonIdenticalProps");function Ky(t,e){return Wi(t.type,e.type)&&Wi(e.type,t.type)}o(Ky,"arePropTypesIdentical");function zy(t,e,n){const{inferred:r,declared:i,declaredNode:s,inferredNodes:a}=t,c=i.name,l=o(f=>p=>a.forEach(h=>n("error",`${p}${f?` ${f}`:""}.`,h!=null&&h.inferredType?{node:h==null?void 0:h.inferredType,property:"name"}:{node:h,property:tt(h)?"type":"name"})),"applyErrorToRulesAndActions"),u=o((f,p)=>f.forEach(h=>n("error",p,{node:h,property:Ye(h)||tt(h)?"feature":"name"})),"applyErrorToProperties"),d=o(f=>{a.forEach(p=>{le(p)&&Ji(p.definition).find(R=>R.feature===f)===void 0&&n("error",`Property '${f}' is missing in a rule '${p.name}', but is required in type '${c}'.`,{node:p,property:"parameters"})})},"applyMissingPropErrorToRules");if(hn(r)&&hn(i))Vy(r.type,i.type,l(`in a rule that returns type '${c}'`));else if(pn(r)&&pn(i))Xy(r,i,e,l(`in a rule that returns type '${c}'`),u,d);else{const f=`Inferred and declared versions of type '${c}' both have to be interfaces or unions.`;l()(f),n("error",f,{node:s,property:"name"})}}o(zy,"validateDeclaredAndInferredConsistency");function Vy(t,e,n){Wi(t,e)||n(`Cannot assign type '${nn(t,"DeclaredType")}' to '${nn(e,"DeclaredType")}'`)}o(Vy,"validateAlternativesConsistency");function ud(t){return t.optional||Ul(t.type)}o(ud,"isOptionalProperty");function Xy(t,e,n,r,i,s){const a=new Set(t.properties.map(f=>f.name)),c=new Map(t.allProperties.map(f=>[f.name,f])),l=new Map(e.superProperties.map(f=>[f.name,f])),u=o(f=>{if(lt(f))return{types:f.types.map(p=>u(p))};if(zn(f))return{referenceType:u(f.referenceType)};if(Vn(f))return{elementType:u(f.elementType)};if(en(f)){const p=n.typeToValidationInfo.get(f.value.name);return p?{value:"declared"in p?p.declared:p.inferred}:f}return f},"matchingProp");for(const[f,p]of c.entries()){const h=l.get(f);if(h){const R=nn(p.type,"DeclaredType"),k=nn(h.type,"DeclaredType");if(!Wi(u(p.type),h.type)&&k!=="unknown"){const w=`The assigned type '${R}' is not compatible with the declared property '${f}' of type '${k}'.`;i(p.astNodes,w)}p.optional&&!ud(h)&&s(f)}else a.has(f)&&i(p.astNodes,`A property '${f}' is not expected.`)}const d=new Set;for(const[f,p]of l.entries())!c.get(f)&&!ud(p)&&d.add(f);if(d.size>0){const f=d.size>1?"Properties":"A property",p=d.size>1?"are expected":"is expected",h=Array.from(d).map(R=>`'${R}'`).sort().join(", ");r(`${f} ${h} ${p}.`)}}o(Xy,"validatePropertiesConsistency");var $C={validation:{LangiumGrammarValidator:t=>new Fw(t),ValidationResourcesCollector:t=>new OC(t),LangiumGrammarTypesValidator:()=>new LC},lsp:{FoldingRangeProvider:t=>new eC(t),CodeActionProvider:t=>new Qw(t),SemanticTokenProvider:t=>new oC(t),Formatter:()=>new rC,DefinitionProvider:t=>new IC(t),CallHierarchyProvider:t=>new DC(t),CompletionProvider:t=>new Zw(t)},references:{ScopeComputation:t=>new Yw(t),ScopeProvider:t=>new Xw(t),References:t=>new lC(t),NameProvider:()=>new cC}};function Yy(t,e){const n=Ui(jh(t),Ww,e),r=Ui(xh({shared:n}),Hw,$C);return Jy(n,r),n.ServiceRegistry.register(r),Kv(r),qy(r),{shared:n,grammar:r}}o(Yy,"createLangiumGrammarServices");function Jy(t,e){t.workspace.DocumentBuilder.onBuildPhase(Be.IndexedReferences,async(r,i)=>{for(const s of r){await gt(i);const a=e.validation.ValidationResourcesCollector,c=s.parseResult.value;s.validationResources=a.collectValidationResources(c)}})}o(Jy,"addTypeCollectionPhase");var ma,MC=(ma=class{readFile(){throw new Error("Method not implemented.")}readFileSync(){throw new Error("Method not implemented.")}async readDirectory(){return[]}},o(ma,"EmptyFileSystemProvider"),ma),Qy={fileSystemProvider:()=>new MC};function Rl(t){return t.rules.find(e=>le(e)&&e.entry)}o(Rl,"getEntryRule");function Zy(t){return t.rules.filter(e=>Ke(e)&&e.hidden)}o(Zy,"getHiddenRules");function Vl(t,e){const n=new Set,r=Rl(t);if(!r)return new Set(t.rules);const i=[r].concat(Zy(t));for(const a of i)Ef(a,n,e);const s=new Set;for(const a of t.rules)(n.has(a.name)||Ke(a)&&a.hidden)&&s.add(a);return s}o(Vl,"getAllReachableRules");function Ef(t,e,n){e.add(t.name),pt(t).forEach(r=>{if(nt(r)||n&&Xd(r)){const i=r.rule.ref;i&&!e.has(i.name)&&Ef(i,e,n)}})}o(Ef,"ruleDfs");function Nf(t){if(t.terminal)return t.terminal;if(t.type.ref){const e=Jl(t.type.ref);return e==null?void 0:e.terminal}}o(Nf,"getCrossReferenceTerminal");function eT(t){return t.hidden&&!Cr(t).test(" ")}o(eT,"isCommentTerminal");function lc(t,e){return!t||!e?[]:Xl(t,e,t.astNode,!0)}o(lc,"findNodesForProperty");function Tn(t,e,n){if(!t||!e)return;const r=Xl(t,e,t.astNode,!0);if(r.length!==0)return n!==void 0?n=Math.max(0,Math.min(n,r.length-1)):n=0,r[n]}o(Tn,"findNodeForProperty");function Xl(t,e,n,r){if(!r){const i=Xe(t.grammarSource,Ye);if(i&&i.feature===e)return[t]}return wr(t)&&t.astNode===n?t.content.flatMap(i=>Xl(i,e,n,!1)):[]}o(Xl,"findNodesForPropertyInternal");function Pf(t,e){return t?If(t,e,t==null?void 0:t.astNode):[]}o(Pf,"findNodesForKeyword");function Pn(t,e,n){if(!t)return;const r=If(t,e,t==null?void 0:t.astNode);if(r.length!==0)return n!==void 0?n=Math.max(0,Math.min(n,r.length-1)):n=0,r[n]}o(Pn,"findNodeForKeyword");function If(t,e,n){if(t.astNode!==n)return[];if(vt(t.grammarSource)&&t.grammarSource.value===e)return[t];const r=Gd(t).iterator();let i;const s=[];do if(i=r.next(),!i.done){const a=i.value;a.astNode===n?vt(a.grammarSource)&&a.grammarSource.value===e&&s.push(a):r.prune()}while(!i.done);return s}o(If,"findNodesForKeywordInternal");function Yl(t){var e;const n=t.astNode;for(;n===((e=t.container)===null||e===void 0?void 0:e.astNode);){const r=Xe(t.grammarSource,Ye);if(r)return r;t=t.container}}o(Yl,"findAssignment");function Jl(t){return Ml(t)&&(t=t.$container),Df(t,new Map)}o(Jl,"findNameAssignment");function Df(t,e){var n;function r(i,s){let a;return Xe(i,Ye)||(a=Df(s,e)),e.set(t,a),a}if(o(r,"go"),e.has(t))return e.get(t);e.set(t,void 0);for(const i of pt(t)){if(Ye(i)&&i.feature.toLowerCase()==="name")return e.set(t,i),i;if(nt(i)&&le(i.rule.ref))return r(i,i.rule.ref);if(Rn(i)&&(!((n=i.typeRef)===null||n===void 0)&&n.ref))return r(i,i.typeRef.ref)}}o(Df,"findNameAssignmentInternal");function Of(t){var e;const n=Yy(Qy).grammar,r=n.serializer.JsonSerializer.deserialize(t);return n.shared.workspace.LangiumDocumentFactory.fromModel(r,ti.parse(`memory://${(e=r.name)!==null&&e!==void 0?e:"grammar"}.langium`)),r}o(Of,"loadGrammarFromJson");function tT(t){const e=[],n=t.Grammar;for(const r of n.rules)Ke(r)&&eT(r)&&Dv(Cr(r))&&e.push(r.name);return{multilineCommentRules:e,nameRegexp:pg}}o(tT,"createGrammarConfig");var FC=typeof global=="object"&&global&&global.Object===Object&&global,nT=FC,xC=typeof self=="object"&&self&&self.Object===Object&&self,jC=nT||xC||Function("return this")(),_n=jC,UC=_n.Symbol,Xt=UC,rT=Object.prototype,qC=rT.hasOwnProperty,GC=rT.toString,_i=Xt?Xt.toStringTag:void 0;function iT(t){var e=qC.call(t,_i),n=t[_i];try{t[_i]=void 0;var r=!0}catch{}var i=GC.call(t);return r&&(e?t[_i]=n:delete t[_i]),i}o(iT,"getRawTag");var WC=iT,HC=Object.prototype,BC=HC.toString;function sT(t){return BC.call(t)}o(sT,"objectToString");var KC=sT,zC="[object Null]",VC="[object Undefined]",Yp=Xt?Xt.toStringTag:void 0;function aT(t){return t==null?t===void 0?VC:zC:Yp&&Yp in Object(t)?WC(t):KC(t)}o(aT,"baseGetTag");var nr=aT;function oT(t){return t!=null&&typeof t=="object"}o(oT,"isObjectLike");var on=oT,XC="[object Symbol]";function cT(t){return typeof t=="symbol"||on(t)&&nr(t)==XC}o(cT,"isSymbol");var uc=cT;function lT(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}o(lT,"arrayMap");var dc=lT,YC=Array.isArray,Re=YC,JC=1/0,Jp=Xt?Xt.prototype:void 0,Qp=Jp?Jp.toString:void 0;function Lf(t){if(typeof t=="string")return t;if(Re(t))return dc(t,Lf)+"";if(uc(t))return Qp?Qp.call(t):"";var e=t+"";return e=="0"&&1/t==-JC?"-0":e}o(Lf,"baseToString");var QC=Lf,ZC=/\s/;function uT(t){for(var e=t.length;e--&&ZC.test(t.charAt(e)););return e}o(uT,"trimmedEndIndex");var eE=uT,tE=/^\s+/;function dT(t){return t&&t.slice(0,eE(t)+1).replace(tE,"")}o(dT,"baseTrim");var nE=dT;function fT(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}o(fT,"isObject");var Yt=fT,Zp=NaN,rE=/^[-+]0x[0-9a-f]+$/i,iE=/^0b[01]+$/i,sE=/^0o[0-7]+$/i,aE=parseInt;function hT(t){if(typeof t=="number")return t;if(uc(t))return Zp;if(Yt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Yt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=nE(t);var n=iE.test(t);return n||sE.test(t)?aE(t.slice(2),n?2:8):rE.test(t)?Zp:+t}o(hT,"toNumber");var oE=hT,em=1/0,cE=17976931348623157e292;function pT(t){if(!t)return t===0?t:0;if(t=oE(t),t===em||t===-em){var e=t<0?-1:1;return e*cE}return t===t?t:0}o(pT,"toFinite");var lE=pT;function mT(t){var e=lE(t),n=e%1;return e===e?n?e-n:e:0}o(mT,"toInteger");var fc=mT;function gT(t){return t}o(gT,"identity");var br=gT,uE="[object AsyncFunction]",dE="[object Function]",fE="[object GeneratorFunction]",hE="[object Proxy]";function vT(t){if(!Yt(t))return!1;var e=nr(t);return e==dE||e==fE||e==uE||e==hE}o(vT,"isFunction");var jn=vT,pE=_n["__core-js_shared__"],Lu=pE,tm=function(){var t=/[^.]+$/.exec(Lu&&Lu.keys&&Lu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yT(t){return!!tm&&tm in t}o(yT,"isMasked");var mE=yT,gE=Function.prototype,vE=gE.toString;function TT(t){if(t!=null){try{return vE.call(t)}catch{}try{return t+""}catch{}}return""}o(TT,"toSource");var Nr=TT,yE=/[\\^$.*+?()[\]{}|]/g,TE=/^\[object .+?Constructor\]$/,RE=Function.prototype,_E=Object.prototype,bE=RE.toString,kE=_E.hasOwnProperty,SE=RegExp("^"+bE.call(kE).replace(yE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RT(t){if(!Yt(t)||mE(t))return!1;var e=jn(t)?SE:TE;return e.test(Nr(t))}o(RT,"baseIsNative");var AE=RT;function _T(t,e){return t==null?void 0:t[e]}o(_T,"getValue");var wE=_T;function bT(t,e){var n=wE(t,e);return AE(n)?n:void 0}o(bT,"getNative");var Pr=bT,CE=Pr(_n,"WeakMap"),dd=CE,nm=Object.create,EE=function(){function t(){}return o(t,"object"),function(e){if(!Yt(e))return{};if(nm)return nm(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),NE=EE;function kT(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}o(kT,"apply");var PE=kT;function ST(){}o(ST,"noop");var Qe=ST;function AT(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}o(AT,"copyArray");var IE=AT,DE=800,OE=16,LE=Date.now;function wT(t){var e=0,n=0;return function(){var r=LE(),i=OE-(r-n);if(n=r,i>0){if(++e>=DE)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}o(wT,"shortOut");var $E=wT;function CT(t){return function(){return t}}o(CT,"constant");var ME=CT,FE=function(){try{var t=Pr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),_l=FE,xE=_l?function(t,e){return _l(t,"toString",{configurable:!0,enumerable:!1,value:ME(e),writable:!0})}:br,jE=xE,UE=$E(jE),qE=UE;function ET(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}o(ET,"arrayEach");var NT=ET;function PT(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}o(PT,"baseFindIndex");var IT=PT;function DT(t){return t!==t}o(DT,"baseIsNaN");var GE=DT;function OT(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}o(OT,"strictIndexOf");var WE=OT;function LT(t,e,n){return e===e?WE(t,e,n):IT(t,GE,n)}o(LT,"baseIndexOf");var $f=LT;function $T(t,e){var n=t==null?0:t.length;return!!n&&$f(t,e,0)>-1}o($T,"arrayIncludes");var MT=$T,HE=9007199254740991,BE=/^(?:0|[1-9]\d*)$/;function FT(t,e){var n=typeof t;return e=e??HE,!!e&&(n=="number"||n!="symbol"&&BE.test(t))&&t>-1&&t%1==0&&t<e}o(FT,"isIndex");var Ql=FT;function xT(t,e,n){e=="__proto__"&&_l?_l(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}o(xT,"baseAssignValue");var Mf=xT;function jT(t,e){return t===e||t!==t&&e!==e}o(jT,"eq");var hc=jT,KE=Object.prototype,zE=KE.hasOwnProperty;function UT(t,e,n){var r=t[e];(!(zE.call(t,e)&&hc(r,n))||n===void 0&&!(e in t))&&Mf(t,e,n)}o(UT,"assignValue");var Zl=UT;function qT(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var c=e[s],l=r?r(n[c],t[c],c,n,t):void 0;l===void 0&&(l=t[c]),i?Mf(n,c,l):Zl(n,c,l)}return n}o(qT,"copyObject");var pc=qT,rm=Math.max;function GT(t,e,n){return e=rm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=rm(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=r[i];return c[e]=n(a),PE(t,this,c)}}o(GT,"overRest");var VE=GT;function WT(t,e){return qE(VE(t,e,br),t+"")}o(WT,"baseRest");var Ff=WT,XE=9007199254740991;function HT(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=XE}o(HT,"isLength");var xf=HT;function BT(t){return t!=null&&xf(t.length)&&!jn(t)}o(BT,"isArrayLike");var bn=BT;function KT(t,e,n){if(!Yt(n))return!1;var r=typeof e;return(r=="number"?bn(n)&&Ql(e,n.length):r=="string"&&e in n)?hc(n[e],t):!1}o(KT,"isIterateeCall");var eu=KT;function zT(t){return Ff(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&eu(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var c=n[r];c&&t(e,c,r,s)}return e})}o(zT,"createAssigner");var YE=zT,JE=Object.prototype;function VT(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||JE;return t===n}o(VT,"isPrototype");var mc=VT;function XT(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}o(XT,"baseTimes");var QE=XT,ZE="[object Arguments]";function YT(t){return on(t)&&nr(t)==ZE}o(YT,"baseIsArguments");var im=YT,JT=Object.prototype,eN=JT.hasOwnProperty,tN=JT.propertyIsEnumerable,nN=im(function(){return arguments}())?im:function(t){return on(t)&&eN.call(t,"callee")&&!tN.call(t,"callee")},tu=nN;function QT(){return!1}o(QT,"stubFalse");var rN=QT,ZT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sm=ZT&&typeof module=="object"&&module&&!module.nodeType&&module,iN=sm&&sm.exports===ZT,am=iN?_n.Buffer:void 0,sN=am?am.isBuffer:void 0,aN=sN||rN,Qi=aN,oN="[object Arguments]",cN="[object Array]",lN="[object Boolean]",uN="[object Date]",dN="[object Error]",fN="[object Function]",hN="[object Map]",pN="[object Number]",mN="[object Object]",gN="[object RegExp]",vN="[object Set]",yN="[object String]",TN="[object WeakMap]",RN="[object ArrayBuffer]",_N="[object DataView]",bN="[object Float32Array]",kN="[object Float64Array]",SN="[object Int8Array]",AN="[object Int16Array]",wN="[object Int32Array]",CN="[object Uint8Array]",EN="[object Uint8ClampedArray]",NN="[object Uint16Array]",PN="[object Uint32Array]",$e={};$e[bN]=$e[kN]=$e[SN]=$e[AN]=$e[wN]=$e[CN]=$e[EN]=$e[NN]=$e[PN]=!0;$e[oN]=$e[cN]=$e[RN]=$e[lN]=$e[_N]=$e[uN]=$e[dN]=$e[fN]=$e[hN]=$e[pN]=$e[mN]=$e[gN]=$e[vN]=$e[yN]=$e[TN]=!1;function eR(t){return on(t)&&xf(t.length)&&!!$e[nr(t)]}o(eR,"baseIsTypedArray");var IN=eR;function tR(t){return function(e){return t(e)}}o(tR,"baseUnary");var gc=tR,nR=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Li=nR&&typeof module=="object"&&module&&!module.nodeType&&module,DN=Li&&Li.exports===nR,$u=DN&&nT.process,ON=function(){try{var t=Li&&Li.require&&Li.require("util").types;return t||$u&&$u.binding&&$u.binding("util")}catch{}}(),Xn=ON,om=Xn&&Xn.isTypedArray,LN=om?gc(om):IN,jf=LN,$N=Object.prototype,MN=$N.hasOwnProperty;function rR(t,e){var n=Re(t),r=!n&&tu(t),i=!n&&!r&&Qi(t),s=!n&&!r&&!i&&jf(t),a=n||r||i||s,c=a?QE(t.length,String):[],l=c.length;for(var u in t)(e||MN.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ql(u,l)))&&c.push(u);return c}o(rR,"arrayLikeKeys");var iR=rR;function sR(t,e){return function(n){return t(e(n))}}o(sR,"overArg");var aR=sR,FN=aR(Object.keys,Object),xN=FN,jN=Object.prototype,UN=jN.hasOwnProperty;function oR(t){if(!mc(t))return xN(t);var e=[];for(var n in Object(t))UN.call(t,n)&&n!="constructor"&&e.push(n);return e}o(oR,"baseKeys");var cR=oR;function lR(t){return bn(t)?iR(t):cR(t)}o(lR,"keys");var Ft=lR,qN=Object.prototype,GN=qN.hasOwnProperty,WN=YE(function(t,e){if(mc(e)||bn(e)){pc(e,Ft(e),t);return}for(var n in e)GN.call(e,n)&&Zl(t,n,e[n])}),xt=WN;function uR(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}o(uR,"nativeKeysIn");var HN=uR,BN=Object.prototype,KN=BN.hasOwnProperty;function dR(t){if(!Yt(t))return HN(t);var e=mc(t),n=[];for(var r in t)r=="constructor"&&(e||!KN.call(t,r))||n.push(r);return n}o(dR,"baseKeysIn");var zN=dR;function fR(t){return bn(t)?iR(t,!0):zN(t)}o(fR,"keysIn");var nu=fR,VN=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XN=/^\w*$/;function hR(t,e){if(Re(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||uc(t)?!0:XN.test(t)||!VN.test(t)||e!=null&&t in Object(e)}o(hR,"isKey");var Uf=hR,YN=Pr(Object,"create"),Zi=YN;function pR(){this.__data__=Zi?Zi(null):{},this.size=0}o(pR,"hashClear");var JN=pR;function mR(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}o(mR,"hashDelete");var QN=mR,ZN="__lodash_hash_undefined__",eP=Object.prototype,tP=eP.hasOwnProperty;function gR(t){var e=this.__data__;if(Zi){var n=e[t];return n===ZN?void 0:n}return tP.call(e,t)?e[t]:void 0}o(gR,"hashGet");var nP=gR,rP=Object.prototype,iP=rP.hasOwnProperty;function vR(t){var e=this.__data__;return Zi?e[t]!==void 0:iP.call(e,t)}o(vR,"hashHas");var sP=vR,aP="__lodash_hash_undefined__";function yR(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Zi&&e===void 0?aP:e,this}o(yR,"hashSet");var oP=yR;function Ir(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}o(Ir,"Hash");Ir.prototype.clear=JN;Ir.prototype.delete=QN;Ir.prototype.get=nP;Ir.prototype.has=sP;Ir.prototype.set=oP;var cm=Ir;function TR(){this.__data__=[],this.size=0}o(TR,"listCacheClear");var cP=TR;function RR(t,e){for(var n=t.length;n--;)if(hc(t[n][0],e))return n;return-1}o(RR,"assocIndexOf");var ru=RR,lP=Array.prototype,uP=lP.splice;function _R(t){var e=this.__data__,n=ru(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():uP.call(e,n,1),--this.size,!0}o(_R,"listCacheDelete");var dP=_R;function bR(t){var e=this.__data__,n=ru(e,t);return n<0?void 0:e[n][1]}o(bR,"listCacheGet");var fP=bR;function kR(t){return ru(this.__data__,t)>-1}o(kR,"listCacheHas");var hP=kR;function SR(t,e){var n=this.__data__,r=ru(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}o(SR,"listCacheSet");var pP=SR;function Dr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}o(Dr,"ListCache");Dr.prototype.clear=cP;Dr.prototype.delete=dP;Dr.prototype.get=fP;Dr.prototype.has=hP;Dr.prototype.set=pP;var iu=Dr,mP=Pr(_n,"Map"),es=mP;function AR(){this.size=0,this.__data__={hash:new cm,map:new(es||iu),string:new cm}}o(AR,"mapCacheClear");var gP=AR;function wR(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}o(wR,"isKeyable");var vP=wR;function CR(t,e){var n=t.__data__;return vP(e)?n[typeof e=="string"?"string":"hash"]:n.map}o(CR,"getMapData");var su=CR;function ER(t){var e=su(this,t).delete(t);return this.size-=e?1:0,e}o(ER,"mapCacheDelete");var yP=ER;function NR(t){return su(this,t).get(t)}o(NR,"mapCacheGet");var TP=NR;function PR(t){return su(this,t).has(t)}o(PR,"mapCacheHas");var RP=PR;function IR(t,e){var n=su(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}o(IR,"mapCacheSet");var _P=IR;function Or(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}o(Or,"MapCache");Or.prototype.clear=gP;Or.prototype.delete=yP;Or.prototype.get=TP;Or.prototype.has=RP;Or.prototype.set=_P;var au=Or,bP="Expected a function";function ou(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(bP);var n=o(function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a},"memoized");return n.cache=new(ou.Cache||au),n}o(ou,"memoize");ou.Cache=au;var kP=ou,SP=500;function DR(t){var e=kP(t,function(r){return n.size===SP&&n.clear(),r}),n=e.cache;return e}o(DR,"memoizeCapped");var AP=DR,wP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,CP=/\\(\\)?/g,EP=AP(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wP,function(n,r,i,s){e.push(i?s.replace(CP,"$1"):r||n)}),e}),NP=EP;function OR(t){return t==null?"":QC(t)}o(OR,"toString");var PP=OR;function LR(t,e){return Re(t)?t:Uf(t,e)?[t]:NP(PP(t))}o(LR,"castPath");var cu=LR,IP=1/0;function $R(t){if(typeof t=="string"||uc(t))return t;var e=t+"";return e=="0"&&1/t==-IP?"-0":e}o($R,"toKey");var vc=$R;function MR(t,e){e=cu(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[vc(e[n++])];return n&&n==r?t:void 0}o(MR,"baseGet");var qf=MR;function FR(t,e,n){var r=t==null?void 0:qf(t,e);return r===void 0?n:r}o(FR,"get");var DP=FR;function xR(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}o(xR,"arrayPush");var Gf=xR,lm=Xt?Xt.isConcatSpreadable:void 0;function jR(t){return Re(t)||tu(t)||!!(lm&&t&&t[lm])}o(jR,"isFlattenable");var OP=jR;function Wf(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=OP),i||(i=[]);++s<a;){var c=t[s];e>0&&n(c)?e>1?Wf(c,e-1,n,r,i):Gf(i,c):r||(i[i.length]=c)}return i}o(Wf,"baseFlatten");var Hf=Wf;function UR(t){var e=t==null?0:t.length;return e?Hf(t,1):[]}o(UR,"flatten");var Vt=UR,LP=aR(Object.getPrototypeOf,Object),qR=LP;function GR(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}o(GR,"baseSlice");var WR=GR;function HR(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}o(HR,"arrayReduce");var $P=HR;function BR(){this.__data__=new iu,this.size=0}o(BR,"stackClear");var MP=BR;function KR(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}o(KR,"stackDelete");var FP=KR;function zR(t){return this.__data__.get(t)}o(zR,"stackGet");var xP=zR;function VR(t){return this.__data__.has(t)}o(VR,"stackHas");var jP=VR,UP=200;function XR(t,e){var n=this.__data__;if(n instanceof iu){var r=n.__data__;if(!es||r.length<UP-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new au(r)}return n.set(t,e),this.size=n.size,this}o(XR,"stackSet");var qP=XR;function Lr(t){var e=this.__data__=new iu(t);this.size=e.size}o(Lr,"Stack");Lr.prototype.clear=MP;Lr.prototype.delete=FP;Lr.prototype.get=xP;Lr.prototype.has=jP;Lr.prototype.set=qP;var $i=Lr;function YR(t,e){return t&&pc(e,Ft(e),t)}o(YR,"baseAssign");var GP=YR;function JR(t,e){return t&&pc(e,nu(e),t)}o(JR,"baseAssignIn");var WP=JR,QR=typeof exports=="object"&&exports&&!exports.nodeType&&exports,um=QR&&typeof module=="object"&&module&&!module.nodeType&&module,HP=um&&um.exports===QR,dm=HP?_n.Buffer:void 0,fm=dm?dm.allocUnsafe:void 0;function ZR(t,e){if(e)return t.slice();var n=t.length,r=fm?fm(n):new t.constructor(n);return t.copy(r),r}o(ZR,"cloneBuffer");var BP=ZR;function e_(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}o(e_,"arrayFilter");var Bf=e_;function t_(){return[]}o(t_,"stubArray");var n_=t_,KP=Object.prototype,zP=KP.propertyIsEnumerable,hm=Object.getOwnPropertySymbols,VP=hm?function(t){return t==null?[]:(t=Object(t),Bf(hm(t),function(e){return zP.call(t,e)}))}:n_,Kf=VP;function r_(t,e){return pc(t,Kf(t),e)}o(r_,"copySymbols");var XP=r_,YP=Object.getOwnPropertySymbols,JP=YP?function(t){for(var e=[];t;)Gf(e,Kf(t)),t=qR(t);return e}:n_,i_=JP;function s_(t,e){return pc(t,i_(t),e)}o(s_,"copySymbolsIn");var QP=s_;function a_(t,e,n){var r=e(t);return Re(t)?r:Gf(r,n(t))}o(a_,"baseGetAllKeys");var o_=a_;function c_(t){return o_(t,Ft,Kf)}o(c_,"getAllKeys");var fd=c_;function l_(t){return o_(t,nu,i_)}o(l_,"getAllKeysIn");var u_=l_,ZP=Pr(_n,"DataView"),hd=ZP,eI=Pr(_n,"Promise"),pd=eI,tI=Pr(_n,"Set"),Qr=tI,pm="[object Map]",nI="[object Object]",mm="[object Promise]",gm="[object Set]",vm="[object WeakMap]",ym="[object DataView]",rI=Nr(hd),iI=Nr(es),sI=Nr(pd),aI=Nr(Qr),oI=Nr(dd),fr=nr;(hd&&fr(new hd(new ArrayBuffer(1)))!=ym||es&&fr(new es)!=pm||pd&&fr(pd.resolve())!=mm||Qr&&fr(new Qr)!=gm||dd&&fr(new dd)!=vm)&&(fr=o(function(t){var e=nr(t),n=e==nI?t.constructor:void 0,r=n?Nr(n):"";if(r)switch(r){case rI:return ym;case iI:return pm;case sI:return mm;case aI:return gm;case oI:return vm}return e},"getTag"));var ii=fr,cI=Object.prototype,lI=cI.hasOwnProperty;function d_(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&lI.call(t,"index")&&(n.index=t.index,n.input=t.input),n}o(d_,"initCloneArray");var uI=d_,dI=_n.Uint8Array,bl=dI;function f_(t){var e=new t.constructor(t.byteLength);return new bl(e).set(new bl(t)),e}o(f_,"cloneArrayBuffer");var zf=f_;function h_(t,e){var n=e?zf(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}o(h_,"cloneDataView");var fI=h_,hI=/\w*$/;function p_(t){var e=new t.constructor(t.source,hI.exec(t));return e.lastIndex=t.lastIndex,e}o(p_,"cloneRegExp");var pI=p_,Tm=Xt?Xt.prototype:void 0,Rm=Tm?Tm.valueOf:void 0;function m_(t){return Rm?Object(Rm.call(t)):{}}o(m_,"cloneSymbol");var mI=m_;function g_(t,e){var n=e?zf(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}o(g_,"cloneTypedArray");var gI=g_,vI="[object Boolean]",yI="[object Date]",TI="[object Map]",RI="[object Number]",_I="[object RegExp]",bI="[object Set]",kI="[object String]",SI="[object Symbol]",AI="[object ArrayBuffer]",wI="[object DataView]",CI="[object Float32Array]",EI="[object Float64Array]",NI="[object Int8Array]",PI="[object Int16Array]",II="[object Int32Array]",DI="[object Uint8Array]",OI="[object Uint8ClampedArray]",LI="[object Uint16Array]",$I="[object Uint32Array]";function v_(t,e,n){var r=t.constructor;switch(e){case AI:return zf(t);case vI:case yI:return new r(+t);case wI:return fI(t,n);case CI:case EI:case NI:case PI:case II:case DI:case OI:case LI:case $I:return gI(t,n);case TI:return new r;case RI:case kI:return new r(t);case _I:return pI(t);case bI:return new r;case SI:return mI(t)}}o(v_,"initCloneByTag");var MI=v_;function y_(t){return typeof t.constructor=="function"&&!mc(t)?NE(qR(t)):{}}o(y_,"initCloneObject");var FI=y_,xI="[object Map]";function T_(t){return on(t)&&ii(t)==xI}o(T_,"baseIsMap");var jI=T_,_m=Xn&&Xn.isMap,UI=_m?gc(_m):jI,qI=UI,GI="[object Set]";function R_(t){return on(t)&&ii(t)==GI}o(R_,"baseIsSet");var WI=R_,bm=Xn&&Xn.isSet,HI=bm?gc(bm):WI,BI=HI,KI=1,zI=2,VI=4,__="[object Arguments]",XI="[object Array]",YI="[object Boolean]",JI="[object Date]",QI="[object Error]",b_="[object Function]",ZI="[object GeneratorFunction]",eD="[object Map]",tD="[object Number]",k_="[object Object]",nD="[object RegExp]",rD="[object Set]",iD="[object String]",sD="[object Symbol]",aD="[object WeakMap]",oD="[object ArrayBuffer]",cD="[object DataView]",lD="[object Float32Array]",uD="[object Float64Array]",dD="[object Int8Array]",fD="[object Int16Array]",hD="[object Int32Array]",pD="[object Uint8Array]",mD="[object Uint8ClampedArray]",gD="[object Uint16Array]",vD="[object Uint32Array]",De={};De[__]=De[XI]=De[oD]=De[cD]=De[YI]=De[JI]=De[lD]=De[uD]=De[dD]=De[fD]=De[hD]=De[eD]=De[tD]=De[k_]=De[nD]=De[rD]=De[iD]=De[sD]=De[pD]=De[mD]=De[gD]=De[vD]=!0;De[QI]=De[b_]=De[aD]=!1;function Mi(t,e,n,r,i,s){var a,c=e&KI,l=e&zI,u=e&VI;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!Yt(t))return t;var d=Re(t);if(d){if(a=uI(t),!c)return IE(t,a)}else{var f=ii(t),p=f==b_||f==ZI;if(Qi(t))return BP(t,c);if(f==k_||f==__||p&&!i){if(a=l||p?{}:FI(t),!c)return l?QP(t,WP(a,t)):XP(t,GP(a,t))}else{if(!De[f])return i?t:{};a=MI(t,f,c)}}s||(s=new $i);var h=s.get(t);if(h)return h;s.set(t,a),BI(t)?t.forEach(function(A){a.add(Mi(A,e,n,A,t,s))}):qI(t)&&t.forEach(function(A,w){a.set(w,Mi(A,e,n,w,t,s))});var R=u?l?u_:fd:l?nu:Ft,k=d?void 0:R(t);return NT(k||t,function(A,w){k&&(w=A,A=t[w]),Zl(a,w,Mi(A,e,n,w,t,s))}),a}o(Mi,"baseClone");var yD=Mi,TD=4;function S_(t){return yD(t,TD)}o(S_,"clone");var ut=S_;function A_(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i}o(A_,"compact");var yc=A_,RD="__lodash_hash_undefined__";function w_(t){return this.__data__.set(t,RD),this}o(w_,"setCacheAdd");var _D=w_;function C_(t){return this.__data__.has(t)}o(C_,"setCacheHas");var bD=C_;function ts(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new au;++e<n;)this.add(t[e])}o(ts,"SetCache");ts.prototype.add=ts.prototype.push=_D;ts.prototype.has=bD;var Vf=ts;function E_(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}o(E_,"arraySome");var N_=E_;function P_(t,e){return t.has(e)}o(P_,"cacheHas");var Xf=P_,kD=1,SD=2;function I_(t,e,n,r,i,s){var a=n&kD,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,p=!0,h=n&SD?new Vf:void 0;for(s.set(t,e),s.set(e,t);++f<c;){var R=t[f],k=e[f];if(r)var A=a?r(k,R,f,e,t,s):r(R,k,f,t,e,s);if(A!==void 0){if(A)continue;p=!1;break}if(h){if(!N_(e,function(w,E){if(!Xf(h,E)&&(R===w||i(R,w,n,r,s)))return h.push(E)})){p=!1;break}}else if(!(R===k||i(R,k,n,r,s))){p=!1;break}}return s.delete(t),s.delete(e),p}o(I_,"equalArrays");var D_=I_;function O_(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}o(O_,"mapToArray");var AD=O_;function L_(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}o(L_,"setToArray");var Yf=L_,wD=1,CD=2,ED="[object Boolean]",ND="[object Date]",PD="[object Error]",ID="[object Map]",DD="[object Number]",OD="[object RegExp]",LD="[object Set]",$D="[object String]",MD="[object Symbol]",FD="[object ArrayBuffer]",xD="[object DataView]",km=Xt?Xt.prototype:void 0,Mu=km?km.valueOf:void 0;function $_(t,e,n,r,i,s,a){switch(n){case xD:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case FD:return!(t.byteLength!=e.byteLength||!s(new bl(t),new bl(e)));case ED:case ND:case DD:return hc(+t,+e);case PD:return t.name==e.name&&t.message==e.message;case OD:case $D:return t==e+"";case ID:var c=AD;case LD:var l=r&wD;if(c||(c=Yf),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=CD,a.set(t,e);var d=D_(c(t),c(e),r,i,s,a);return a.delete(t),d;case MD:if(Mu)return Mu.call(t)==Mu.call(e)}return!1}o($_,"equalByTag");var jD=$_,UD=1,qD=Object.prototype,GD=qD.hasOwnProperty;function M_(t,e,n,r,i,s){var a=n&UD,c=fd(t),l=c.length,u=fd(e),d=u.length;if(l!=d&&!a)return!1;for(var f=l;f--;){var p=c[f];if(!(a?p in e:GD.call(e,p)))return!1}var h=s.get(t),R=s.get(e);if(h&&R)return h==e&&R==t;var k=!0;s.set(t,e),s.set(e,t);for(var A=a;++f<l;){p=c[f];var w=t[p],E=e[p];if(r)var P=a?r(E,w,p,e,t,s):r(w,E,p,t,e,s);if(!(P===void 0?w===E||i(w,E,n,r,s):P)){k=!1;break}A||(A=p=="constructor")}if(k&&!A){var j=t.constructor,z=e.constructor;j!=z&&"constructor"in t&&"constructor"in e&&!(typeof j=="function"&&j instanceof j&&typeof z=="function"&&z instanceof z)&&(k=!1)}return s.delete(t),s.delete(e),k}o(M_,"equalObjects");var WD=M_,HD=1,Sm="[object Arguments]",Am="[object Array]",Ec="[object Object]",BD=Object.prototype,wm=BD.hasOwnProperty;function F_(t,e,n,r,i,s){var a=Re(t),c=Re(e),l=a?Am:ii(t),u=c?Am:ii(e);l=l==Sm?Ec:l,u=u==Sm?Ec:u;var d=l==Ec,f=u==Ec,p=l==u;if(p&&Qi(t)){if(!Qi(e))return!1;a=!0,d=!1}if(p&&!d)return s||(s=new $i),a||jf(t)?D_(t,e,n,r,i,s):jD(t,e,l,n,r,i,s);if(!(n&HD)){var h=d&&wm.call(t,"__wrapped__"),R=f&&wm.call(e,"__wrapped__");if(h||R){var k=h?t.value():t,A=R?e.value():e;return s||(s=new $i),i(k,A,n,r,s)}}return p?(s||(s=new $i),WD(t,e,n,r,i,s)):!1}o(F_,"baseIsEqualDeep");var KD=F_;function Jf(t,e,n,r,i){return t===e?!0:t==null||e==null||!on(t)&&!on(e)?t!==t&&e!==e:KD(t,e,n,r,Jf,i)}o(Jf,"baseIsEqual");var x_=Jf,zD=1,VD=2;function j_(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var c=n[i];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<s;){c=n[i];var l=c[0],u=t[l],d=c[1];if(a&&c[2]){if(u===void 0&&!(l in t))return!1}else{var f=new $i;if(r)var p=r(u,d,l,t,e,f);if(!(p===void 0?x_(d,u,zD|VD,r,f):p))return!1}}return!0}o(j_,"baseIsMatch");var XD=j_;function U_(t){return t===t&&!Yt(t)}o(U_,"isStrictComparable");var q_=U_;function G_(t){for(var e=Ft(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,q_(i)]}return e}o(G_,"getMatchData");var YD=G_;function W_(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}o(W_,"matchesStrictComparable");var H_=W_;function B_(t){var e=YD(t);return e.length==1&&e[0][2]?H_(e[0][0],e[0][1]):function(n){return n===t||XD(n,t,e)}}o(B_,"baseMatches");var JD=B_;function K_(t,e){return t!=null&&e in Object(t)}o(K_,"baseHasIn");var QD=K_;function z_(t,e,n){e=cu(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=vc(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&xf(i)&&Ql(a,i)&&(Re(t)||tu(t)))}o(z_,"hasPath");var V_=z_;function X_(t,e){return t!=null&&V_(t,e,QD)}o(X_,"hasIn");var ZD=X_,eO=1,tO=2;function Y_(t,e){return Uf(t)&&q_(e)?H_(vc(t),e):function(n){var r=DP(n,t);return r===void 0&&r===e?ZD(n,t):x_(e,r,eO|tO)}}o(Y_,"baseMatchesProperty");var nO=Y_;function J_(t){return function(e){return e==null?void 0:e[t]}}o(J_,"baseProperty");var rO=J_;function Q_(t){return function(e){return qf(e,t)}}o(Q_,"basePropertyDeep");var iO=Q_;function Z_(t){return Uf(t)?rO(vc(t)):iO(t)}o(Z_,"property");var sO=Z_;function eb(t){return typeof t=="function"?t:t==null?br:typeof t=="object"?Re(t)?nO(t[0],t[1]):JD(t):sO(t)}o(eb,"baseIteratee");var ln=eb;function tb(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var a=t[i];e(r,a,n(a),t)}return r}o(tb,"arrayAggregator");var aO=tb;function nb(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),c=a.length;c--;){var l=a[t?c:++i];if(n(s[l],l,s)===!1)break}return e}}o(nb,"createBaseFor");var oO=nb,cO=oO(),lO=cO;function rb(t,e){return t&&lO(t,e,Ft)}o(rb,"baseForOwn");var uO=rb;function ib(t,e){return function(n,r){if(n==null)return n;if(!bn(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}o(ib,"createBaseEach");var dO=ib,fO=dO(uO),$r=fO;function sb(t,e,n,r){return $r(t,function(i,s,a){e(r,i,n(i),a)}),r}o(sb,"baseAggregator");var hO=sb;function ab(t,e){return function(n,r){var i=Re(n)?aO:hO,s=e?e():{};return i(n,t,ln(r),s)}}o(ab,"createAggregator");var pO=ab,ob=Object.prototype,mO=ob.hasOwnProperty,gO=Ff(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&eu(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],a=nu(s),c=-1,l=a.length;++c<l;){var u=a[c],d=t[u];(d===void 0||hc(d,ob[u])&&!mO.call(t,u))&&(t[u]=s[u])}return t}),Qf=gO;function cb(t){return on(t)&&bn(t)}o(cb,"isArrayLikeObject");var Cm=cb;function lb(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}o(lb,"arrayIncludesWith");var ub=lb,vO=200;function db(t,e,n,r){var i=-1,s=MT,a=!0,c=t.length,l=[],u=e.length;if(!c)return l;n&&(e=dc(e,gc(n))),r?(s=ub,a=!1):e.length>=vO&&(s=Xf,a=!1,e=new Vf(e));e:for(;++i<c;){var d=t[i],f=n==null?d:n(d);if(d=r||d!==0?d:0,a&&f===f){for(var p=u;p--;)if(e[p]===f)continue e;l.push(d)}else s(e,f,r)||l.push(d)}return l}o(db,"baseDifference");var yO=db,TO=Ff(function(t,e){return Cm(t)?yO(t,Hf(e,1,Cm,!0)):[]}),lu=TO;function fb(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}o(fb,"last");var si=fb;function hb(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:fc(e),WR(t,e<0?0:e,r)):[]}o(hb,"drop");var ot=hb;function pb(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:fc(e),e=r-e,WR(t,0,e<0?0:e)):[]}o(pb,"dropRight");var ns=pb;function mb(t){return typeof t=="function"?t:br}o(mb,"castFunction");var RO=mb;function gb(t,e){var n=Re(t)?NT:$r;return n(t,RO(e))}o(gb,"forEach");var ae=gb;function vb(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}o(vb,"arrayEvery");var _O=vb;function yb(t,e){var n=!0;return $r(t,function(r,i,s){return n=!!e(r,i,s),n}),n}o(yb,"baseEvery");var bO=yb;function Tb(t,e,n){var r=Re(t)?_O:bO;return n&&eu(t,e,n)&&(e=void 0),r(t,ln(e))}o(Tb,"every");var rn=Tb;function Rb(t,e){var n=[];return $r(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}o(Rb,"baseFilter");var _b=Rb;function bb(t,e){var n=Re(t)?Bf:_b;return n(t,ln(e))}o(bb,"filter");var jt=bb;function kb(t){return function(e,n,r){var i=Object(e);if(!bn(e)){var s=ln(n);e=Ft(e),n=o(function(c){return s(i[c],c,i)},"predicate")}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}o(kb,"createFind");var kO=kb,SO=Math.max;function Sb(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:fc(n);return i<0&&(i=SO(r+i,0)),IT(t,ln(e),i)}o(Sb,"findIndex");var AO=Sb,wO=kO(AO),ai=wO;function Ab(t){return t&&t.length?t[0]:void 0}o(Ab,"head");var cn=Ab;function wb(t,e){var n=-1,r=bn(t)?Array(t.length):[];return $r(t,function(i,s,a){r[++n]=e(i,s,a)}),r}o(wb,"baseMap");var CO=wb;function Cb(t,e){var n=Re(t)?dc:CO;return n(t,ln(e))}o(Cb,"map");var J=Cb;function Eb(t,e){return Hf(J(t,e),1)}o(Eb,"flatMap");var Mt=Eb,EO=Object.prototype,NO=EO.hasOwnProperty,PO=pO(function(t,e,n){NO.call(t,n)?t[n].push(e):Mf(t,n,[e])}),IO=PO,DO=Object.prototype,OO=DO.hasOwnProperty;function Nb(t,e){return t!=null&&OO.call(t,e)}o(Nb,"baseHas");var LO=Nb;function Pb(t,e){return t!=null&&V_(t,e,LO)}o(Pb,"has");var oe=Pb,$O="[object String]";function Ib(t){return typeof t=="string"||!Re(t)&&on(t)&&nr(t)==$O}o(Ib,"isString");var wt=Ib;function Db(t,e){return dc(e,function(n){return t[n]})}o(Db,"baseValues");var MO=Db;function Ob(t){return t==null?[]:MO(t,Ft(t))}o(Ob,"values");var Ze=Ob,FO=Math.max;function Lb(t,e,n,r){t=bn(t)?t:Ze(t),n=n&&!r?fc(n):0;var i=t.length;return n<0&&(n=FO(i+n,0)),wt(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&$f(t,e,n)>-1}o(Lb,"includes");var _t=Lb,xO=Math.max;function $b(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:fc(n);return i<0&&(i=xO(r+i,0)),$f(t,e,i)}o($b,"indexOf");var Em=$b,jO="[object Map]",UO="[object Set]",qO=Object.prototype,GO=qO.hasOwnProperty;function Mb(t){if(t==null)return!0;if(bn(t)&&(Re(t)||typeof t=="string"||typeof t.splice=="function"||Qi(t)||jf(t)||tu(t)))return!t.length;var e=ii(t);if(e==jO||e==UO)return!t.size;if(mc(t))return!cR(t).length;for(var n in t)if(GO.call(t,n))return!1;return!0}o(Mb,"isEmpty");var Pe=Mb,WO="[object RegExp]";function Fb(t){return on(t)&&nr(t)==WO}o(Fb,"baseIsRegExp");var HO=Fb,Nm=Xn&&Xn.isRegExp,BO=Nm?gc(Nm):HO,On=BO;function xb(t){return t===void 0}o(xb,"isUndefined");var Ln=xb;function jb(t,e){return t<e}o(jb,"baseLt");var KO=jb;function Ub(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(c===void 0?a===a&&!uc(a):n(a,c)))var c=a,l=s}return l}o(Ub,"baseExtremum");var zO=Ub;function qb(t){return t&&t.length?zO(t,br,KO):void 0}o(qb,"min");var VO=qb,XO="Expected a function";function Gb(t){if(typeof t!="function")throw new TypeError(XO);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}o(Gb,"negate");var YO=Gb;function Wb(t,e,n,r){if(!Yt(t))return t;e=cu(e,t);for(var i=-1,s=e.length,a=s-1,c=t;c!=null&&++i<s;){var l=vc(e[i]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=a){var d=c[l];u=r?r(d,l,c):void 0,u===void 0&&(u=Yt(d)?d:Ql(e[i+1])?[]:{})}Zl(c,l,u),c=c[l]}return t}o(Wb,"baseSet");var JO=Wb;function Hb(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],c=qf(t,a);n(c,a)&&JO(s,cu(a,t),c)}return s}o(Hb,"basePickBy");var QO=Hb;function Bb(t,e){if(t==null)return{};var n=dc(u_(t),function(r){return[r]});return e=ln(e),QO(t,n,function(r,i){return e(r,i[0])})}o(Bb,"pickBy");var un=Bb;function Kb(t,e,n,r,i){return i(t,function(s,a,c){n=r?(r=!1,s):e(n,s,a,c)}),n}o(Kb,"baseReduce");var ZO=Kb;function zb(t,e,n){var r=Re(t)?$P:ZO,i=arguments.length<3;return r(t,ln(e),n,i,$r)}o(zb,"reduce");var yt=zb;function Vb(t,e){var n=Re(t)?Bf:_b;return n(t,YO(ln(e)))}o(Vb,"reject");var uu=Vb;function Xb(t,e){var n;return $r(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}o(Xb,"baseSome");var eL=Xb;function Yb(t,e,n){var r=Re(t)?N_:eL;return n&&eu(t,e,n)&&(e=void 0),r(t,ln(e))}o(Yb,"some");var Jb=Yb,tL=1/0,nL=Qr&&1/Yf(new Qr([,-0]))[1]==tL?function(t){return new Qr(t)}:Qe,rL=nL,iL=200;function Qb(t,e,n){var r=-1,i=MT,s=t.length,a=!0,c=[],l=c;if(n)a=!1,i=ub;else if(s>=iL){var u=e?null:rL(t);if(u)return Yf(u);a=!1,i=Xf,l=new Vf}else l=e?[]:c;e:for(;++r<s;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),c.push(d)}else i(l,f,n)||(l!==c&&l.push(f),c.push(d))}return c}o(Qb,"baseUniq");var Zb=Qb;function e0(t){return t&&t.length?Zb(t):[]}o(e0,"uniq");var Zf=e0;function t0(t,e){return t&&t.length?Zb(t,ln(e)):[]}o(t0,"uniqBy");var sL=t0;function kl(t){console&&console.error&&console.error(`Error: ${t}`)}o(kl,"PRINT_ERROR");function eh(t){console&&console.warn&&console.warn(`Warning: ${t}`)}o(eh,"PRINT_WARNING");function th(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}o(th,"timer");function nh(t){function e(){}o(e,"FakeConstructor"),e.prototype=t;const n=new e;function r(){return typeof n.bar}return o(r,"fakeAccess"),r(),r(),t}o(nh,"toFastProperties");function n0(t){return r0(t)?t.LABEL:t.name}o(n0,"tokenLabel");function r0(t){return wt(t.LABEL)&&t.LABEL!==""}o(r0,"hasTokenLabel");var ga,kn=(ga=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,n=>{n.accept(e)})}},o(ga,"AbstractProduction"),ga),va,Tt=(va=class extends kn{constructor(e){super([]),this.idx=1,xt(this,un(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},o(va,"NonTerminal"),va),ya,pi=(ya=class extends kn{constructor(e){super(e.definition),this.orgText="",xt(this,un(e,n=>n!==void 0))}},o(ya,"Rule"),ya),Ta,Ct=(Ta=class extends kn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,xt(this,un(e,n=>n!==void 0))}},o(Ta,"Alternative"),Ta),Ra,ct=(Ra=class extends kn{constructor(e){super(e.definition),this.idx=1,xt(this,un(e,n=>n!==void 0))}},o(Ra,"Option"),Ra),_a,Ut=(_a=class extends kn{constructor(e){super(e.definition),this.idx=1,xt(this,un(e,n=>n!==void 0))}},o(_a,"RepetitionMandatory"),_a),ba,qt=(ba=class extends kn{constructor(e){super(e.definition),this.idx=1,xt(this,un(e,n=>n!==void 0))}},o(ba,"RepetitionMandatoryWithSeparator"),ba),ka,qe=(ka=class extends kn{constructor(e){super(e.definition),this.idx=1,xt(this,un(e,n=>n!==void 0))}},o(ka,"Repetition"),ka),Sa,Nt=(Sa=class extends kn{constructor(e){super(e.definition),this.idx=1,xt(this,un(e,n=>n!==void 0))}},o(Sa,"RepetitionWithSeparator"),Sa),Aa,Pt=(Aa=class extends kn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,xt(this,un(e,n=>n!==void 0))}},o(Aa,"Alternation"),Aa),wa,Me=(wa=class{constructor(e){this.idx=1,xt(this,un(e,n=>n!==void 0))}accept(e){e.visit(this)}},o(wa,"Terminal"),wa);function i0(t){return J(t,Fi)}o(i0,"serializeGrammar");function Fi(t){function e(n){return J(n,Fi)}if(o(e,"convertDefinition"),t instanceof Tt){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return wt(t.label)&&(n.label=t.label),n}else{if(t instanceof Ct)return{type:"Alternative",definition:e(t.definition)};if(t instanceof ct)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ut)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof qt)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Fi(new Me({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Nt)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Fi(new Me({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof qe)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Pt)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Me){const n={type:"Terminal",name:t.terminalType.name,label:n0(t.terminalType),idx:t.idx};wt(t.label)&&(n.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=On(r)?r.source:r),n}else{if(t instanceof pi)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}o(Fi,"serializeProduction");var Ca,mi=(Ca=class{visit(e){const n=e;switch(n.constructor){case Tt:return this.visitNonTerminal(n);case Ct:return this.visitAlternative(n);case ct:return this.visitOption(n);case Ut:return this.visitRepetitionMandatory(n);case qt:return this.visitRepetitionMandatoryWithSeparator(n);case Nt:return this.visitRepetitionWithSeparator(n);case qe:return this.visitRepetition(n);case Pt:return this.visitAlternation(n);case Me:return this.visitTerminal(n);case pi:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}},o(Ca,"GAstVisitor"),Ca);function s0(t){return t instanceof Ct||t instanceof ct||t instanceof qe||t instanceof Ut||t instanceof qt||t instanceof Nt||t instanceof Me||t instanceof pi}o(s0,"isSequenceProd");function rs(t,e=[]){return t instanceof ct||t instanceof qe||t instanceof Nt?!0:t instanceof Pt?Jb(t.definition,r=>rs(r,e)):t instanceof Tt&&_t(e,t)?!1:t instanceof kn?(t instanceof Tt&&e.push(t),rn(t.definition,r=>rs(r,e))):!1}o(rs,"isOptionalProd");function a0(t){return t instanceof Pt}o(a0,"isBranchingProd");function Qt(t){if(t instanceof Tt)return"SUBRULE";if(t instanceof ct)return"OPTION";if(t instanceof Pt)return"OR";if(t instanceof Ut)return"AT_LEAST_ONE";if(t instanceof qt)return"AT_LEAST_ONE_SEP";if(t instanceof Nt)return"MANY_SEP";if(t instanceof qe)return"MANY";if(t instanceof Me)return"CONSUME";throw Error("non exhaustive match")}o(Qt,"getProductionDslName");var Ea,du=(Ea=class{walk(e,n=[]){ae(e.definition,(r,i)=>{const s=ot(e.definition,i+1);if(r instanceof Tt)this.walkProdRef(r,s,n);else if(r instanceof Me)this.walkTerminal(r,s,n);else if(r instanceof Ct)this.walkFlat(r,s,n);else if(r instanceof ct)this.walkOption(r,s,n);else if(r instanceof Ut)this.walkAtLeastOne(r,s,n);else if(r instanceof qt)this.walkAtLeastOneSep(r,s,n);else if(r instanceof Nt)this.walkManySep(r,s,n);else if(r instanceof qe)this.walkMany(r,s,n);else if(r instanceof Pt)this.walkOr(r,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){const i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){const i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){const i=[new ct({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){const i=md(e,n,r);this.walk(e,i)}walkMany(e,n,r){const i=[new ct({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){const i=md(e,n,r);this.walk(e,i)}walkOr(e,n,r){const i=n.concat(r);ae(e.definition,s=>{const a=new Ct({definition:[s]});this.walk(a,i)})}},o(Ea,"RestWalker"),Ea);function md(t,e,n){return[new ct({definition:[new Me({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}o(md,"restForRepetitionWithSeparator");function gi(t){if(t instanceof Tt)return gi(t.referencedRule);if(t instanceof Me)return l0(t);if(s0(t))return o0(t);if(a0(t))return c0(t);throw Error("non exhaustive match")}o(gi,"first");function o0(t){let e=[];const n=t.definition;let r=0,i=n.length>r,s,a=!0;for(;i&&a;)s=n[r],a=rs(s),e=e.concat(gi(s)),r=r+1,i=n.length>r;return Zf(e)}o(o0,"firstForSequence");function c0(t){const e=J(t.definition,n=>gi(n));return Zf(Vt(e))}o(c0,"firstForBranching");function l0(t){return[t.terminalType]}o(l0,"firstForTerminal");var u0="_~IN~_",Na,aL=(Na=class extends du{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){const i=f0(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(r),a=new Ct({definition:s}),c=gi(a);this.follows[i]=c}},o(Na,"ResyncFollowsWalker"),Na);function d0(t){const e={};return ae(t,n=>{const r=new aL(n).startWalking();xt(e,r)}),e}o(d0,"computeAllProdsFollows");function f0(t,e){return t.name+e+u0}o(f0,"buildBetweenProdsFollowPrefix");var xc={},oL=new Iv;function Tc(t){const e=t.toString();if(xc.hasOwnProperty(e))return xc[e];{const n=oL.pattern(e);return xc[e]=n,n}}o(Tc,"getRegExpAst");function h0(){xc={}}o(h0,"clearRegExpParserCache");var p0="Complement Sets are not supported for first char optimization",Sl=`Unable to use "first char" lexer optimizations:
`;function m0(t,e=!1){try{const n=Tc(t);return Al(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===p0)e&&eh(`${Sl}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),kl(`${Sl}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}o(m0,"getOptimizedStartCodesIndices");function Al(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)Al(t.value[i],e,n);break;case"Alternative":const r=t.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":Ai(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(p0);ae(a.value,l=>{if(typeof l=="number")Ai(l,e,n);else{const u=l;if(n===!0)for(let d=u.from;d<=u.to;d++)Ai(d,e,n);else{for(let d=u.from;d<=u.to&&d<Ci;d++)Ai(d,e,n);if(u.to>=Ci){const d=u.from>=Ci?u.from:Ci,f=u.to,p=$n(d),h=$n(f);for(let R=p;R<=h;R++)e[R]=R}}}});break;case"Group":Al(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const c=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&wl(a)===!1||a.type!=="Group"&&c===!1)break}break;default:throw Error("non exhaustive match!")}return Ze(e)}o(Al,"firstCharOptimizedIndices");function Ai(t,e,n){const r=$n(t);e[r]=r,n===!0&&g0(t,e)}o(Ai,"addOptimizedIdxToResult");function g0(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const i=$n(r.charCodeAt(0));e[i]=i}else{const i=n.toLowerCase();if(i!==n){const s=$n(i.charCodeAt(0));e[s]=s}}}o(g0,"handleIgnoreCase");function gd(t,e){return ai(t.value,n=>{if(typeof n=="number")return _t(e,n);{const r=n;return ai(e,i=>r.from<=i&&i<=r.to)!==void 0}})}o(gd,"findCode");function wl(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?Re(t.value)?rn(t.value,wl):wl(t.value):!1}o(wl,"isWholeOptional");var Pa,cL=(Pa=class extends Wl{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){_t(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?gd(e,this.targetCharCodes)===void 0&&(this.found=!0):gd(e,this.targetCharCodes)!==void 0&&(this.found=!0)}},o(Pa,"CharCodeFinder"),Pa);function fu(t,e){if(e instanceof RegExp){const n=Tc(e),r=new cL(t);return r.visit(n),r.found}else return ai(e,n=>_t(t,n.charCodeAt(0)))!==void 0}o(fu,"canMatchCharCode");var kr="PATTERN",wi="defaultMode",Nc="modes",v0=typeof new RegExp("(?:)").sticky=="boolean";function y0(t,e){e=Qf(e,{useSticky:v0,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(E,P)=>P()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{x0()});let r;n("Reject Lexer.NA",()=>{r=uu(t,E=>E[kr]===St.NA)});let i=!1,s;n("Transform Patterns",()=>{i=!1,s=J(r,E=>{const P=E[kr];if(On(P)){const j=P.source;return j.length===1&&j!=="^"&&j!=="$"&&j!=="."&&!P.ignoreCase?j:j.length===2&&j[0]==="\\"&&!_t(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],j[1])?j[1]:e.useSticky?yd(P):vd(P)}else{if(jn(P))return i=!0,{exec:P};if(typeof P=="object")return i=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const j=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),z=new RegExp(j);return e.useSticky?yd(z):vd(z)}}else throw Error("non exhaustive match")}})});let a,c,l,u,d;n("misc mapping",()=>{a=J(r,E=>E.tokenTypeIdx),c=J(r,E=>{const P=E.GROUP;if(P!==St.SKIPPED){if(wt(P))return P;if(Ln(P))return!1;throw Error("non exhaustive match")}}),l=J(r,E=>{const P=E.LONGER_ALT;if(P)return Re(P)?J(P,z=>Em(r,z)):[Em(r,P)]}),u=J(r,E=>E.PUSH_MODE),d=J(r,E=>oe(E,"POP_MODE"))});let f;n("Line Terminator Handling",()=>{const E=sh(e.lineTerminatorCharacters);f=J(r,P=>!1),e.positionTracking!=="onlyOffset"&&(f=J(r,P=>oe(P,"LINE_BREAKS")?!!P.LINE_BREAKS:ih(P,E)===!1&&fu(E,P.PATTERN)))});let p,h,R,k;n("Misc Mapping #2",()=>{p=J(r,rh),h=J(s,M0),R=yt(r,(E,P)=>{const j=P.GROUP;return wt(j)&&j!==St.SKIPPED&&(E[j]=[]),E},{}),k=J(s,(E,P)=>({pattern:s[P],longerAlt:l[P],canLineTerminator:f[P],isCustom:p[P],short:h[P],group:c[P],push:u[P],pop:d[P],tokenTypeIdx:a[P],tokenType:r[P]}))});let A=!0,w=[];return e.safeMode||n("First Char Optimization",()=>{w=yt(r,(E,P,j)=>{if(typeof P.PATTERN=="string"){const z=P.PATTERN.charCodeAt(0),ie=$n(z);jc(E,ie,k[j])}else if(Re(P.START_CHARS_HINT)){let z;ae(P.START_CHARS_HINT,ie=>{const de=typeof ie=="string"?ie.charCodeAt(0):ie,ve=$n(de);z!==ve&&(z=ve,jc(E,ve,k[j]))})}else if(On(P.PATTERN))if(P.PATTERN.unicode)A=!1,e.ensureOptimizations&&kl(`${Sl}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const z=m0(P.PATTERN,e.ensureOptimizations);Pe(z)&&(A=!1),ae(z,ie=>{jc(E,ie,k[j])})}else e.ensureOptimizations&&kl(`${Sl}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),A=!1;return E},[])}),{emptyGroups:R,patternIdxToConfig:k,charCodeToPatternIdxToConfig:w,hasCustom:i,canBeOptimized:A}}o(y0,"analyzeTokenTypes");function T0(t,e){let n=[];const r=_0(t);n=n.concat(r.errors);const i=b0(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(R0(s)),n=n.concat(E0(s)),n=n.concat(N0(s,e)),n=n.concat(P0(s)),n}o(T0,"validatePatterns");function R0(t){let e=[];const n=jt(t,r=>On(r[kr]));return e=e.concat(k0(n)),e=e.concat(A0(n)),e=e.concat(w0(n)),e=e.concat(C0(n)),e=e.concat(S0(n)),e}o(R0,"validateRegExpPattern");function _0(t){const e=jt(t,i=>!oe(i,kr)),n=J(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Ge.MISSING_PATTERN,tokenTypes:[i]})),r=lu(t,e);return{errors:n,valid:r}}o(_0,"findMissingPatterns");function b0(t){const e=jt(t,i=>{const s=i[kr];return!On(s)&&!jn(s)&&!oe(s,"exec")&&!wt(s)}),n=J(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Ge.INVALID_PATTERN,tokenTypes:[i]})),r=lu(t,e);return{errors:n,valid:r}}o(b0,"findInvalidPatterns");var lL=/[^\\][$]/;function k0(t){const i=class i extends Wl{constructor(){super(...arguments),this.found=!1}visitEndAnchor(a){this.found=!0}};o(i,"EndAnchorFinder");let e=i;const n=jt(t,s=>{const a=s.PATTERN;try{const c=Tc(a),l=new e;return l.visit(c),l.found}catch{return lL.test(a.source)}});return J(n,s=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+s.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ge.EOI_ANCHOR_FOUND,tokenTypes:[s]}))}o(k0,"findEndOfInputAnchor");function S0(t){const e=jt(t,r=>r.PATTERN.test(""));return J(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Ge.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}o(S0,"findEmptyMatchRegExps");var uL=/[^\\[][\^]|^\^/;function A0(t){const i=class i extends Wl{constructor(){super(...arguments),this.found=!1}visitStartAnchor(a){this.found=!0}};o(i,"StartAnchorFinder");let e=i;const n=jt(t,s=>{const a=s.PATTERN;try{const c=Tc(a),l=new e;return l.visit(c),l.found}catch{return uL.test(a.source)}});return J(n,s=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+s.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ge.SOI_ANCHOR_FOUND,tokenTypes:[s]}))}o(A0,"findStartOfInputAnchor");function w0(t){const e=jt(t,r=>{const i=r[kr];return i instanceof RegExp&&(i.multiline||i.global)});return J(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Ge.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}o(w0,"findUnsupportedFlags");function C0(t){const e=[];let n=J(t,s=>yt(t,(a,c)=>(s.PATTERN.source===c.PATTERN.source&&!_t(e,c)&&c.PATTERN!==St.NA&&(e.push(c),a.push(c)),a),[]));n=yc(n);const r=jt(n,s=>s.length>1);return J(r,s=>{const a=J(s,l=>l.name);return{message:`The same RegExp pattern ->${cn(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:Ge.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}o(C0,"findDuplicatePatterns");function E0(t){const e=jt(t,r=>{if(!oe(r,"GROUP"))return!1;const i=r.GROUP;return i!==St.SKIPPED&&i!==St.NA&&!wt(i)});return J(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Ge.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}o(E0,"findInvalidGroupType");function N0(t,e){const n=jt(t,i=>i.PUSH_MODE!==void 0&&!_t(e,i.PUSH_MODE));return J(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Ge.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}o(N0,"findModesThatDoNotExist");function P0(t){const e=[],n=yt(t,(r,i,s)=>{const a=i.PATTERN;return a===St.NA||(wt(a)?r.push({str:a,idx:s,tokenType:i}):On(a)&&D0(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return ae(t,(r,i)=>{ae(n,({str:s,idx:a,tokenType:c})=>{if(i<a&&I0(s,r.PATTERN)){const l=`Token: ->${c.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:l,type:Ge.UNREACHABLE_PATTERN,tokenTypes:[r,c]})}})}),e}o(P0,"findUnreachablePatterns");function I0(t,e){if(On(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(jn(e))return e(t,0,[],{});if(oe(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}o(I0,"testTokenType");function D0(t){return ai([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}o(D0,"noMetaChar");function vd(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}o(vd,"addStartOfInput");function yd(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}o(yd,"addStickyFlag");function O0(t,e,n){const r=[];return oe(t,wi)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+wi+`> property in its definition
`,type:Ge.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),oe(t,Nc)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Nc+`> property in its definition
`,type:Ge.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),oe(t,Nc)&&oe(t,wi)&&!oe(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${wi}: <${t.defaultMode}>which does not exist
`,type:Ge.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),oe(t,Nc)&&ae(t.modes,(i,s)=>{ae(i,(a,c)=>{if(Ln(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${c}>
`,type:Ge.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(oe(a,"LONGER_ALT")){const l=Re(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];ae(l,u=>{!Ln(u)&&!_t(i,u)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${a.name}> outside of mode <${s}>
`,type:Ge.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}o(O0,"performRuntimeChecks");function L0(t,e,n){const r=[];let i=!1;const s=yc(Vt(Ze(t.modes))),a=uu(s,l=>l[kr]===St.NA),c=sh(n);return e&&ae(a,l=>{const u=ih(l,c);if(u!==!1){const f={message:F0(l,u),type:u.issue,tokenType:l};r.push(f)}else oe(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(i=!0):fu(c,l.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Ge.NO_LINE_BREAKS_FLAGS}),r}o(L0,"performWarningRuntimeChecks");function $0(t){const e={},n=Ft(t);return ae(n,r=>{const i=t[r];if(Re(i))e[r]=[];else throw Error("non exhaustive match")}),e}o($0,"cloneEmptyGroups");function rh(t){const e=t.PATTERN;if(On(e))return!1;if(jn(e))return!0;if(oe(e,"exec"))return!0;if(wt(e))return!1;throw Error("non exhaustive match")}o(rh,"isCustomPattern");function M0(t){return wt(t)&&t.length===1?t.charCodeAt(0):!1}o(M0,"isShortPattern");var dL={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function ih(t,e){if(oe(t,"LINE_BREAKS"))return!1;if(On(t.PATTERN)){try{fu(e,t.PATTERN)}catch(n){return{issue:Ge.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(wt(t.PATTERN))return!1;if(rh(t))return{issue:Ge.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}o(ih,"checkLineBreaksIssues");function F0(t,e){if(e.issue===Ge.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Ge.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}o(F0,"buildLineBreakIssueMessage");function sh(t){return J(t,n=>wt(n)?n.charCodeAt(0):n)}o(sh,"getCharCodes");function jc(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}o(jc,"addToMapOfArrays");var Ci=256,Uc=[];function $n(t){return t<Ci?t:Uc[t]}o($n,"charCodeToOptimizedIndex");function x0(){if(Pe(Uc)){Uc=new Array(65536);for(let t=0;t<65536;t++)Uc[t]=t>255?255+~~(t/255):t}}o(x0,"initCharCodeToOptimizedIndexMap");function vi(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}o(vi,"tokenStructuredMatcher");function is(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}o(is,"tokenStructuredMatcherNoCategories");var Pm=1,j0={};function yi(t){const e=U0(t);q0(e),W0(e),G0(e),ae(e,n=>{n.isParent=n.categoryMatches.length>0})}o(yi,"augmentTokenTypes");function U0(t){let e=ut(t),n=t,r=!0;for(;r;){n=yc(Vt(J(n,s=>s.CATEGORIES)));const i=lu(n,e);e=e.concat(i),Pe(i)?r=!1:n=i}return e}o(U0,"expandCategories");function q0(t){ae(t,e=>{oh(e)||(j0[Pm]=e,e.tokenTypeIdx=Pm++),Td(e)&&!Re(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Td(e)||(e.CATEGORIES=[]),H0(e)||(e.categoryMatches=[]),B0(e)||(e.categoryMatchesMap={})})}o(q0,"assignTokenDefaultProps");function G0(t){ae(t,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(j0[r].tokenTypeIdx)})})}o(G0,"assignCategoriesTokensProp");function W0(t){ae(t,e=>{ah([],e)})}o(W0,"assignCategoriesMapProp");function ah(t,e){ae(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),ae(e.CATEGORIES,n=>{const r=t.concat(e);_t(r,n)||ah(r,n)})}o(ah,"singleAssignCategoriesToksMap");function oh(t){return oe(t,"tokenTypeIdx")}o(oh,"hasShortKeyProperty");function Td(t){return oe(t,"CATEGORIES")}o(Td,"hasCategoriesProperty");function H0(t){return oe(t,"categoryMatches")}o(H0,"hasExtendingTokensTypesProperty");function B0(t){return oe(t,"categoryMatchesMap")}o(B0,"hasExtendingTokensTypesMapProperty");function K0(t){return oe(t,"tokenTypeIdx")}o(K0,"isTokenType");var fL={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}},Ge;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Ge||(Ge={}));var Ei={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:fL,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ei);var Ia,St=(Ia=class{constructor(e,n=Ei){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:c,value:l}=th(s),u=c>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${a}<-- <${i}> time: ${c}ms`),this.traceInitIndent--,l}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=xt({},Ei,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ei.lineTerminatorsPattern)this.config.lineTerminatorsPattern=dL;else if(this.config.lineTerminatorCharacters===Ei.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Re(e)?i={modes:{defaultMode:ut(e)},defaultMode:wi}:(s=!1,i=ut(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(O0(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(L0(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},ae(i.modes,(c,l)=>{i.modes[l]=uu(c,u=>Ln(u))});const a=Ft(i.modes);if(ae(i.modes,(c,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(T0(c,a))}),Pe(this.lexerDefinitionErrors)){yi(c);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=y0(c,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=xt({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!Pe(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const l=J(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}ae(this.lexerDefinitionWarning,c=>{eh(c.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(v0?(this.chopInput=br,this.match=this.matchWithTest):(this.updateLastIndex=Qe,this.match=this.matchWithExec),s&&(this.handleModes=Qe),this.trackStartLines===!1&&(this.computeNewColumn=br),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Qe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const c=yt(this.canModeBeOptimized,(l,u,d)=>(u===!1&&l.push(d),l),[]);if(n.ensureOptimizations&&!Pe(c))throw Error(`Lexer Modes: < ${c.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{h0()}),this.TRACE_INIT("toFastProperties",()=>{nh(this)})})}tokenize(e,n=this.defaultMode){if(!Pe(this.lexerDefinitionErrors)){const i=J(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,s,a,c,l,u,d,f,p,h,R,k,A,w;const E=e,P=E.length;let j=0,z=0;const ie=this.hasCustom?0:Math.floor(e.length/10),de=new Array(ie),ve=[];let ue=this.trackStartLines?1:void 0,L=this.trackStartLines?1:void 0;const W=$0(this.emptyGroups),v=this.trackStartLines,q=this.config.lineTerminatorsPattern;let Y=0,V=[],O=[];const _=[],g=[];Object.freeze(g);let y;function b(){return V}o(b,"getPossiblePatternsSlow");function T(ee){const te=$n(ee),fe=O[te];return fe===void 0?g:fe}o(T,"getPossiblePatternsOptimized");const m=o(ee=>{if(_.length===1&&ee.tokenType.PUSH_MODE===void 0){const te=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ee);ve.push({offset:ee.startOffset,line:ee.startLine,column:ee.startColumn,length:ee.image.length,message:te})}else{_.pop();const te=si(_);V=this.patternIdxToConfig[te],O=this.charCodeToPatternIdxToConfig[te],Y=V.length;const fe=this.canModeBeOptimized[te]&&this.config.safeMode===!1;O&&fe?y=T:y=b}},"pop_mode");function C(ee){_.push(ee),O=this.charCodeToPatternIdxToConfig[ee],V=this.patternIdxToConfig[ee],Y=V.length,Y=V.length;const te=this.canModeBeOptimized[ee]&&this.config.safeMode===!1;O&&te?y=T:y=b}o(C,"push_mode"),C.call(this,n);let D;const B=this.config.recoveryEnabled;for(;j<P;){l=null;const ee=E.charCodeAt(j),te=y(ee),fe=te.length;for(r=0;r<fe;r++){D=te[r];const Q=D.pattern;u=null;const he=D.short;if(he!==!1?ee===he&&(l=Q):D.isCustom===!0?(w=Q.exec(E,j,de,W),w!==null?(l=w[0],w.payload!==void 0&&(u=w.payload)):l=null):(this.updateLastIndex(Q,j),l=this.match(Q,e,j)),l!==null){if(c=D.longerAlt,c!==void 0){const H=c.length;for(s=0;s<H;s++){const pe=V[c[s]],Ae=pe.pattern;if(d=null,pe.isCustom===!0?(w=Ae.exec(E,j,de,W),w!==null?(a=w[0],w.payload!==void 0&&(d=w.payload)):a=null):(this.updateLastIndex(Ae,j),a=this.match(Ae,e,j)),a&&a.length>l.length){l=a,u=d,D=pe;break}}}break}}if(l!==null){if(f=l.length,p=D.group,p!==void 0&&(h=D.tokenTypeIdx,R=this.createTokenInstance(l,j,h,D.tokenType,ue,L,f),this.handlePayload(R,u),p===!1?z=this.addToken(de,z,R):W[p].push(R)),e=this.chopInput(e,f),j=j+f,L=this.computeNewColumn(L,f),v===!0&&D.canLineTerminator===!0){let Q=0,he,H;q.lastIndex=0;do he=q.test(l),he===!0&&(H=q.lastIndex-1,Q++);while(he===!0);Q!==0&&(ue=ue+Q,L=f-H,this.updateTokenEndLineColumnLocation(R,p,H,Q,ue,L,f))}this.handleModes(D,m,C,R)}else{const Q=j,he=ue,H=L;let pe=B===!1;for(;pe===!1&&j<P;)for(e=this.chopInput(e,1),j++,i=0;i<Y;i++){const Ae=V[i],He=Ae.pattern,at=Ae.short;if(at!==!1?E.charCodeAt(j)===at&&(pe=!0):Ae.isCustom===!0?pe=He.exec(E,j,de,W)!==null:(this.updateLastIndex(He,j),pe=He.exec(e)!==null),pe===!0)break}if(k=j-Q,L=this.computeNewColumn(L,k),A=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(E,Q,k,he,H),ve.push({offset:Q,line:he,column:H,length:k,message:A}),B===!1)break}}return this.hasCustom||(de.length=z),{tokens:de,groups:W,errors:ve}}handleModes(e,n,r,i){if(e.pop===!0){const s=e.push;n(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,s,a,c){let l,u;n!==void 0&&(l=r===c-1,u=l?-1:0,i===1&&l===!0||(e.endLine=s+u,e.endColumn=a-1+-u))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,s,a){return{image:e,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,s,a,c){return{image:e,startOffset:n,endOffset:n+c-1,startLine:s,endLine:s,startColumn:a,endColumn:a+c-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){const r=e.exec(n);return r!==null?r[0]:null}},o(Ia,"Lexer"),Ia);St.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";St.NA=/NOT_APPLICABLE/;function yr(t){return ch(t)?t.LABEL:t.name}o(yr,"tokenLabel");function ch(t){return wt(t.LABEL)&&t.LABEL!==""}o(ch,"hasTokenLabel");var hL="parent",Im="categories",Dm="label",Om="group",Lm="push_mode",$m="pop_mode",Mm="longer_alt",Fm="line_breaks",xm="start_chars_hint";function lh(t){return z0(t)}o(lh,"createToken");function z0(t){const e=t.pattern,n={};if(n.name=t.name,Ln(e)||(n.PATTERN=e),oe(t,hL))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return oe(t,Im)&&(n.CATEGORIES=t[Im]),yi([n]),oe(t,Dm)&&(n.LABEL=t[Dm]),oe(t,Om)&&(n.GROUP=t[Om]),oe(t,$m)&&(n.POP_MODE=t[$m]),oe(t,Lm)&&(n.PUSH_MODE=t[Lm]),oe(t,Mm)&&(n.LONGER_ALT=t[Mm]),oe(t,Fm)&&(n.LINE_BREAKS=t[Fm]),oe(t,xm)&&(n.START_CHARS_HINT=t[xm]),n}o(z0,"createTokenInternal");var Sr=lh({name:"EOF",pattern:St.NA});yi([Sr]);function hu(t,e,n,r,i,s,a,c){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:c,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}o(hu,"createTokenInstance");function uh(t,e){return vi(t,e)}o(uh,"tokenMatcher");var Vr={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${ch(t)?`--> ${yr(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const s="Expecting: ",c=`
but found: '`+cn(e).image+"'";if(r)return s+r+c;{const l=yt(t,(p,h)=>p.concat(h),[]),u=J(l,p=>`[${J(p,h=>yr(h)).join(", ")}]`),f=`one of these possible Token sequences:
${J(u,(p,h)=>`  ${h+1}. ${p}`).join(`
`)}`;return s+f+c}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",a=`
but found: '`+cn(e).image+"'";if(n)return i+n+a;{const l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${J(t,u=>`[${J(u,d=>yr(d)).join(",")}]`).join(" ,")}>`;return i+l+a}}};Object.freeze(Vr);var pL={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},pr={buildDuplicateFoundError(t,e){function n(d){return d instanceof Me?d.terminalType.name:d instanceof Tt?d.nonTerminalName:""}o(n,"getExtraProductionArgument");const r=t.name,i=cn(e),s=i.idx,a=Qt(i),c=n(i),l=s>0;let u=`->${a}${l?s:""}<- ${c?`with argument: ->${c}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=J(t.prefixPath,i=>yr(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=J(t.prefixPath,i=>yr(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=Qt(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=J(t.leftRecursionPath,s=>s.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof pi?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function V0(t,e){const n=new mL(t,e);return n.resolveRefs(),n.errors}o(V0,"resolveGrammar");var Da,mL=(Da=class extends mi{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){ae(Ze(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:Rt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}},o(Da,"GastRefResolverVisitor"),Da),Oa,gL=(Oa=class extends du{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=ut(this.path.ruleStack).reverse(),this.occurrenceStack=ut(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){Pe(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},o(Oa,"AbstractNextPossibleTokensWalker"),Oa),La,vL=(La=class extends gL{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=n.concat(r),s=new Ct({definition:i});this.possibleTokTypes=gi(s),this.found=!0}}},o(La,"NextAfterTokenWalker"),La),$a,pu=($a=class extends du{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},o($a,"AbstractNextTerminalAfterProductionWalker"),$a),Ma,yL=(Ma=class extends pu{walkMany(e,n,r){if(e.idx===this.occurrence){const i=cn(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Me&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}},o(Ma,"NextTerminalAfterManyWalker"),Ma),Fa,jm=(Fa=class extends pu{walkManySep(e,n,r){if(e.idx===this.occurrence){const i=cn(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Me&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}},o(Fa,"NextTerminalAfterManySepWalker"),Fa),xa,TL=(xa=class extends pu{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){const i=cn(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Me&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}},o(xa,"NextTerminalAfterAtLeastOneWalker"),xa),ja,Um=(ja=class extends pu{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){const i=cn(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Me&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}},o(ja,"NextTerminalAfterAtLeastOneSepWalker"),ja);function Cl(t,e,n=[]){n=ut(n);let r=[],i=0;function s(c){return c.concat(ot(t,i+1))}o(s,"remainingPathWith");function a(c){const l=Cl(s(c),e,n);return r.concat(l)}for(o(a,"getAlternativesForProd");n.length<e&&i<t.length;){const c=t[i];if(c instanceof Ct)return a(c.definition);if(c instanceof Tt)return a(c.definition);if(c instanceof ct)r=a(c.definition);else if(c instanceof Ut){const l=c.definition.concat([new qe({definition:c.definition})]);return a(l)}else if(c instanceof qt){const l=[new Ct({definition:c.definition}),new qe({definition:[new Me({terminalType:c.separator})].concat(c.definition)})];return a(l)}else if(c instanceof Nt){const l=c.definition.concat([new qe({definition:[new Me({terminalType:c.separator})].concat(c.definition)})]);r=a(l)}else if(c instanceof qe){const l=c.definition.concat([new qe({definition:c.definition})]);r=a(l)}else{if(c instanceof Pt)return ae(c.definition,l=>{Pe(l.definition)===!1&&(r=a(l.definition))}),r;if(c instanceof Me)n.push(c.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:ot(t,i)}),r}o(Cl,"possiblePathsFrom");function dh(t,e,n,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let c=!1;const l=e.length,u=l-r-1,d=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Pe(f);){const p=f.pop();if(p===a){c&&si(f).idx<=u&&f.pop();continue}const h=p.def,R=p.idx,k=p.ruleStack,A=p.occurrenceStack;if(Pe(h))continue;const w=h[0];if(w===i){const E={idx:R,def:ot(h),ruleStack:ns(k),occurrenceStack:ns(A)};f.push(E)}else if(w instanceof Me)if(R<l-1){const E=R+1,P=e[E];if(n(P,w.terminalType)){const j={idx:E,def:ot(h),ruleStack:k,occurrenceStack:A};f.push(j)}}else if(R===l-1)d.push({nextTokenType:w.terminalType,nextTokenOccurrence:w.idx,ruleStack:k,occurrenceStack:A}),c=!0;else throw Error("non exhaustive match");else if(w instanceof Tt){const E=ut(k);E.push(w.nonTerminalName);const P=ut(A);P.push(w.idx);const j={idx:R,def:w.definition.concat(s,ot(h)),ruleStack:E,occurrenceStack:P};f.push(j)}else if(w instanceof ct){const E={idx:R,def:ot(h),ruleStack:k,occurrenceStack:A};f.push(E),f.push(a);const P={idx:R,def:w.definition.concat(ot(h)),ruleStack:k,occurrenceStack:A};f.push(P)}else if(w instanceof Ut){const E=new qe({definition:w.definition,idx:w.idx}),P=w.definition.concat([E],ot(h)),j={idx:R,def:P,ruleStack:k,occurrenceStack:A};f.push(j)}else if(w instanceof qt){const E=new Me({terminalType:w.separator}),P=new qe({definition:[E].concat(w.definition),idx:w.idx}),j=w.definition.concat([P],ot(h)),z={idx:R,def:j,ruleStack:k,occurrenceStack:A};f.push(z)}else if(w instanceof Nt){const E={idx:R,def:ot(h),ruleStack:k,occurrenceStack:A};f.push(E),f.push(a);const P=new Me({terminalType:w.separator}),j=new qe({definition:[P].concat(w.definition),idx:w.idx}),z=w.definition.concat([j],ot(h)),ie={idx:R,def:z,ruleStack:k,occurrenceStack:A};f.push(ie)}else if(w instanceof qe){const E={idx:R,def:ot(h),ruleStack:k,occurrenceStack:A};f.push(E),f.push(a);const P=new qe({definition:w.definition,idx:w.idx}),j=w.definition.concat([P],ot(h)),z={idx:R,def:j,ruleStack:k,occurrenceStack:A};f.push(z)}else if(w instanceof Pt)for(let E=w.definition.length-1;E>=0;E--){const P=w.definition[E],j={idx:R,def:P.definition.concat(ot(h)),ruleStack:k,occurrenceStack:A};f.push(j),f.push(a)}else if(w instanceof Ct)f.push({idx:R,def:w.definition.concat(ot(h)),ruleStack:k,occurrenceStack:A});else if(w instanceof pi)f.push(X0(w,R,k,A));else throw Error("non exhaustive match")}return d}o(dh,"nextPossibleTokensAfter");function X0(t,e,n,r){const i=ut(n);i.push(t.name);const s=ut(r);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}o(X0,"expandTopLevelRule");var xe;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(xe||(xe={}));function mu(t){if(t instanceof ct||t==="Option")return xe.OPTION;if(t instanceof qe||t==="Repetition")return xe.REPETITION;if(t instanceof Ut||t==="RepetitionMandatory")return xe.REPETITION_MANDATORY;if(t instanceof qt||t==="RepetitionMandatoryWithSeparator")return xe.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Nt||t==="RepetitionWithSeparator")return xe.REPETITION_WITH_SEPARATOR;if(t instanceof Pt||t==="Alternation")return xe.ALTERNATION;throw Error("non exhaustive match")}o(mu,"getProdType");function Rd(t){const{occurrence:e,rule:n,prodType:r,maxLookahead:i}=t,s=mu(r);return s===xe.ALTERNATION?Rc(e,n,i):_c(e,n,s,i)}o(Rd,"getLookaheadPaths");function Y0(t,e,n,r,i,s){const a=Rc(t,e,n),c=hh(a)?is:vi;return s(a,r,c,i)}o(Y0,"buildLookaheadFuncForOr");function J0(t,e,n,r,i,s){const a=_c(t,e,i,n),c=hh(a)?is:vi;return s(a[0],c,r)}o(J0,"buildLookaheadFuncForOptionalProd");function Q0(t,e,n,r){const i=t.length,s=rn(t,a=>rn(a,c=>c.length===1));if(e)return function(a){const c=J(a,l=>l.GATE);for(let l=0;l<i;l++){const u=t[l],d=u.length,f=c[l];if(!(f!==void 0&&f.call(this)===!1))e:for(let p=0;p<d;p++){const h=u[p],R=h.length;for(let k=0;k<R;k++){const A=this.LA(k+1);if(n(A,h[k])===!1)continue e}return l}}};if(s&&!r){const a=J(t,l=>Vt(l)),c=yt(a,(l,u,d)=>(ae(u,f=>{oe(l,f.tokenTypeIdx)||(l[f.tokenTypeIdx]=d),ae(f.categoryMatches,p=>{oe(l,p)||(l[p]=d)})}),l),{});return function(){const l=this.LA(1);return c[l.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const c=t[a],l=c.length;e:for(let u=0;u<l;u++){const d=c[u],f=d.length;for(let p=0;p<f;p++){const h=this.LA(p+1);if(n(h,d[p])===!1)continue e}return a}}}}o(Q0,"buildAlternativesLookAheadFunc");function Z0(t,e,n){const r=rn(t,s=>s.length===1),i=t.length;if(r&&!n){const s=Vt(t);if(s.length===1&&Pe(s[0].categoryMatches)){const c=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===c}}else{const a=yt(s,(c,l,u)=>(c[l.tokenTypeIdx]=!0,ae(l.categoryMatches,d=>{c[d]=!0}),c),[]);return function(){const c=this.LA(1);return a[c.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=t[s],c=a.length;for(let l=0;l<c;l++){const u=this.LA(l+1);if(e(u,a[l])===!1)continue e}return!0}return!1}}o(Z0,"buildSingleAlternativeLookaheadFunction");var Ua,RL=(Ua=class extends du{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,xe.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,xe.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,xe.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,xe.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,xe.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}},o(Ua,"RestDefinitionFinderWalker"),Ua),qa,ek=(qa=class extends mi{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,xe.OPTION)}visitRepetition(e){this.checkIsTarget(e,xe.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,xe.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,xe.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,xe.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,xe.ALTERNATION)}},o(qa,"InsideDefinitionFinderVisitor"),qa);function _d(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}o(_d,"initializeArrayOfArrays");function qc(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let c=0;c<r.categoryMatches.length;c++){const l="_"+r.categoryMatches[c];i.push(a+l)}}e=i}return e}o(qc,"pathToHashKeys");function tk(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}o(tk,"isUniquePrefixHash");function fh(t,e){const n=J(t,a=>Cl([a],1)),r=_d(n.length),i=J(n,a=>{const c={};return ae(a,l=>{const u=qc(l.partialPath);ae(u,d=>{c[d]=!0})}),c});let s=n;for(let a=1;a<=e;a++){const c=s;s=_d(c.length);for(let l=0;l<c.length;l++){const u=c[l];for(let d=0;d<u.length;d++){const f=u[d].partialPath,p=u[d].suffixDef,h=qc(f);if(tk(i,h,l)||Pe(p)||f.length===e){const k=r[l];if(El(k,f)===!1){k.push(f);for(let A=0;A<h.length;A++){const w=h[A];i[l][w]=!0}}}else{const k=Cl(p,a+1,f);s[l]=s[l].concat(k),ae(k,A=>{const w=qc(A.partialPath);ae(w,E=>{i[l][E]=!0})})}}}}return r}o(fh,"lookAheadSequenceFromAlternatives");function Rc(t,e,n,r){const i=new ek(t,xe.ALTERNATION,r);return e.accept(i),fh(i.result,n)}o(Rc,"getLookaheadPathsForOr");function _c(t,e,n,r){const i=new ek(t,n);e.accept(i);const s=i.result,c=new RL(e,t,n).startWalking(),l=new Ct({definition:s}),u=new Ct({definition:c});return fh([l,u],r)}o(_c,"getLookaheadPathsForOptionalProd");function El(t,e){e:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}o(El,"containsPath");function nk(t,e){return t.length<e.length&&rn(t,(n,r)=>{const i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}o(nk,"isStrictPrefixOfPath");function hh(t){return rn(t,e=>rn(e,n=>rn(n,r=>Pe(r.categoryMatches))))}o(hh,"areTokenCategoriesNotUsed");function rk(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return J(e,n=>Object.assign({type:Rt.CUSTOM_LOOKAHEAD_VALIDATION},n))}o(rk,"validateLookahead");function ik(t,e,n,r){const i=Mt(t,l=>sk(l,n)),s=mk(t,e,n),a=Mt(t,l=>dk(l,n)),c=Mt(t,l=>ok(l,t,r,n));return i.concat(s,a,c)}o(ik,"validateGrammar");function sk(t,e){const n=new _L;t.accept(n);const r=n.allProductions,i=IO(r,ak),s=un(i,c=>c.length>1);return J(Ze(s),c=>{const l=cn(c),u=e.buildDuplicateFoundError(t,c),d=Qt(l),f={message:u,type:Rt.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:d,occurrence:l.idx},p=ph(l);return p&&(f.parameter=p),f})}o(sk,"validateDuplicateProductions");function ak(t){return`${Qt(t)}_#_${t.idx}_#_${ph(t)}`}o(ak,"identifyProductionForDuplicates");function ph(t){return t instanceof Me?t.terminalType.name:t instanceof Tt?t.nonTerminalName:""}o(ph,"getExtraProductionArgument");var Ga,_L=(Ga=class extends mi{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}},o(Ga,"OccurrenceValidationCollector"),Ga);function ok(t,e,n,r){const i=[];if(yt(e,(a,c)=>c.name===t.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:a,type:Rt.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}o(ok,"validateRuleDoesNotAlreadyExist");function ck(t,e,n){const r=[];let i;return _t(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:Rt.INVALID_RULE_OVERRIDE,ruleName:t})),r}o(ck,"validateRuleIsOverridden");function mh(t,e,n,r=[]){const i=[],s=xi(e.definition);if(Pe(s))return[];{const a=t.name;_t(s,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:Rt.LEFT_RECURSION,ruleName:a});const l=lu(s,r.concat([t])),u=Mt(l,d=>{const f=ut(r);return f.push(d),mh(t,d,n,f)});return i.concat(u)}}o(mh,"validateNoLeftRecursion");function xi(t){let e=[];if(Pe(t))return e;const n=cn(t);if(n instanceof Tt)e.push(n.referencedRule);else if(n instanceof Ct||n instanceof ct||n instanceof Ut||n instanceof qt||n instanceof Nt||n instanceof qe)e=e.concat(xi(n.definition));else if(n instanceof Pt)e=Vt(J(n.definition,s=>xi(s.definition)));else if(!(n instanceof Me))throw Error("non exhaustive match");const r=rs(n),i=t.length>1;if(r&&i){const s=ot(t);return e.concat(xi(s))}else return e}o(xi,"getFirstNoneTerminal");var Wa,gh=(Wa=class extends mi{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}},o(Wa,"OrCollector"),Wa);function lk(t,e){const n=new gh;t.accept(n);const r=n.alternations;return Mt(r,s=>{const a=ns(s.definition);return Mt(a,(c,l)=>{const u=dh([c],[],vi,1);return Pe(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:l}),type:Rt.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:l+1}]:[]})})}o(lk,"validateEmptyOrAlternative");function uk(t,e,n){const r=new gh;t.accept(r);let i=r.alternations;return i=uu(i,a=>a.ignoreAmbiguities===!0),Mt(i,a=>{const c=a.idx,l=a.maxLookahead||e,u=Rc(c,t,l,a),d=hk(u,a,t,n),f=pk(u,a,t,n);return d.concat(f)})}o(uk,"validateAmbiguousAlternationAlternatives");var Ha,bL=(Ha=class extends mi{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}},o(Ha,"RepetitionCollector"),Ha);function dk(t,e){const n=new gh;t.accept(n);const r=n.alternations;return Mt(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:Rt.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}o(dk,"validateTooManyAlts");function fk(t,e,n){const r=[];return ae(t,i=>{const s=new bL;i.accept(s);const a=s.allProductions;ae(a,c=>{const l=mu(c),u=c.maxLookahead||e,d=c.idx,p=_c(d,i,l,u)[0];if(Pe(Vt(p))){const h=n.buildEmptyRepetitionError({topLevelRule:i,repetition:c});r.push({message:h,type:Rt.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}o(fk,"validateSomeNonEmptyLookaheadPath");function hk(t,e,n,r){const i=[],s=yt(t,(c,l,u)=>(e.definition[u].ignoreAmbiguities===!0||ae(l,d=>{const f=[u];ae(t,(p,h)=>{u!==h&&El(p,d)&&e.definition[h].ignoreAmbiguities!==!0&&f.push(h)}),f.length>1&&!El(i,d)&&(i.push(d),c.push({alts:f,path:d}))}),c),[]);return J(s,c=>{const l=J(c.alts,d=>d+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:l,prefixPath:c.path}),type:Rt.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:c.alts}})}o(hk,"checkAlternativesAmbiguities");function pk(t,e,n,r){const i=yt(t,(a,c,l)=>{const u=J(c,d=>({idx:l,path:d}));return a.concat(u)},[]);return yc(Mt(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const l=a.idx,u=a.path,d=jt(i,p=>e.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<l&&nk(p.path,u));return J(d,p=>{const h=[p.idx+1,l+1],R=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:h,prefixPath:p.path}),type:Rt.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:R,alternatives:h}})}))}o(pk,"checkPrefixAlternativesAmbiguities");function mk(t,e,n){const r=[],i=J(e,s=>s.name);return ae(t,s=>{const a=s.name;if(_t(i,a)){const c=n.buildNamespaceConflictError(s);r.push({message:c,type:Rt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}o(mk,"checkTerminalAndNoneTerminalsNameSpace");function gk(t){const e=Qf(t,{errMsgProvider:pL}),n={};return ae(t.rules,r=>{n[r.name]=r}),V0(n,e.errMsgProvider)}o(gk,"resolveGrammar");function vk(t){return t=Qf(t,{errMsgProvider:pr}),ik(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}o(vk,"validateGrammar");var yk="MismatchedTokenException",Tk="NoViableAltException",Rk="EarlyExitException",_k="NotAllInputParsedException",bk=[yk,Tk,Rk,_k];Object.freeze(bk);function ss(t){return _t(bk,t.name)}o(ss,"isRecognitionException");var Ba,gu=(Ba=class extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},o(Ba,"RecognitionException"),Ba),Ka,kk=(Ka=class extends gu{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=yk}},o(Ka,"MismatchedTokenException"),Ka),za,kL=(za=class extends gu{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Tk}},o(za,"NoViableAltException"),za),Va,SL=(Va=class extends gu{constructor(e,n){super(e,n),this.name=_k}},o(Va,"NotAllInputParsedException"),Va),Xa,AL=(Xa=class extends gu{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Rk}},o(Xa,"EarlyExitException"),Xa),Fu={},Sk="InRuleRecoveryException",Ya,wL=(Ya=class extends Error{constructor(e){super(e),this.name=Sk}},o(Ya,"InRuleRecoveryException"),Ya),Ja,CL=(Ja=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=oe(e,"recoveryEnabled")?e.recoveryEnabled:Mn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Ak)}getTokenToInsert(e){const n=hu(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),c=[];let l=!1;const u=this.LA(1);let d=this.LA(1);const f=o(()=>{const p=this.LA(0),h=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:p,ruleName:this.getCurrRuleFullName()}),R=new kk(h,u,this.LA(0));R.resyncedTokens=ns(c),this.SAVE_ERROR(R)},"generateErrorMessage");for(;!l;)if(this.tokenMatcher(d,i)){f();return}else if(r.call(this)){f(),e.apply(this,n);return}else this.tokenMatcher(d,s)?l=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,c));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new wL("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||Pe(n))return!1;const r=this.LA(1);return ai(n,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return _t(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const i=ai(e,s=>uh(n,s));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Fu;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return J(e,(r,i)=>i===0?Fu:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=J(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return Vt(e)}getFollowSetFromFollowKey(e){if(e===Fu)return[Sr];const n=e.ruleName+e.idxInCallingRule+u0+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Sr)||n.push(e),n}reSyncTo(e){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return ns(n)}attemptInRepetitionRecovery(e,n,r,i,s,a,c){}getCurrentGrammarPath(e,n){const r=this.getHumanReadableRuleStack(),i=ut(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return J(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}},o(Ja,"Recoverable"),Ja);function Ak(t,e,n,r,i,s,a){const c=this.getKeyForAutomaticLookahead(r,i);let l=this.firstAfterRepMap[c];if(l===void 0){const p=this.getCurrRuleFullName(),h=this.getGAstProductions()[p];l=new s(h,i).startWalking(),this.firstAfterRepMap[c]=l}let u=l.token,d=l.occurrence;const f=l.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=Sr,d=1),!(u===void 0||d===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,d,a)&&this.tryInRepetitionRecovery(t,e,n,u)}o(Ak,"attemptInRepetitionRecovery");var EL=4,rr=8,wk=1<<rr,Ck=2<<rr,bd=3<<rr,kd=4<<rr,Sd=5<<rr,Gc=6<<rr;function Wc(t,e,n){return n|e|t}o(Wc,"getKeyForAutomaticLookahead");var Qa,vh=(Qa=class{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:Mn.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(Pe(n)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...s]}return n}validateNoLeftRecursion(e){return Mt(e,n=>mh(n,n,pr))}validateEmptyOrAlternatives(e){return Mt(e,n=>lk(n,pr))}validateAmbiguousAlternationAlternatives(e,n){return Mt(e,r=>uk(r,n,pr))}validateSomeNonEmptyLookaheadPath(e,n){return fk(e,n,pr)}buildLookaheadForAlternation(e){return Y0(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Q0)}buildLookaheadForOptional(e){return J0(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,mu(e.prodType),Z0)}},o(Qa,"LLkLookaheadStrategy"),Qa),Za,NL=(Za=class{initLooksAhead(e){this.dynamicTokensEnabled=oe(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Mn.dynamicTokensEnabled,this.maxLookahead=oe(e,"maxLookahead")?e.maxLookahead:Mn.maxLookahead,this.lookaheadStrategy=oe(e,"lookaheadStrategy")?e.lookaheadStrategy:new vh({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:c,repetitionWithSeparator:l}=Ek(n);ae(r,u=>{const d=u.idx===0?"":u.idx;this.TRACE_INIT(`${Qt(u)}${d}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),p=Wc(this.fullRuleNameToShort[n.name],wk,u.idx);this.setLaFuncCache(p,f)})}),ae(i,u=>{this.computeLookaheadFunc(n,u.idx,bd,"Repetition",u.maxLookahead,Qt(u))}),ae(s,u=>{this.computeLookaheadFunc(n,u.idx,Ck,"Option",u.maxLookahead,Qt(u))}),ae(a,u=>{this.computeLookaheadFunc(n,u.idx,kd,"RepetitionMandatory",u.maxLookahead,Qt(u))}),ae(c,u=>{this.computeLookaheadFunc(n,u.idx,Gc,"RepetitionMandatoryWithSeparator",u.maxLookahead,Qt(u))}),ae(l,u=>{this.computeLookaheadFunc(n,u.idx,Sd,"RepetitionWithSeparator",u.maxLookahead,Qt(u))})})})}computeLookaheadFunc(e,n,r,i,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const c=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),l=Wc(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(l,c)})}getKeyForAutomaticLookahead(e,n){const r=this.getLastExplicitRuleShortName();return Wc(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}},o(Za,"LooksAhead"),Za),eo,PL=(eo=class extends mi{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},o(eo,"DslMethodsCollectorVisitor"),eo),Pc=new PL;function Ek(t){Pc.reset(),t.accept(Pc);const e=Pc.dslMethods;return Pc.reset(),e}o(Ek,"collectMethods");function Ad(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}o(Ad,"setNodeLocationOnlyOffset");function wd(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}o(wd,"setNodeLocationFull");function Nk(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}o(Nk,"addTerminalToCst");function Pk(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}o(Pk,"addNoneTerminalToCst");var IL="name";function yh(t,e){Object.defineProperty(t,IL,{enumerable:!1,configurable:!0,writable:!1,value:e})}o(yh,"defineNameProp");function Ik(t,e){const n=Ft(t),r=n.length;for(let i=0;i<r;i++){const s=n[i],a=t[s],c=a.length;for(let l=0;l<c;l++){const u=a[l];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}o(Ik,"defaultVisit");function Dk(t,e){const n=o(function(){},"derivedConstructor");yh(n,t+"BaseSemantics");const r={visit:function(i,s){if(Re(i)&&(i=i[0]),!Ln(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=Lk(this,e);if(!Pe(i)){const s=J(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}o(Dk,"createBaseSemanticVisitorConstructor");function Ok(t,e,n){const r=o(function(){},"derivedConstructor");yh(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return ae(e,s=>{i[s]=Ik}),r.prototype=i,r.prototype.constructor=r,r}o(Ok,"createBaseVisitorConstructorWithDefaults");var Cd;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(Cd||(Cd={}));function Lk(t,e){return $k(t,e)}o(Lk,"validateVisitor");function $k(t,e){const n=jt(e,i=>jn(t[i])===!1),r=J(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:Cd.MISSING_METHOD,methodName:i}));return yc(r)}o($k,"validateMissingCstMethods");var to,DL=(to=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=oe(e,"nodeLocationTracking")?e.nodeLocationTracking:Mn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Qe,this.cstFinallyStateUpdate=Qe,this.cstPostTerminal=Qe,this.cstPostNonTerminal=Qe,this.cstPostRule=Qe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=wd,this.setNodeLocationFromNode=wd,this.cstPostRule=Qe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Qe,this.setNodeLocationFromNode=Qe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ad,this.setNodeLocationFromNode=Ad,this.cstPostRule=Qe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Qe,this.setNodeLocationFromNode=Qe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Qe,this.setNodeLocationFromNode=Qe,this.cstPostRule=Qe,this.setInitialNodeLocation=Qe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];Nk(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];Pk(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Ln(this.baseCstVisitorConstructor)){const e=Dk(this.className,Ft(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ln(this.baseCstVisitorWithDefaultsConstructor)){const e=Ok(this.className,Ft(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},o(to,"TreeBuilder"),to),no,OL=(no=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Nl}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?Nl:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},o(no,"LexerAdapter"),no),ro,LL=(ro=class{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=Pl){if(_t(this.definedRulesNames,e)){const a={message:pr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Rt.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=Pl){const i=ck(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,n,r);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(ss(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return i0(Ze(this.gastProductionsCache))}},o(ro,"RecognizerApi"),ro),io,$L=(io=class{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=is,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},oe(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Re(e)){if(Pe(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Re(e))this.tokensMap=yt(e,(s,a)=>(s[a.name]=a,s),{});else if(oe(e,"modes")&&rn(Vt(Ze(e.modes)),K0)){const s=Vt(Ze(e.modes)),a=Zf(s);this.tokensMap=yt(a,(c,l)=>(c[l.name]=l,c),{})}else if(Yt(e))this.tokensMap=ut(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Sr;const r=oe(e,"modes")?Vt(Ze(e.modes)):Ze(e),i=rn(r,s=>Pe(s.categoryMatches));this.tokenMatcher=i?is:vi,yi(Ze(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=oe(r,"resyncEnabled")?r.resyncEnabled:Pl.resyncEnabled,s=oe(r,"recoveryValueFunc")?r.recoveryValueFunc:Pl.recoveryValueFunc,a=this.ruleShortNameIdx<<EL+rr;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let c;return this.outputCst===!0?c=o(function(...d){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,d);const f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,s)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTry"):c=o(function(...d){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,d)}catch(f){return this.invokeRuleCatch(f,i,s)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTryCst"),Object.assign(c,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){const i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(ss(e)){const a=e;if(s){const c=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(c))if(a.resyncedTokens=this.reSyncTo(c),this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return r(e);else{if(this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,a.partialCstResult=l}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,n){const r=this.getKeyForAutomaticLookahead(Ck,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const c=i;i=o(()=>a.call(this)&&c.call(this),"lookAheadFunc")}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const r=this.getKeyForAutomaticLookahead(kd,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const c=i;i=o(()=>a.call(this)&&c.call(this),"lookAheadFunc")}}else s=n;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,xe.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,kd,e,TL)}atLeastOneSepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(Gc,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const c=o(()=>this.tokenMatcher(this.LA(1),s),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,c,i,Um],c,Gc,e,Um)}else throw this.raiseEarlyExitException(e,xe.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const r=this.getKeyForAutomaticLookahead(bd,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const c=n.GATE;if(c!==void 0){const l=i;i=o(()=>c.call(this)&&l.call(this),"lookaheadFunction")}}else s=n;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,bd,e,yL,a)}manySepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(Sd,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const c=o(()=>this.tokenMatcher(this.LA(1),s),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,c,i,jm],c,Sd,e,jm)}}repetitionSepSecondInternal(e,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,s],r,Gc,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const r=this.getKeyForAutomaticLookahead(wk,n),i=Re(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new SL(n,e))}}subruleInternal(e,n,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,n,r){throw ss(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new kk(i,n,s))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Sk?r:s}}else throw r}saveRecogState(){const e=this.errors,n=ut(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Sr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},o(io,"RecognizerEngine"),io),so,ML=(so=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=oe(e,"errorMessageProvider")?e.errorMessageProvider:Mn.errorMessageProvider}SAVE_ERROR(e){if(ss(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:ut(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return ut(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],c=_c(e,s,n,this.maxLookahead)[0],l=[];for(let d=1;d<=this.maxLookahead;d++)l.push(this.LA(d));const u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:c,actual:l,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new AL(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Rc(e,i,this.maxLookahead),a=[];for(let u=1;u<=this.maxLookahead;u++)a.push(this.LA(u));const c=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:c,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new kL(l,this.LA(1),c))}},o(so,"ErrorHandler"),so),ao,FL=(ao=class{initContentAssist(){}computeContentAssist(e,n){const r=this.gastProductionsCache[e];if(Ln(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return dh([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=cn(e.ruleStack),i=this.getGAstProductions()[n];return new vL(i,e).startWalking()}},o(ao,"ContentAssist"),ao),vu={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(vu);var qm=!0,Gm=Math.pow(2,rr)-1,Mk=lh({name:"RECORDING_PHASE_TOKEN",pattern:St.NA});yi([Mk]);var Fk=hu(Mk,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Fk);var xL={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},oo,jL=(oo=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return Nl}topLevelRuleRecord(e,n){try{const r=new pi({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return Br.call(this,ct,e,n)}atLeastOneInternalRecord(e,n){Br.call(this,Ut,n,e)}atLeastOneSepFirstInternalRecord(e,n){Br.call(this,qt,n,e,qm)}manyInternalRecord(e,n){Br.call(this,qe,n,e)}manySepFirstInternalRecord(e,n){Br.call(this,Nt,n,e,qm)}orInternalRecord(e,n){return xk.call(this,e,n)}subruleInternalRecord(e,n,r){if(as(n),!e||oe(e,"ruleName")===!1){const c=new Error(`<SUBRULE${Ed(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const i=si(this.recordingProdStack),s=e.ruleName,a=new Tt({idx:n,nonTerminalName:s,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?xL:vu}consumeInternalRecord(e,n,r){if(as(n),!oh(e)){const a=new Error(`<CONSUME${Ed(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=si(this.recordingProdStack),s=new Me({idx:n,terminalType:e,label:r==null?void 0:r.LABEL});return i.definition.push(s),Fk}},o(oo,"GastRecorder"),oo);function Br(t,e,n,r=!1){as(n);const i=si(this.recordingProdStack),s=jn(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),oe(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),vu}o(Br,"recordProd");function xk(t,e){as(e);const n=si(this.recordingProdStack),r=Re(t)===!1,i=r===!1?t:t.DEF,s=new Pt({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});oe(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const a=Jb(i,c=>jn(c.GATE));return s.hasPredicates=a,n.definition.push(s),ae(i,c=>{const l=new Ct({definition:[]});s.definition.push(l),oe(c,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=c.IGNORE_AMBIGUITIES:oe(c,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),c.ALT.call(this),this.recordingProdStack.pop()}),vu}o(xk,"recordOrProd");function Ed(t){return t===0?"":`${t}`}o(Ed,"getIdxSuffix");function as(t){if(t<0||t>Gm){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Gm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}o(as,"assertMethodIdxIsValid");var co,UL=(co=class{initPerformanceTracer(e){if(oe(e,"traceInitPerf")){const n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=Mn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=th(n),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return n()}},o(co,"PerformanceTracer"),co);function jk(t,e){e.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=n.prototype[i]})})}o(jk,"applyMixins");var Nl=hu(Sr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Nl);var Mn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Vr,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Pl=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),Rt;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Rt||(Rt={}));function Nd(t=void 0){return function(){return t}}o(Nd,"EMPTY_ALT");var ui,Th=(ui=class{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{nh(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let c;this.TRACE_INIT(`${i} Rule`,()=>{c=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=c})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=gk({rules:Ze(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(Pe(r)&&this.skipValidations===!1){const i=vk({rules:Ze(this.gastProductionsCache),tokenTypes:Ze(this.tokensMap),errMsgProvider:pr,grammarName:n}),s=rk({lookaheadStrategy:this.lookaheadStrategy,rules:Ze(this.gastProductionsCache),tokenTypes:Ze(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,s)}}),Pe(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=d0(Ze(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:Ze(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Ze(this.gastProductionsCache))})),!ui.DEFER_DEFINITION_ERRORS_HANDLING&&!Pe(this.definitionErrors))throw e=J(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),oe(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=oe(n,"skipValidations")?n.skipValidations:Mn.skipValidations}},o(ui,"Parser"),ui);Th.DEFER_DEFINITION_ERRORS_HANDLING=!1;jk(Th,[CL,NL,DL,OL,$L,LL,ML,FL,jL,UL]);var lo,qL=(lo=class extends Th{constructor(e,n=Mn){const r=ut(n);r.outputCst=!1,super(e,r)}},o(lo,"EmbeddedActionsParser"),lo);function Ar(t,e,n){return`${t.name}_${e}_${n}`}o(Ar,"buildATNKey");var Yn=1,GL=2,Uk=4,qk=5,bc=7,WL=8,HL=9,BL=10,KL=11,Gk=12,uo,Rh=(uo=class{constructor(e){this.target=e}isEpsilon(){return!1}},o(uo,"AbstractTransition"),uo),fo,_h=(fo=class extends Rh{constructor(e,n){super(e),this.tokenType=n}},o(fo,"AtomTransition"),fo),ho,Wk=(ho=class extends Rh{constructor(e){super(e)}isEpsilon(){return!0}},o(ho,"EpsilonTransition"),ho),po,bh=(po=class extends Rh{constructor(e,n,r){super(e),this.rule=n,this.followState=r}isEpsilon(){return!0}},o(po,"RuleTransition"),po);function Hk(t){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};Bk(e,t);const n=t.length;for(let r=0;r<n;r++){const i=t[r],s=ir(e,i,i);s!==void 0&&nS(e,i,s)}return e}o(Hk,"createATN");function Bk(t,e){const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=et(t,i,void 0,{type:GL}),a=et(t,i,void 0,{type:bc});s.stop=a,t.ruleToStartState.set(i,s),t.ruleToStopState.set(i,a)}}o(Bk,"createRuleStartAndStopATNStates");function kh(t,e,n){return n instanceof Me?yu(t,e,n.terminalType,n):n instanceof Tt?tS(t,e,n):n instanceof Pt?Yk(t,e,n):n instanceof ct?Jk(t,e,n):n instanceof qe?Kk(t,e,n):n instanceof Nt?zk(t,e,n):n instanceof Ut?Vk(t,e,n):n instanceof qt?Xk(t,e,n):ir(t,e,n)}o(kh,"atom");function Kk(t,e,n){const r=et(t,e,n,{type:qk});Un(t,r);const i=Mr(t,e,r,n,ir(t,e,n));return Ah(t,e,n,i)}o(Kk,"repetition");function zk(t,e,n){const r=et(t,e,n,{type:qk});Un(t,r);const i=Mr(t,e,r,n,ir(t,e,n)),s=yu(t,e,n.separator,n);return Ah(t,e,n,i,s)}o(zk,"repetitionSep");function Vk(t,e,n){const r=et(t,e,n,{type:Uk});Un(t,r);const i=Mr(t,e,r,n,ir(t,e,n));return Sh(t,e,n,i)}o(Vk,"repetitionMandatory");function Xk(t,e,n){const r=et(t,e,n,{type:Uk});Un(t,r);const i=Mr(t,e,r,n,ir(t,e,n)),s=yu(t,e,n.separator,n);return Sh(t,e,n,i,s)}o(Xk,"repetitionMandatorySep");function Yk(t,e,n){const r=et(t,e,n,{type:Yn});Un(t,r);const i=J(n.definition,a=>kh(t,e,a));return Mr(t,e,r,n,...i)}o(Yk,"alternation");function Jk(t,e,n){const r=et(t,e,n,{type:Yn});Un(t,r);const i=Mr(t,e,r,n,ir(t,e,n));return Qk(t,e,n,i)}o(Jk,"option");function ir(t,e,n){const r=jt(J(n.definition,i=>kh(t,e,i)),i=>i!==void 0);return r.length===1?r[0]:r.length===0?void 0:eS(t,r)}o(ir,"block");function Sh(t,e,n,r,i){const s=r.left,a=r.right,c=et(t,e,n,{type:KL});Un(t,c);const l=et(t,e,n,{type:Gk});return s.loopback=c,l.loopback=c,t.decisionMap[Ar(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",n.idx)]=c,ze(a,c),i===void 0?(ze(c,s),ze(c,l)):(ze(c,l),ze(c,i.left),ze(i.right,s)),{left:s,right:l}}o(Sh,"plus");function Ah(t,e,n,r,i){const s=r.left,a=r.right,c=et(t,e,n,{type:BL});Un(t,c);const l=et(t,e,n,{type:Gk}),u=et(t,e,n,{type:HL});return c.loopback=u,l.loopback=u,ze(c,s),ze(c,l),ze(a,u),i!==void 0?(ze(u,l),ze(u,i.left),ze(i.right,s)):ze(u,c),t.decisionMap[Ar(e,i?"RepetitionWithSeparator":"Repetition",n.idx)]=c,{left:c,right:l}}o(Ah,"star");function Qk(t,e,n,r){const i=r.left,s=r.right;return ze(i,s),t.decisionMap[Ar(e,"Option",n.idx)]=i,r}o(Qk,"optional");function Un(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}o(Un,"defineDecisionState");function Mr(t,e,n,r,...i){const s=et(t,e,r,{type:WL,start:n});n.end=s;for(const c of i)c!==void 0?(ze(n,c.left),ze(c.right,s)):ze(n,s);const a={left:n,right:s};return t.decisionMap[Ar(e,Zk(r),r.idx)]=n,a}o(Mr,"makeAlts");function Zk(t){if(t instanceof Pt)return"Alternation";if(t instanceof ct)return"Option";if(t instanceof qe)return"Repetition";if(t instanceof Nt)return"RepetitionWithSeparator";if(t instanceof Ut)return"RepetitionMandatory";if(t instanceof qt)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}o(Zk,"getProdType");function eS(t,e){const n=e.length;for(let s=0;s<n-1;s++){const a=e[s];let c;a.left.transitions.length===1&&(c=a.left.transitions[0]);const l=c instanceof bh,u=c,d=e[s+1].left;a.left.type===Yn&&a.right.type===Yn&&c!==void 0&&(l&&u.followState===a.right||c.target===a.right)?(l?u.followState=d:c.target=d,rS(t,a.right)):ze(a.right,d)}const r=e[0],i=e[n-1];return{left:r.left,right:i.right}}o(eS,"makeBlock");function yu(t,e,n,r){const i=et(t,e,r,{type:Yn}),s=et(t,e,r,{type:Yn});return Tu(i,new _h(s,n)),{left:i,right:s}}o(yu,"tokenRef");function tS(t,e,n){const r=n.referencedRule,i=t.ruleToStartState.get(r),s=et(t,e,n,{type:Yn}),a=et(t,e,n,{type:Yn}),c=new bh(i,r,a);return Tu(s,c),{left:s,right:a}}o(tS,"ruleRef");function nS(t,e,n){const r=t.ruleToStartState.get(e);ze(r,n.left);const i=t.ruleToStopState.get(e);return ze(n.right,i),{left:r,right:i}}o(nS,"buildRuleHandle");function ze(t,e){const n=new Wk(e);Tu(t,n)}o(ze,"epsilon");function et(t,e,n,r){const i=Object.assign({atn:t,production:n,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},r);return t.states.push(i),i}o(et,"newState");function Tu(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}o(Tu,"addTransition");function rS(t,e){t.states.splice(t.states.indexOf(e),1)}o(rS,"removeState");var Il={},mo,Pd=(mo=class{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const n=wh(e);n in this.map||(this.map[n]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return J(this.configs,e=>e.alt)}get key(){let e="";for(const n in this.map)e+=n+":";return e}},o(mo,"ATNConfigSet"),mo);function wh(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map(n=>n.stateNumber.toString()).join("_")}`}o(wh,"getATNConfigKey");function iS(t,e){const n={};return r=>{const i=r.toString();let s=n[i];return s!==void 0||(s={atnStartState:t,decision:e,states:{}},n[i]=s),s}}o(iS,"createDFACache");var go,sS=(go=class{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,n){this.predicates[e]=n}toString(){let e="";const n=this.predicates.length;for(let r=0;r<n;r++)e+=this.predicates[r]===!0?"1":"0";return e}},o(go,"PredicateSet"),go),Wm=new sS,vo,zL=(vo=class extends vh{constructor(e){var n;super(),this.logging=(n=e==null?void 0:e.logging)!==null&&n!==void 0?n:r=>console.log(r)}initialize(e){this.atn=Hk(e.rules),this.dfas=aS(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:n,rule:r,hasPredicates:i,dynamicTokensEnabled:s}=e,a=this.dfas,c=this.logging,l=Ar(r,"Alternation",n),d=this.atn.decisionMap[l].decision,f=J(Rd({maxLookahead:1,occurrence:n,prodType:"Alternation",rule:r}),p=>J(p,h=>h[0]));if(Id(f,!1)&&!s){const p=yt(f,(h,R,k)=>(ae(R,A=>{A&&(h[A.tokenTypeIdx]=k,ae(A.categoryMatches,w=>{h[w]=k}))}),h),{});return i?function(h){var R;const k=this.LA(1),A=p[k.tokenTypeIdx];if(h!==void 0&&A!==void 0){const w=(R=h[A])===null||R===void 0?void 0:R.GATE;if(w!==void 0&&w.call(this)===!1)return}return A}:function(){const h=this.LA(1);return p[h.tokenTypeIdx]}}else return i?function(p){const h=new sS,R=p===void 0?0:p.length;for(let A=0;A<R;A++){const w=p==null?void 0:p[A].GATE;h.set(A,w===void 0||w.call(this))}const k=Hc.call(this,a,d,h,c);return typeof k=="number"?k:void 0}:function(){const p=Hc.call(this,a,d,Wm,c);return typeof p=="number"?p:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:n,rule:r,prodType:i,dynamicTokensEnabled:s}=e,a=this.dfas,c=this.logging,l=Ar(r,i,n),d=this.atn.decisionMap[l].decision,f=J(Rd({maxLookahead:1,occurrence:n,prodType:i,rule:r}),p=>J(p,h=>h[0]));if(Id(f)&&f[0][0]&&!s){const p=f[0],h=Vt(p);if(h.length===1&&Pe(h[0].categoryMatches)){const k=h[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===k}}else{const R=yt(h,(k,A)=>(A!==void 0&&(k[A.tokenTypeIdx]=!0,ae(A.categoryMatches,w=>{k[w]=!0})),k),{});return function(){const k=this.LA(1);return R[k.tokenTypeIdx]===!0}}}return function(){const p=Hc.call(this,a,d,Wm,c);return typeof p=="object"?!1:p===0}}},o(vo,"LLStarLookaheadStrategy"),vo);function Id(t,e=!0){const n=new Set;for(const r of t){const i=new Set;for(const s of r){if(s===void 0){if(e)break;return!1}const a=[s.tokenTypeIdx].concat(s.categoryMatches);for(const c of a)if(n.has(c)){if(!i.has(c))return!1}else n.add(c),i.add(c)}}return!0}o(Id,"isLL1Sequence");function aS(t){const e=t.decisionStates.length,n=Array(e);for(let r=0;r<e;r++)n[r]=iS(t.decisionStates[r],r);return n}o(aS,"initATNSimulator");function Hc(t,e,n,r){const i=t[e](n);let s=i.start;if(s===void 0){const c=vS(i.atnStartState);s=Eh(i,Ch(c)),i.start=s}return oS.apply(this,[i,s,n,r])}o(Hc,"adaptivePredict");function oS(t,e,n,r){let i=e,s=1;const a=[];let c=this.LA(s++);for(;;){let l=hS(i,c);if(l===void 0&&(l=cS.apply(this,[t,i,c,s,n,r])),l===Il)return fS(a,i,c);if(l.isAcceptState===!0)return l.prediction;i=l,a.push(c),c=this.LA(s++)}}o(oS,"performLookahead");function cS(t,e,n,r,i,s){const a=pS(e.configs,n,i);if(a.size===0)return Dd(t,e,n,Il),Il;let c=Ch(a);const l=gS(a,i);if(l!==void 0)c.isAcceptState=!0,c.prediction=l,c.configs.uniqueAlt=l;else if(_S(a)){const u=VO(a.alts);c.isAcceptState=!0,c.prediction=u,c.configs.uniqueAlt=u,lS.apply(this,[t,r,a.alts,s])}return c=Dd(t,e,n,c),c}o(cS,"computeLookaheadTarget");function lS(t,e,n,r){const i=[];for(let u=1;u<=e;u++)i.push(this.LA(u).tokenType);const s=t.atnStartState,a=s.rule,c=s.production,l=uS({topLevelRule:a,ambiguityIndices:n,production:c,prefixPath:i});r(l)}o(lS,"reportLookaheadAmbiguity");function uS(t){const e=J(t.prefixPath,i=>yr(i)).join(", "),n=t.production.idx===0?"":t.production.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${dS(t.production)}${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r}o(uS,"buildAmbiguityError");function dS(t){if(t instanceof Tt)return"SUBRULE";if(t instanceof ct)return"OPTION";if(t instanceof Pt)return"OR";if(t instanceof Ut)return"AT_LEAST_ONE";if(t instanceof qt)return"AT_LEAST_ONE_SEP";if(t instanceof Nt)return"MANY_SEP";if(t instanceof qe)return"MANY";if(t instanceof Me)return"CONSUME";throw Error("non exhaustive match")}o(dS,"getProductionDslName");function fS(t,e,n){const r=Mt(e.configs.elements,s=>s.state.transitions),i=sL(r.filter(s=>s instanceof _h).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:n,possibleTokenTypes:i,tokenPath:t}}o(fS,"buildAdaptivePredictError");function hS(t,e){return t.edges[e.tokenTypeIdx]}o(hS,"getExistingTargetState");function pS(t,e,n){const r=new Pd,i=[];for(const a of t.elements){if(n.is(a.alt)===!1)continue;if(a.state.type===bc){i.push(a);continue}const c=a.state.transitions.length;for(let l=0;l<c;l++){const u=a.state.transitions[l],d=mS(u,e);d!==void 0&&r.add({state:d,alt:a.alt,stack:a.stack})}}let s;if(i.length===0&&r.size===1&&(s=r),s===void 0){s=new Pd;for(const a of r.elements)os(a,s)}if(i.length>0&&!TS(s))for(const a of i)s.add(a);return s}o(pS,"computeReachSet");function mS(t,e){if(t instanceof _h&&uh(e,t.tokenType))return t.target}o(mS,"getReachableTarget");function gS(t,e){let n;for(const r of t.elements)if(e.is(r.alt)===!0){if(n===void 0)n=r.alt;else if(n!==r.alt)return}return n}o(gS,"getUniqueAlt");function Ch(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}o(Ch,"newDFAState");function Dd(t,e,n,r){return r=Eh(t,r),e.edges[n.tokenTypeIdx]=r,r}o(Dd,"addDFAEdge");function Eh(t,e){if(e===Il)return e;const n=e.configs.key,r=t.states[n];return r!==void 0?r:(e.configs.finalize(),t.states[n]=e,e)}o(Eh,"addDFAState");function vS(t){const e=new Pd,n=t.transitions.length;for(let r=0;r<n;r++){const s={state:t.transitions[r].target,alt:r,stack:[]};os(s,e)}return e}o(vS,"computeStartState");function os(t,e){const n=t.state;if(n.type===bc){if(t.stack.length>0){const i=[...t.stack],a={state:i.pop(),alt:t.alt,stack:i};os(a,e)}else e.add(t);return}n.epsilonOnlyTransitions||e.add(t);const r=n.transitions.length;for(let i=0;i<r;i++){const s=n.transitions[i],a=yS(t,s);a!==void 0&&os(a,e)}}o(os,"closure");function yS(t,e){if(e instanceof Wk)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof bh){const n=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:n}}}o(yS,"getEpsilonTarget");function TS(t){for(const e of t.elements)if(e.state.type===bc)return!0;return!1}o(TS,"hasConfigInRuleStopState");function RS(t){for(const e of t.elements)if(e.state.type!==bc)return!1;return!0}o(RS,"allConfigsInRuleStopStates");function _S(t){if(RS(t))return!0;const e=bS(t.elements);return kS(e)&&!SS(e)}o(_S,"hasConflictTerminatingPrediction");function bS(t){const e=new Map;for(const n of t){const r=wh(n,!1);let i=e.get(r);i===void 0&&(i={},e.set(r,i)),i[n.alt]=!0}return e}o(bS,"getConflictingAltSets");function kS(t){for(const e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}o(kS,"hasConflictingAltSet");function SS(t){for(const e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}o(SS,"hasStateAssociatedWithOneAlt");var yo,VL=(yo=class{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){return this.rootNode=new YL(e),this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const n=new wS;return n.grammarSource=e,n.root=this.rootNode,this.current.content.push(n),this.nodeStack.push(n),n}buildLeafNode(e,n){const r=new Hm(e.startOffset,e.image.length,Yc(e),e.tokenType,!1);return r.grammarSource=n,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){const n=e.container;if(n){const r=n.content.indexOf(e);r>=0&&n.content.splice(r,1)}}construct(e){const n=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=n;const r=this.nodeStack.pop();(r==null?void 0:r.content.length)===0&&this.removeNode(r)}addHiddenTokens(e){for(const n of e){const r=new Hm(n.startOffset,n.image.length,Yc(n),n.tokenType,!0);r.root=this.rootNode,this.addHiddenToken(this.rootNode,r)}}addHiddenToken(e,n){const{offset:r,end:i}=n;for(let s=0;s<e.content.length;s++){const a=e.content[s],{offset:c,end:l}=a;if(wr(a)&&r>c&&i<l){this.addHiddenToken(a,n);return}else if(i<=c){e.content.splice(s,0,n);return}}e.content.push(n)}},o(yo,"CstNodeBuilder"),yo),To,AS=(To=class{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,n;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(n=this.container)===null||n===void 0?void 0:n.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},o(To,"AbstractCstNode"),To),Ro,Hm=(Ro=class extends AS{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,n,r,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=n,this._range=r}},o(Ro,"LeafCstNodeImpl"),Ro),_o,wS=(_o=class extends AS{constructor(){super(...arguments),this.content=new XL(this)}get children(){return this.content}get offset(){var e,n;return(n=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&n!==void 0?n:0}get length(){return this.end-this.offset}get end(){var e,n;return(n=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&n!==void 0?n:0}get range(){const e=this.firstNonHiddenNode,n=this.lastNonHiddenNode;if(e&&n){if(this._rangeCache===void 0){const{range:r}=e,{range:i}=n;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}else return{start:$t.create(0,0),end:$t.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const n=this.content[e];if(!n.hidden)return n}return this.content[this.content.length-1]}},o(_o,"CompositeCstNodeImpl"),_o),di,XL=(di=class extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,di.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,n,...r){return this.addParents(r),super.splice(e,n,...r)}addParents(e){for(const n of e)n.container=this.parent}},o(di,"CstNodeContainer"),di),bo,YL=(bo=class extends wS{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}},o(bo,"RootCstNodeImpl"),bo),Od=Symbol("Datatype");function Bc(t){return t.$type===Od}o(Bc,"isDataTypeNode");var Bm="​",CS=o(t=>t.endsWith(Bm)?t:t+Bm,"withRuleSuffix"),ko,ES=(ko=class{constructor(e){this._unorderedGroups=new Map,this.lexer=e.parser.Lexer;const n=this.lexer.definition;this.wrapper=new t$(n,Object.assign(Object.assign({},e.parser.ParserConfig),{errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,n){this.wrapper.wrapOr(e,n)}optional(e,n){this.wrapper.wrapOption(e,n)}many(e,n){this.wrapper.wrapMany(e,n)}atLeastOne(e,n){this.wrapper.wrapAtLeastOne(e,n)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},o(ko,"AbstractLangiumParser"),ko),So,JL=(So=class extends ES{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new VL,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,n){const r=e.fragment?void 0:Jt(e)?Od:tr(e),i=this.wrapper.DEFINE_RULE(CS(e.name),this.startImplementation(r,n).bind(this));return e.entry&&(this.mainRule=i),i}parse(e){this.nodeBuilder.buildRootNode(e);const n=this.lexer.tokenize(e);this.wrapper.input=n.tokens;const r=this.mainRule.call(this.wrapper,{});return this.nodeBuilder.addHiddenTokens(n.hidden),this.unorderedGroups.clear(),{value:r,lexerErrors:n.errors,parserErrors:this.wrapper.errors}}startImplementation(e,n){return r=>{if(!this.isRecording()){const s={$type:e};this.stack.push(s),e===Od&&(s.value="")}let i;try{i=n(r)}catch{i=void 0}return!this.isRecording()&&i===void 0&&(i=this.construct()),i}}consume(e,n,r){const i=this.wrapper.wrapConsume(e,n);if(!this.isRecording()&&!i.isInsertedInRecovery){const s=this.nodeBuilder.buildLeafNode(i,r),{assignment:a,isCrossRef:c}=this.getAssignment(r),l=this.current;if(a){const u=vt(r)?i.image:this.converter.convert(i.image,s);this.assign(a.operator,a.feature,u,s,c)}else if(Bc(l)){let u=i.image;vt(r)||(u=this.converter.convert(u,s).toString()),l.value+=u}}}subrule(e,n,r,i){let s;this.isRecording()||(s=this.nodeBuilder.buildCompositeNode(r));const a=this.wrapper.wrapSubrule(e,n,i);!this.isRecording()&&s&&s.length>0&&this.performSubruleAssignment(a,r,s)}performSubruleAssignment(e,n,r){const{assignment:i,isCrossRef:s}=this.getAssignment(n);if(i)this.assign(i.operator,i.feature,e,r,s);else if(!i){const a=this.current;if(Bc(a))a.value+=e.toString();else{const c=e.$type,l=this.assignWithoutOverride(e,a);c&&(l.$type=c);const u=l;this.stack.pop(),this.stack.push(u)}}}action(e,n){if(!this.isRecording()){let r=this.current;if(!r.$cstNode&&n.feature&&n.operator){r=this.construct(!1);const s=r.$cstNode.feature;this.nodeBuilder.buildCompositeNode(s)}const i={$type:e};this.stack.pop(),this.stack.push(i),n.feature&&n.operator&&this.assign(n.operator,n.feature,r,r.$cstNode,!1)}}construct(e=!0){if(this.isRecording())return;const n=this.current;return av(n),this.nodeBuilder.construct(n),e&&this.stack.pop(),Bc(n)?this.converter.convert(n.value,n.$cstNode):(this.assignMandatoryProperties(n),n)}assignMandatoryProperties(e){const n=this.astReflection.getTypeMetaData(e.$type);for(const r of n.mandatory){const i=e[r.name];r.type==="array"&&!Array.isArray(i)?e[r.name]=[]:r.type==="boolean"&&i===void 0&&(e[r.name]=!1)}}getAssignment(e){if(!this.assignmentMap.has(e)){const n=Xe(e,Ye);this.assignmentMap.set(e,{assignment:n,isCrossRef:n?gn(n.terminal):!1})}return this.assignmentMap.get(e)}assign(e,n,r,i,s){const a=this.current;let c;switch(s&&typeof r=="string"?c=this.linker.buildReference(a,n,i,r):c=r,e){case"=":{a[n]=c;break}case"?=":{a[n]=!0;break}case"+=":Array.isArray(a[n])||(a[n]=[]),a[n].push(c)}}assignWithoutOverride(e,n){for(const[r,i]of Object.entries(n)){const s=e[r];s===void 0?e[r]=i:Array.isArray(s)&&Array.isArray(i)&&(i.push(...s),e[r]=i)}return e}get definitionErrors(){return this.wrapper.definitionErrors}},o(So,"LangiumParser"),So),Ao,QL=(Ao=class{buildMismatchTokenMessage(e){return Vr.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Vr.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Vr.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Vr.buildEarlyExitMessage(e)}},o(Ao,"AbstractParserErrorMessageProvider"),Ao),wo,NS=(wo=class extends QL{buildMismatchTokenMessage({expected:e,actual:n}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${n.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},o(wo,"LangiumParserErrorMessageProvider"),wo),Co,ZL=(Co=class extends ES{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const n=this.lexer.tokenize(e);return this.tokens=n.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,n){const r=this.wrapper.DEFINE_RULE(CS(e.name),this.startImplementation(n).bind(this));return e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return n=>{const r=this.keepStackSize();try{e(n)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,n,r){this.wrapper.wrapConsume(e,n),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,n,r,i){this.before(r),this.wrapper.wrapSubrule(e,n,i),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const n=this.elementStack.lastIndexOf(e);n>=0&&this.elementStack.splice(n)}}get currIdx(){return this.wrapper.currIdx}},o(Co,"LangiumCompletionParser"),Co),e$={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new NS},Eo,t$=(Eo=class extends qL{constructor(e,n){const r=n&&"maxLookahead"in n;super(e,Object.assign(Object.assign(Object.assign({},e$),{lookaheadStrategy:r?new vh({maxLookahead:n.maxLookahead}):new zL}),n))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,n){return this.RULE(e,n)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,n){return this.consume(e,n)}wrapSubrule(e,n,r){return this.subrule(e,n,{ARGS:[r]})}wrapOr(e,n){this.or(e,n)}wrapOption(e,n){this.option(e,n)}wrapMany(e,n){this.many(e,n)}wrapAtLeastOne(e,n){this.atLeastOne(e,n)}},o(Eo,"ChevrotainWrapper"),Eo),No,PS=(No=class extends Error{constructor(e,n){super(e?`${n} at ${e.range.start.line}:${e.range.start.character}`:n)}},o(No,"ErrorWithLocation"),No);function Ru(t){throw new Error("Error! The input value was not handled.")}o(Ru,"assertUnreachable");function Nh(t,e,n){return IS({parser:e,tokens:n,rules:new Map,ruleNames:new Map},t),e}o(Nh,"createParser");function IS(t,e){const n=Vl(e,!1),r=Ne(e.rules).filter(le).filter(i=>n.has(i));for(const i of r){const s=Object.assign(Object.assign({},t),{consume:1,optional:1,subrule:1,many:1,or:1});s.rules.set(i.name,t.parser.rule(i,Jn(s,i.definition)))}}o(IS,"buildRules");function Jn(t,e,n=!1){let r;if(vt(e))r=xS(t,e);else if(tt(e))r=DS(t,e);else if(Ye(e))r=Jn(t,e.terminal);else if(gn(e))r=Ph(t,e);else if(nt(e))r=OS(t,e);else if(Fn(e))r=$S(t,e);else if(xn(e))r=MS(t,e);else if(At(e))r=FS(t,e);else throw new PS(e.$cstNode,`Unexpected element type: ${e.$type}`);return Ih(t,n?void 0:cs(e),r,e.cardinality)}o(Jn,"buildElement");function DS(t,e){const n=tr(e);return()=>t.parser.action(n,e)}o(DS,"buildAction");function OS(t,e){const n=e.rule.ref;if(le(n)){const r=t.subrule++,i=e.arguments.length>0?LS(n,e.arguments):()=>({});return s=>t.parser.subrule(r,Dh(t,n),e,i(s))}else if(Ke(n)){const r=t.consume++,i=Dl(t,n.name);return()=>t.parser.consume(r,i,e)}else if(n)Ru();else throw new PS(e.$cstNode,`Undefined rule type: ${e.$type}`)}o(OS,"buildRuleCall");function LS(t,e){const n=e.map(r=>fn(r.value));return r=>{const i={};for(let s=0;s<n.length;s++){const a=t.parameters[s],c=n[s];i[a.name]=c(r)}return i}}o(LS,"buildRuleCallPredicate");function fn(t){if(Sg(t)){const e=fn(t.left),n=fn(t.right);return r=>e(r)||n(r)}else if(bg(t)){const e=fn(t.left),n=fn(t.right);return r=>e(r)&&n(r)}else if(Ng(t)){const e=fn(t.value);return n=>!e(n)}else if(Fl(t)){const e=t.parameter.ref.name;return n=>n!==void 0&&n[e]===!0}else if(Cg(t)){const e=!!t.true;return()=>e}Ru()}o(fn,"buildPredicate");function $S(t,e){if(e.elements.length===1)return Jn(t,e.elements[0]);{const n=[];for(const i of e.elements){const s={ALT:Jn(t,i,!0)},a=cs(i);a&&(s.GATE=fn(a)),n.push(s)}const r=t.or++;return i=>t.parser.alternatives(r,n.map(s=>{const a={ALT:()=>s.ALT(i)},c=s.GATE;return c&&(a.GATE=()=>c(i)),a}))}}o($S,"buildAlternatives");function MS(t,e){if(e.elements.length===1)return Jn(t,e.elements[0]);const n=[];for(const c of e.elements){const l={ALT:Jn(t,c,!0)},u=cs(c);u&&(l.GATE=fn(u)),n.push(l)}const r=t.or++,i=o((c,l)=>{const u=l.getRuleStack().join("-");return`uGroup_${c}_${u}`},"idFunc"),s=o(c=>t.parser.alternatives(r,n.map((l,u)=>{const d={ALT:()=>!0},f=t.parser;d.ALT=()=>{if(l.ALT(c),!f.isRecording()){const h=i(r,f);f.unorderedGroups.get(h)||f.unorderedGroups.set(h,[]);const R=f.unorderedGroups.get(h);typeof(R==null?void 0:R[u])>"u"&&(R[u]=!0)}};const p=l.GATE;return p?d.GATE=()=>p(c):d.GATE=()=>{const h=f.unorderedGroups.get(i(r,f));return!(h!=null&&h[u])},d})),"alternatives"),a=Ih(t,cs(e),s,"*");return c=>{a(c),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(r,t.parser))}}o(MS,"buildUnorderedGroup");function FS(t,e){const n=e.elements.map(r=>Jn(t,r));return r=>n.forEach(i=>i(r))}o(FS,"buildGroup");function cs(t){if(At(t))return t.guardCondition}o(cs,"getGuardCondition");function Ph(t,e,n=e.terminal){if(n)if(nt(n)&&le(n.rule.ref)){const r=t.subrule++;return i=>t.parser.subrule(r,Dh(t,n.rule.ref),e,i)}else if(nt(n)&&Ke(n.rule.ref)){const r=t.consume++,i=Dl(t,n.rule.ref.name);return()=>t.parser.consume(r,i,e)}else if(vt(n)){const r=t.consume++,i=Dl(t,n.value);return()=>t.parser.consume(r,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const r=Jl(e.type.ref),i=r==null?void 0:r.terminal;if(!i)throw new Error("Could not find name assignment for type: "+tr(e.type.ref));return Ph(t,e,i)}}o(Ph,"buildCrossReference");function xS(t,e){const n=t.consume++,r=t.tokens[e.value];if(!r)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(n,r,e)}o(xS,"buildKeyword");function Ih(t,e,n,r){const i=e&&fn(e);if(!r)if(i){const s=t.or++;return a=>t.parser.alternatives(s,[{ALT:()=>n(a),GATE:()=>i(a)},{ALT:Nd(),GATE:()=>!i(a)}])}else return n;if(r==="*"){const s=t.many++;return a=>t.parser.many(s,{DEF:()=>n(a),GATE:i?()=>i(a):void 0})}else if(r==="+"){const s=t.many++;if(i){const a=t.or++;return c=>t.parser.alternatives(a,[{ALT:()=>t.parser.atLeastOne(s,{DEF:()=>n(c)}),GATE:()=>i(c)},{ALT:Nd(),GATE:()=>!i(c)}])}else return a=>t.parser.atLeastOne(s,{DEF:()=>n(a)})}else if(r==="?"){const s=t.optional++;return a=>t.parser.optional(s,{DEF:()=>n(a),GATE:i?()=>i(a):void 0})}else Ru()}o(Ih,"wrap");function Dh(t,e){const n=jS(t,e),r=t.rules.get(n);if(!r)throw new Error(`Rule "${n}" not found."`);return r}o(Dh,"getRule");function jS(t,e){if(le(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let n=e,r=n.$container,i=e.$type;for(;!le(r);)(At(r)||Fn(r)||xn(r))&&(i=r.elements.indexOf(n).toString()+":"+i),n=r,r=r.$container;return i=r.name+":"+i,t.ruleNames.set(e,i),i}}o(jS,"getRuleName");function Dl(t,e){const n=t.tokens[e];if(!n)throw new Error(`Token "${e}" not found."`);return n}o(Dl,"getToken");function US(t){const e=t.Grammar,n=t.parser.Lexer,r=new ZL(t);return Nh(e,r,n.definition),r.finalize(),r}o(US,"createCompletionParser");function qS(t){const e=GS(t);return e.finalize(),e}o(qS,"createLangiumParser");function GS(t){const e=t.Grammar,n=t.parser.Lexer,r=new JL(t);return Nh(e,r,n.definition)}o(GS,"prepareLangiumParser");var Po,WS=(Po=class{buildTokens(e,n){const r=Ne(Vl(e,!1)),i=this.buildTerminalTokens(r),s=this.buildKeywordTokens(r,i,n);return i.forEach(a=>{const c=a.PATTERN;typeof c=="object"&&c&&"test"in c&&Yu(c)?s.unshift(a):s.push(a)}),s}buildTerminalTokens(e){return e.filter(Ke).filter(n=>!n.fragment).map(n=>this.buildTerminalToken(n)).toArray()}buildTerminalToken(e){const n=Cr(e),r=n.flags.includes("u")?this.regexPatternFunction(n):n,i={name:e.name,PATTERN:r,LINE_BREAKS:!0};return e.hidden&&(i.GROUP=Yu(n)?St.SKIPPED:"hidden"),i}regexPatternFunction(e){const n=new RegExp(e,e.flags+"y");return(r,i)=>(n.lastIndex=i,n.exec(r))}buildKeywordTokens(e,n,r){return e.filter(le).flatMap(i=>pt(i).filter(vt)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,n,!!(r!=null&&r.caseInsensitive)))}buildKeywordToken(e,n,r){return{name:e.value,PATTERN:this.buildKeywordPattern(e,r),LONGER_ALT:this.findLongerAlt(e,n)}}buildKeywordPattern(e,n){return n?new RegExp(Ov(e.value)):e.value}findLongerAlt(e,n){return n.reduce((r,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&Lv("^"+s.source+"$",e.value)&&r.push(i),r},[])}},o(Po,"DefaultTokenBuilder"),Po),Io,HS=(Io=class{convert(e,n){let r=n.grammarSource;if(gn(r)&&(r=Nf(r)),nt(r)){const i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,n)}return e}runConverter(e,n,r){var i;switch(e.name.toUpperCase()){case"INT":return VS(n);case"STRING":return BS(n);case"ID":return zS(n)}switch((i=cc(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return JS(n);case"boolean":return QS(n);case"bigint":return XS(n);case"date":return YS(n);default:return n}}},o(Io,"DefaultValueConverter"),Io);function BS(t){let e="";for(let n=1;n<t.length-1;n++){const r=t.charAt(n);if(r==="\\"){const i=t.charAt(++n);e+=KS(i)}else e+=r}return e}o(BS,"convertString");function KS(t){switch(t){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return t}}o(KS,"convertEscapeCharacter");function zS(t){return t.charAt(0)==="^"?t.substring(1):t}o(zS,"convertID");function VS(t){return parseInt(t)}o(VS,"convertInt");function XS(t){return BigInt(t)}o(XS,"convertBigint");function YS(t){return new Date(t)}o(YS,"convertDate");function JS(t){return Number(t)}o(JS,"convertNumber");function QS(t){return t.toLowerCase()==="true"}o(QS,"convertBoolean");var n$=_e(Ee(),1),Do,r$=(Do=class{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,n=n$.CancellationToken.None){for(const r of sc(e.parseResult.value))await gt(n),Yd(r).forEach(i=>this.doLink(i,e))}doLink(e,n){const r=e.reference;if(r._ref===void 0)try{const i=this.getCandidate(e);if(Ni(i))r._ref=i;else if(r._nodeDescription=i,this.langiumDocuments().hasDocument(i.documentUri)){const s=this.loadAstNode(i);r._ref=s??this.createLinkingError(e,i)}}catch(i){r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${i}`})}n.references.push(r)}unlink(e){for(const n of e.references)delete n._ref,delete n._nodeDescription;e.references=[]}getCandidate(e){const r=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return r??this.createLinkingError(e)}buildReference(e,n,r,i){const s=this,a={$refNode:r,$refText:i,get ref(){var c;if(ht(this._ref))return this._ref;if(og(this._nodeDescription)){const l=s.loadAstNode(this._nodeDescription);this._ref=l??s.createLinkingError({reference:a,container:e,property:n},this._nodeDescription)}else if(this._ref===void 0){const l=s.getLinkedNode({reference:a,container:e,property:n});if(l.error&&Ce(e).state<Be.ComputedScopes)return;this._ref=(c=l.node)!==null&&c!==void 0?c:l.error,this._nodeDescription=l.descr}return ht(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return Ni(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){try{const n=this.getCandidate(e);if(Ni(n))return{error:n};const r=this.loadAstNode(n);return r?{node:r,descr:n}:{descr:n,error:this.createLinkingError(e,n)}}catch(n){return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`})}}}loadAstNode(e){if(e.node)return e.node;const n=this.langiumDocuments().getOrCreateDocument(e.documentUri);return this.astNodeLocator.getAstNode(n.parseResult.value,e.path)}createLinkingError(e,n){const r=Ce(e.container);r.state<Be.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:n})}},o(Do,"DefaultLinker"),Do);function ZS(t){return typeof t.$comment=="string"}o(ZS,"isAstNodeWithComment");function Ld(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}o(Ld,"isIntermediateReference");var Oo,i$=(Oo=class{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,n){const r=n==null?void 0:n.replacer,i=o((a,c)=>this.replacer(a,c,n),"defaultReplacer");return JSON.stringify(e,r?(a,c)=>r(a,c,i):i,n==null?void 0:n.space)}deserialize(e){const n=JSON.parse(e);return this.linkNode(n,n),n}replacer(e,n,{refText:r,sourceText:i,textRegions:s,comments:a}={}){var c,l,u;if(!this.ignoreProperties.has(e))if(Tr(n)){const d=n.ref,f=r?n.$refText:void 0;return d?{$refText:f,$ref:"#"+(d&&this.astNodeLocator.getAstNodePath(d))}:{$refText:f,$error:(l=(c=n.error)===null||c===void 0?void 0:c.message)!==null&&l!==void 0?l:"Could not resolve reference"}}else{let d;if(s&&ht(n)&&(d=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},n)),(!e||n.$document)&&(d!=null&&d.$textRegion)))try{d.$textRegion.documentURI=Ce(n).uri.toString()}catch{}return i&&!e&&ht(n)&&(d??(d=Object.assign({},n)),d.$sourceText=(u=n.$cstNode)===null||u===void 0?void 0:u.text),a&&ht(n)&&(d??(d=Object.assign({},n)),d.$comment=this.commentProvider.getComment(n)),d??n}}addAstNodeRegionWithAssignmentsTo(e){const n=o(r=>({offset:r.offset,end:r.end,length:r.length,range:r.range}),"createDocumentSegment");if(e.$cstNode){const r=e.$textRegion=n(e.$cstNode),i=r.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const a=lc(e.$cstNode,s).map(n);a.length!==0&&(i[s]=a)}),e}}linkNode(e,n,r,i,s){for(const[c,l]of Object.entries(e))if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=l[u];Ld(d)?l[u]=this.reviveReference(e,c,n,d):ht(d)&&this.linkNode(d,n,e,c,u)}else Ld(l)?e[c]=this.reviveReference(e,c,n,l):ht(l)&&this.linkNode(l,n,e,c);const a=e;a.$container=r,a.$containerProperty=i,a.$containerIndex=s}reviveReference(e,n,r,i){let s=i.$refText;if(i.$ref){const a=this.getRefNode(r,i.$ref);return s||(s=this.nameProvider.getName(a)),{$refText:s??"",ref:a}}else if(i.$error){const a={$refText:s??""};return a.error={container:e,property:n,message:i.$error,reference:a},a}else return}getRefNode(e,n){return this.astNodeLocator.getAstNode(e,n.substring(1))}},o(Oo,"DefaultJsonSerializer"),Oo),Lo,s$=(Lo=class{register(e){if(!this.singleton&&!this.map){this.singleton=e;return}if(!this.map&&(this.map={},this.singleton)){for(const n of this.singleton.LanguageMetaData.fileExtensions)this.map[n]=this.singleton;this.singleton=void 0}for(const n of e.LanguageMetaData.fileExtensions)this.map[n]!==void 0&&this.map[n]!==e&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${e.LanguageMetaData.languageId}'.`),this.map[n]=e}getServices(e){if(this.singleton!==void 0)return this.singleton;if(this.map===void 0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const n=je.extname(e),r=this.map[n];if(!r)throw new Error(`The service registry contains no services for the extension '${n}'.`);return r}get all(){return this.singleton!==void 0?[this.singleton]:this.map!==void 0?Object.values(this.map):[]}},o(Lo,"DefaultServiceRegistry"),Lo),a$=_e(Ee(),1),$o,o$=($o=class{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,n,r=Ce(e)){n??(n=this.nameProvider.getName(e));const i=this.astNodeLocator.getAstNodePath(e);if(!n)throw new Error(`Node at path ${i} has no name.`);let s;const a=o(()=>{var c;return s??(s=Kt((c=this.nameProvider.getNameNode(e))!==null&&c!==void 0?c:e.$cstNode))},"nameSegmentGetter");return{node:e,name:n,get nameSegment(){return a()},selectionSegment:Kt(e.$cstNode),type:e.$type,documentUri:r.uri,path:i}}},o($o,"DefaultAstNodeDescriptionProvider"),$o),Mo,c$=(Mo=class{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,n=a$.CancellationToken.None){const r=[],i=e.parseResult.value;for(const s of sc(i))await gt(n),Yd(s).filter(a=>!Ni(a)).forEach(a=>{const c=this.createDescription(a);c&&r.push(c)});return r}createDescription(e){const n=e.reference.$nodeDescription,r=e.reference.$refNode;if(!n||!r)return;const i=Ce(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:n.documentUri,targetPath:n.path,segment:Kt(r),local:je.equals(n.documentUri,i)}}},o(Mo,"DefaultReferenceDescriptionProvider"),Mo),Fo,l$=(Fo=class{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const n=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return n+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:n}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return n!==void 0?e+this.indexSeparator+n:e}getAstNode(e,n){return n.split(this.segmentSeparator).reduce((i,s)=>{if(!i||s.length===0)return i;const a=s.indexOf(this.indexSeparator);if(a>0){const c=s.substring(0,a),l=parseInt(s.substring(a+1)),u=i[c];return u==null?void 0:u[l]}return i[s]},e)}},o(Fo,"DefaultAstNodeLocator"),Fo),u$=_e(rt(),1),xo,d$=(xo=class{constructor(e){this.settings={},this.workspaceConfig=!1,this.initialized=!1,this.serviceRegistry=e.ServiceRegistry,this.connection=e.lsp.Connection,e.lsp.LanguageServer.onInitialize(n=>{var r,i;this.workspaceConfig=(i=(r=n.capabilities.workspace)===null||r===void 0?void 0:r.configuration)!==null&&i!==void 0?i:!1}),e.lsp.LanguageServer.onInitialized(n=>{var r;const i=this.serviceRegistry.all;(r=e.lsp.Connection)===null||r===void 0||r.client.register(u$.DidChangeConfigurationNotification.type,{section:i.map(s=>this.toSectionName(s.LanguageMetaData.languageId))})})}async initialize(){if(this.workspaceConfig&&this.connection){const n=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),r=await this.connection.workspace.getConfiguration(n);n.forEach((i,s)=>{this.updateSectionConfiguration(i.section,r[s])})}this.initialized=!0}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(n=>{this.updateSectionConfiguration(n,e.settings[n])})}updateSectionConfiguration(e,n){this.settings[e]=n}async getConfiguration(e,n){this.initialized||await this.initialize();const r=this.toSectionName(e);if(this.settings[r])return this.settings[r][n]}toSectionName(e){return`${e}`}},o(xo,"DefaultConfigurationProvider"),xo),Ic=_e(Ee(),1),jo,f$=(jo=class{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new dt,this.buildState=new Map,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,n={},r=Ic.CancellationToken.None){var i,s;for(const a of e){const c=a.uri.toString();if(a.state===Be.Validated){if(typeof n.validation=="boolean"&&n.validation)a.state=Be.IndexedReferences,a.diagnostics=void 0,this.buildState.delete(c);else if(typeof n.validation=="object"){const l=this.buildState.get(c),u=(i=l==null?void 0:l.result)===null||i===void 0?void 0:i.validationChecks;if(u){const f=((s=n.validation.categories)!==null&&s!==void 0?s:Di.all).filter(p=>!u.includes(p));f.length>0&&(this.buildState.set(c,{completed:!1,options:{validation:Object.assign(Object.assign({},n.validation),{categories:f})},result:l.result}),a.state=Be.IndexedReferences)}}}else this.buildState.delete(c)}await this.buildDocuments(e,n,r)}async update(e,n,r=Ic.CancellationToken.None){for(const a of n)this.langiumDocuments.deleteDocument(a),this.buildState.delete(a.toString());this.indexManager.remove(n);for(const a of e)this.langiumDocuments.invalidateDocument(a)||this.langiumDocuments.getOrCreateDocument(a),this.buildState.delete(a.toString());const i=Ne(e).concat(n).map(a=>a.toString()).toSet();this.langiumDocuments.all.filter(a=>!i.has(a.uri.toString())&&this.shouldRelink(a,i)).forEach(a=>{this.serviceRegistry.getServices(a.uri).references.Linker.unlink(a),a.state=Math.min(a.state,Be.ComputedScopes),a.diagnostics=void 0});for(const a of this.updateListeners)a(e,n);await gt(r);const s=this.langiumDocuments.all.filter(a=>{var c;return a.state<Be.Linked||!(!((c=this.buildState.get(a.uri.toString()))===null||c===void 0)&&c.completed)}).toArray();await this.buildDocuments(s,this.updateBuildOptions,r)}shouldRelink(e,n){return e.references.some(r=>r.error!==void 0)?!0:this.indexManager.isAffected(e,n)}onUpdate(e){return this.updateListeners.push(e),Ic.Disposable.create(()=>{const n=this.updateListeners.indexOf(e);n>=0&&this.updateListeners.splice(n,1)})}async buildDocuments(e,n,r){this.prepareBuild(e,n),await this.runCancelable(e,Be.Parsed,r,s=>{this.langiumDocumentFactory.update(s)}),await this.runCancelable(e,Be.IndexedContent,r,s=>this.indexManager.updateContent(s,r)),await this.runCancelable(e,Be.ComputedScopes,r,async s=>{const a=this.serviceRegistry.getServices(s.uri).references.ScopeComputation;s.precomputedScopes=await a.computeLocalScopes(s,r)}),await this.runCancelable(e,Be.Linked,r,s=>this.serviceRegistry.getServices(s.uri).references.Linker.link(s,r)),await this.runCancelable(e,Be.IndexedReferences,r,s=>this.indexManager.updateReferences(s,r));const i=e.filter(s=>this.shouldValidate(s));await this.runCancelable(i,Be.Validated,r,s=>this.validate(s,r));for(const s of e){const a=this.buildState.get(s.uri.toString());a&&(a.completed=!0)}}prepareBuild(e,n){for(const r of e){const i=r.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:n,result:s==null?void 0:s.result})}}async runCancelable(e,n,r,i){const s=e.filter(a=>a.state<n);for(const a of s)await gt(r),await i(a),a.state=n;await this.notifyBuildPhase(s,n,r)}onBuildPhase(e,n){return this.buildPhaseListeners.add(e,n),Ic.Disposable.create(()=>{this.buildPhaseListeners.delete(e,n)})}async notifyBuildPhase(e,n,r){if(e.length===0)return;const i=this.buildPhaseListeners.get(n);for(const s of i)await gt(r),await s(e,r)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,n){var r,i;const s=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,c=typeof a=="object"?a:void 0,l=await s.validateDocument(e,c,n);e.diagnostics?e.diagnostics.push(...l):e.diagnostics=l;const u=this.buildState.get(e.uri.toString());if(u){(r=u.result)!==null&&r!==void 0||(u.result={});const d=(i=c==null?void 0:c.categories)!==null&&i!==void 0?i:Di.all;u.result.validationChecks?u.result.validationChecks.push(...d):u.result.validationChecks=[...d]}}getBuildOptions(e){var n,r;return(r=(n=this.buildState.get(e.uri.toString()))===null||n===void 0?void 0:n.options)!==null&&r!==void 0?r:{}}},o(jo,"DefaultDocumentBuilder"),jo),Km=_e(Ee(),1),Uo,h$=(Uo=class{constructor(e){this.simpleIndex=new Map,this.simpleTypeIndex=new zw,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,n){const r=Ce(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(a=>{je.equals(a.targetUri,r)&&a.targetPath===n&&i.push(a)})}),Ne(i)}allElements(e,n){let r=Ne(this.simpleIndex.keys());return n&&(r=r.filter(i=>!n||n.has(i))),r.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,n){var r;return n?this.simpleTypeIndex.get(e,n,()=>{var s;return((s=this.simpleIndex.get(e))!==null&&s!==void 0?s:[]).filter(c=>this.astReflection.isSubtype(c.type,n))}):(r=this.simpleIndex.get(e))!==null&&r!==void 0?r:[]}remove(e){for(const n of e){const r=n.toString();this.simpleIndex.delete(r),this.simpleTypeIndex.clear(r),this.referenceIndex.delete(r)}}async updateContent(e,n=Km.CancellationToken.None){const i=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,n);for(const a of i)a.node=void 0;const s=e.uri.toString();this.simpleIndex.set(s,i),this.simpleTypeIndex.clear(s)}async updateReferences(e,n=Km.CancellationToken.None){const i=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,n);this.referenceIndex.set(e.uri.toString(),i)}isAffected(e,n){const r=this.referenceIndex.get(e.uri.toString());return r?r.some(i=>!i.local&&n.has(i.targetUri.toString())):!1}},o(Uo,"DefaultIndexManager"),Uo),p$=_e(Ee(),1),qo,m$=(qo=class{constructor(e){this.initialBuildOptions={},this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.MutexLock,e.lsp.LanguageServer.onInitialize(n=>{var r;this.folders=(r=n.workspaceFolders)!==null&&r!==void 0?r:void 0}),e.lsp.LanguageServer.onInitialized(n=>{this.mutex.lock(r=>{var i;return this.initializeWorkspace((i=this.folders)!==null&&i!==void 0?i:[],r)})})}async initializeWorkspace(e,n=p$.CancellationToken.None){const r=this.serviceRegistry.all.flatMap(a=>a.LanguageMetaData.fileExtensions),i=[],s=o(a=>{i.push(a),this.langiumDocuments.hasDocument(a.uri)||this.langiumDocuments.addDocument(a)},"collector");await this.loadAdditionalDocuments(e,s),await Promise.all(e.map(a=>[a,this.getRootFolder(a)]).map(async a=>this.traverseFolder(...a,r,s))),await gt(n),await this.documentBuilder.build(i,this.initialBuildOptions,n)}loadAdditionalDocuments(e,n){return Promise.resolve()}getRootFolder(e){return ti.parse(e.uri)}async traverseFolder(e,n,r,i){const s=await this.fileSystemProvider.readDirectory(n);await Promise.all(s.map(async a=>{if(this.includeEntry(e,a,r)){if(a.isDirectory)await this.traverseFolder(e,a.uri,r,i);else if(a.isFile){const c=this.langiumDocuments.getOrCreateDocument(a.uri);i(c)}}}))}includeEntry(e,n,r){const i=je.basename(n.uri);if(i.startsWith("."))return!1;if(n.isDirectory)return i!=="node_modules"&&i!=="out";if(n.isFile){const s=je.extname(n.uri);return r.includes(s)}return!1}},o(qo,"DefaultWorkspaceManager"),qo),Go,eA=(Go=class{constructor(e){const n=e.parser.TokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(n);const r=$d(n)?Object.values(n):n;this.chevrotainLexer=new St(r,{positionTracking:"full"})}get definition(){return this.tokenTypes}tokenize(e){var n;const r=this.chevrotainLexer.tokenize(e);return{tokens:r.tokens,errors:r.errors,hidden:(n=r.groups.hidden)!==null&&n!==void 0?n:[]}}toTokenTypeDictionary(e){if($d(e))return e;const n=Oh(e)?Object.values(e.modes).flat():e,r={};return n.forEach(i=>r[i.name]=i),r}},o(Go,"DefaultLexer"),Go);function tA(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}o(tA,"isTokenTypeArray");function Oh(t){return t&&"modes"in t&&"defaultMode"in t}o(Oh,"isIMultiModeLexerDefinition");function $d(t){return!tA(t)&&!Oh(t)}o($d,"isTokenTypeDictionary");var ke=_e(Ee(),1);function nA(t,e,n){let r,i;typeof t=="string"?(i=e,r=n):(i=t.range.start,r=e),i||(i=ke.Position.create(0,0));const s=Lh(t),a=_u(r),c=iA({lines:s,position:i,options:a});return oA({index:0,tokens:c,position:i})}o(nA,"parseJSDoc");function rA(t,e){const n=_u(e),r=Lh(t);if(r.length===0)return!1;const i=r[0],s=r[r.length-1],a=n.start,c=n.end;return!!(a!=null&&a.exec(i))&&!!(c!=null&&c.exec(s))}o(rA,"isJSDoc");function Lh(t){let e="";return typeof t=="string"?e=t:e=t.text,e.split(nf)}o(Lh,"getLines");var zm=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,g$=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function iA(t){var e,n,r;const i=[];let s=t.position.line,a=t.position.character;for(let c=0;c<t.lines.length;c++){const l=c===0,u=c===t.lines.length-1;let d=t.lines[c],f=0;if(l&&t.options.start){const h=(e=t.options.start)===null||e===void 0?void 0:e.exec(d);h&&(f=h.index+h[0].length)}else{const h=(n=t.options.line)===null||n===void 0?void 0:n.exec(d);h&&(f=h.index+h[0].length)}if(u){const h=(r=t.options.end)===null||r===void 0?void 0:r.exec(d);h&&(d=d.substring(0,h.index))}if(d=d.substring(0,aA(d)),Ol(d,0)>=d.length){if(i.length>0){const h=ke.Position.create(s,a);i.push({type:"break",content:"",range:ke.Range.create(h,h)})}}else{zm.lastIndex=f;const h=zm.exec(d);if(h){const R=h[0],k=h[1],A=ke.Position.create(s,a+f),w=ke.Position.create(s,a+f+R.length);i.push({type:"tag",content:k,range:ke.Range.create(A,w)}),f+=R.length,f=Ol(d,f)}if(f<d.length){const R=d.substring(f),k=Array.from(R.matchAll(g$));i.push(...sA(k,R,s,a+f))}}s++,a=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}o(iA,"tokenize");function sA(t,e,n,r){const i=[];if(t.length===0){const s=ke.Position.create(n,r),a=ke.Position.create(n,r+e.length);i.push({type:"text",content:e,range:ke.Range.create(s,a)})}else{let s=0;for(const c of t){const l=c.index,u=e.substring(s,l);u.length>0&&i.push({type:"text",content:e.substring(s,l),range:ke.Range.create(ke.Position.create(n,s+r),ke.Position.create(n,l+r))});let d=u.length+1;const f=c[1];if(i.push({type:"inline-tag",content:f,range:ke.Range.create(ke.Position.create(n,s+d+r),ke.Position.create(n,s+d+f.length+r))}),d+=f.length,c.length===4){d+=c[2].length;const p=c[3];i.push({type:"text",content:p,range:ke.Range.create(ke.Position.create(n,s+d+r),ke.Position.create(n,s+d+p.length+r))})}else i.push({type:"text",content:"",range:ke.Range.create(ke.Position.create(n,s+d+r),ke.Position.create(n,s+d+r))});s=l+c[0].length}const a=e.substring(s);a.length>0&&i.push({type:"text",content:a,range:ke.Range.create(ke.Position.create(n,s+r),ke.Position.create(n,s+r+a.length))})}return i}o(sA,"buildInlineTokens");var v$=/\S/,y$=/\s*$/;function Ol(t,e){const n=t.substring(e).match(v$);return n?e+n.index:t.length}o(Ol,"skipWhitespace");function aA(t){const e=t.match(y$);if(e&&typeof e.index=="number")return e.index}o(aA,"lastCharacter");function oA(t){var e,n,r,i;const s=ke.Position.create(t.position.line,t.position.character);if(t.tokens.length===0)return new Vm([],ke.Range.create(s,s));const a=[];for(;t.index<t.tokens.length;){const u=cA(t,a[a.length-1]);u&&a.push(u)}const c=(n=(e=a[0])===null||e===void 0?void 0:e.range.start)!==null&&n!==void 0?n:s,l=(i=(r=a[a.length-1])===null||r===void 0?void 0:r.range.end)!==null&&i!==void 0?i:s;return new Vm(a,ke.Range.create(c,l))}o(oA,"parseJSDocComment");function cA(t,e){const n=t.tokens[t.index];if(n.type==="tag")return Mh(t,!1);if(n.type==="text"||n.type==="inline-tag")return $h(t);lA(n,e),t.index++}o(cA,"parseJSDocElement");function lA(t,e){if(e){const n=new hA("",t.range);"inlines"in e?e.inlines.push(n):e.content.inlines.push(n)}}o(lA,"appendEmptyLine");function $h(t){let e=t.tokens[t.index];const n=e;let r=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(uA(t)),r=e,e=t.tokens[t.index];return new Md(i,ke.Range.create(n.range.start,r.range.end))}o($h,"parseJSDocText");function uA(t){return t.tokens[t.index].type==="inline-tag"?Mh(t,!0):Fh(t)}o(uA,"parseJSDocInline");function Mh(t,e){const n=t.tokens[t.index++],r=n.content.substring(1),i=t.tokens[t.index];if((i==null?void 0:i.type)==="text")if(e){const s=Fh(t);return new xu(r,new Md([s],s.range),e,ke.Range.create(n.range.start,s.range.end))}else{const s=$h(t);return new xu(r,s,e,ke.Range.create(n.range.start,s.range.end))}else{const s=n.range;return new xu(r,new Md([],s),e,s)}}o(Mh,"parseJSDocTag");function Fh(t){const e=t.tokens[t.index++];return new hA(e.content,e.range)}o(Fh,"parseJSDocLine");function _u(t){if(!t)return _u({start:"/**",end:"*/",line:"*"});const{start:e,end:n,line:r}=t;return{start:Kc(e,!0),end:Kc(n,!1),line:Kc(r,!0)}}o(_u,"normalizeOptions");function Kc(t,e){if(typeof t=="string"||typeof t=="object"){const n=typeof t=="string"?Rr(t):t.source;return e?new RegExp(`^\\s*${n}`):new RegExp(`\\s*${n}\\s*$`)}else return t}o(Kc,"normalizeOption");var Wo,Vm=(Wo=class{constructor(e,n){this.elements=e,this.range=n}getTag(e){return this.getAllTags().find(n=>n.name===e)}getTags(e){return this.getAllTags().filter(n=>n.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const n of this.elements)if(e.length===0)e=n.toString();else{const r=n.toString();e+=Fd(e)+r}return e.trim()}toMarkdown(e){let n="";for(const r of this.elements)if(n.length===0)n=r.toMarkdown(e);else{const i=r.toMarkdown(e);n+=Fd(n)+i}return n.trim()}},o(Wo,"JSDocCommentImpl"),Wo),Ho,xu=(Ho=class{constructor(e,n,r,i){this.name=e,this.content=n,this.inline=r,this.range=i}toString(){let e=`@${this.name}`;const n=this.content.toString();return this.content.inlines.length===1?e=`${e} ${n}`:this.content.inlines.length>1&&(e=`${e}
${n}`),this.inline?`{${e}}`:e}toMarkdown(e){const n=this.content.toMarkdown(e);if(this.inline){const s=dA(this.name,n,e??{});if(typeof s=="string")return s}let r="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?r="*":(e==null?void 0:e.tag)==="bold"?r="**":(e==null?void 0:e.tag)==="bold-italic"&&(r="***");let i=`${r}@${this.name}${r}`;return this.content.inlines.length===1?i=`${i} — ${n}`:this.content.inlines.length>1&&(i=`${i}
${n}`),this.inline?`{${i}}`:i}},o(Ho,"JSDocTagImpl"),Ho);function dA(t,e,n){var r,i;if(t==="linkplain"||t==="linkcode"||t==="link"){const s=e.indexOf(" ");let a=e;if(s>0){const l=Ol(e,s);a=e.substring(l),e=e.substring(0,s)}return(t==="linkcode"||t==="link"&&n.link==="code")&&(a=`\`${a}\``),(i=(r=n.renderLink)===null||r===void 0?void 0:r.call(n,e,a))!==null&&i!==void 0?i:fA(e,a)}}o(dA,"renderInlineTag");function fA(t,e){try{return ti.parse(t,!0),`[${e}](${t})`}catch{return t}}o(fA,"renderLinkDefault");var Bo,Md=(Bo=class{constructor(e,n){this.inlines=e,this.range=n}toString(){let e="";for(let n=0;n<this.inlines.length;n++){const r=this.inlines[n],i=this.inlines[n+1];e+=r.toString(),i&&i.range.start.line>r.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let n="";for(let r=0;r<this.inlines.length;r++){const i=this.inlines[r],s=this.inlines[r+1];n+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(n+=`
`)}return n}},o(Bo,"JSDocTextImpl"),Bo),Ko,hA=(Ko=class{constructor(e,n){this.text=e,this.range=n}toString(){return this.text}toMarkdown(){return this.text}},o(Ko,"JSDocLineImpl"),Ko);function Fd(t){return t.endsWith(`
`)?`
`:`

`}o(Fd,"fillNewlines");var zo,T$=(zo=class{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const n=this.commentProvider.getComment(e);if(n&&rA(n))return nA(n).toMarkdown({renderLink:(i,s)=>this.documentationLinkRenderer(e,i,s)})}documentationLinkRenderer(e,n,r){var i;const s=(i=this.findNameInPrecomputedScopes(e,n))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,n);if(s&&s.nameSegment){const a=s.nameSegment.range.start.line+1,c=s.nameSegment.range.start.character+1,l=s.documentUri.with({fragment:`L${a},${c}`});return`[${r}](${l.toString()})`}else return}findNameInPrecomputedScopes(e,n){const i=Ce(e).precomputedScopes;if(!i)return;let s=e;do{const c=i.get(s).find(l=>l.name===n);if(c)return c;s=s.$container}while(s)}findNameInGlobalScope(e,n){return this.indexManager.allElements().find(i=>i.name===n)}},o(zo,"JSDocDocumentationProvider"),zo),Vo,R$=(Vo=class{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var n;return ZS(e)?e.$comment:(n=mg(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||n===void 0?void 0:n.text}},o(Vo,"DefaultCommentProvider"),Vo);function xh(t){return{documentation:{CommentProvider:e=>new R$(e),DocumentationProvider:e=>new T$(e)},parser:{GrammarConfig:e=>tT(e),LangiumParser:e=>qS(e),CompletionParser:e=>US(e),ValueConverter:()=>new HS,TokenBuilder:()=>new WS,Lexer:e=>new eA(e),ParserErrorMessageProvider:()=>new NS},lsp:{CompletionProvider:e=>new Iy(e),DocumentSymbolProvider:e=>new mC(e),HoverProvider:e=>new RC(e),FoldingRangeProvider:e=>new Dy(e),ReferencesProvider:e=>new wC(e),DefinitionProvider:e=>new $y(e),DocumentHighlightProvider:e=>new pC(e),RenameProvider:e=>new EC(e)},workspace:{AstNodeLocator:()=>new l$,AstNodeDescriptionProvider:e=>new o$(e),ReferenceDescriptionProvider:e=>new c$(e)},references:{Linker:e=>new r$(e),NameProvider:()=>new Nv,ScopeProvider:e=>new by(e),ScopeComputation:e=>new Ry(e),References:e=>new Ly(e)},serializer:{JsonSerializer:e=>new i$(e)},validation:{DocumentValidator:e=>new Jw(e),ValidationRegistry:e=>new Mw(e)},shared:()=>t.shared}}o(xh,"createDefaultModule");function jh(t){return{ServiceRegistry:()=>new s$,lsp:{Connection:()=>t.connection,LanguageServer:e=>new kC(e),WorkspaceSymbolProvider:e=>new PC(e),NodeKindProvider:()=>new SC,FuzzyMatcher:()=>new gC},workspace:{LangiumDocuments:e=>new bC(e),LangiumDocumentFactory:e=>new _C(e),DocumentBuilder:e=>new f$(e),TextDocuments:()=>new dw.TextDocuments(zc),IndexManager:e=>new h$(e),WorkspaceManager:e=>new m$(e),FileSystemProvider:e=>t.fileSystemProvider(e),MutexLock:()=>new $w,ConfigurationProvider:e=>new d$(e)}}}o(jh,"createDefaultSharedModule");var Xo,_$=(Xo=class extends cg{getAllTypes(){return["Common","Info"]}computeIsSubtype(e,n){switch(e){default:return!1}}getReferenceType(e){const n=`${e.container.$type}:${e.property}`;switch(n){default:throw new Error(`${n} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){default:return{name:e,mandatory:[]}}}},o(Xo,"MermaidAstReflection"),Xo),Xm,b$=o(()=>Xm??(Xm=Of('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/accDescr([\\\\t ]*:[^\\\\n\\\\r]*(?=%%)|\\\\s*{[^}]*})|accDescr([\\\\t ]*:[^\\\\n\\\\r]*|\\\\s*{[^}]*})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/accTitle[\\\\t ]*:[^\\\\n\\\\r]*(?=%%)|accTitle[\\\\t ]*:[^\\\\n\\\\r]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/title([\\\\t ][^\\\\n\\\\r]*|)(?=%%)|title([\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n[\\\\S\\\\s]*?---[\\\\t ]*(?!.)/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%\\\\s*/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"name":"Common","superTypes":[]}],"types":[],"usedGrammars":[]}')),"InfoGrammar"),k$={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},S$={AstReflection:()=>new _$},A$={Grammar:()=>b$(),LanguageMetaData:()=>k$,parser:{}},Yo,w$=(Yo=class extends eA{tokenize(e){return super.tokenize(e+`
`)}},o(Yo,"CommonLexer"),Yo),Jo,C$=(Jo=class extends WS{constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,n,r){const i=super.buildKeywordTokens(e,n,r);return i.forEach(s=>{this.keywords.has(s.name)&&s.PATTERN!==void 0&&(s.PATTERN=new RegExp(s.PATTERN.toString()+"(?!\\S)"))}),i}},o(Jo,"MermaidTokenBuilder"),Jo),E$=/accDescr(?:[\t ]*:[\t ]*([^\n\r]*)|\s*{([^}]*)})/,N$=/accTitle[\t ]*:[\t ]*([^\n\r]*)/,P$=/title([\t ]+([^\n\r]*)|)/,I$={ACC_DESCR:E$,ACC_TITLE:N$,TITLE:P$},Qo,D$=(Qo=class extends HS{runConverter(e,n,r){let i=this.runCommonConverter(e,n,r);return i===void 0&&(i=this.runCustomConverter(e,n,r)),i===void 0?super.runConverter(e,n,r):i}runCommonConverter(e,n,r){const i=I$[e.name];if(i===void 0)return;const s=i.exec(n);if(s!==null){if(s[1]!==void 0)return s[1].trim().replace(/[\t ]{2,}/gm," ");if(s[2]!==void 0)return s[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},o(Qo,"MermaidValueConverter"),Qo),Zo,O$=(Zo=class extends D${runCustomConverter(e,n,r){}},o(Zo,"CommonValueConverter"),Zo),ec,L$=(ec=class extends C${constructor(){super(["info","showInfo"])}},o(ec,"InfoTokenBuilder"),ec),$$={parser:{Lexer:t=>new w$(t),TokenBuilder:()=>new L$,ValueConverter:()=>new O$}};function pA(t=Qy){const e=Ui(jh(t),S$),n=Ui(xh({shared:e}),A$,$$);return e.ServiceRegistry.register(n),{shared:e,Info:n}}o(pA,"createInfoServices");var xd={},M$={info:()=>{const t=pA().Info.parser.LangiumParser;xd.info=t}};function F$(t,e){const n=M$[t];if(!n)throw new Error(`Unknown diagram type: ${t}`);xd[t]||n();const i=xd[t].parse(e);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new x$(i);return i.value}o(F$,"parse");var tc,x$=(tc=class extends Error{constructor(e){const n=e.lexerErrors.map(i=>i.message).join(`
`),r=e.parserErrors.map(i=>i.message).join(`
`);super(`Parsing failed: ${n} ${r}`),this.result=e}},o(tc,"MermaidParseError"),tc);/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/export{F$ as p};
